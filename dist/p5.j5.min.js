!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=55)}([function(t,e){var i,n,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(i===setTimeout)return setTimeout(t,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:o}catch(t){i=o}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var u,h=[],l=!1,c=-1;function f(){l&&u&&(l=!1,u.length?h=u.concat(h):c=-1,h.length&&p())}function p(){if(!l){var t=a(f);l=!0;for(var e=h.length;e;){for(u=h,h=[];++c<e;)u&&u[c].run();c=-1,e=h.length}u=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function v(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];h.push(new d(t,e)),1!==h.length||l||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=v,r.addListener=v,r.once=v,r.off=v,r.removeListener=v,r.removeAllListeners=v,r.emit=v,r.prependListener=v,r.prependOnceListener=v,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function r(t){return"object"==typeof t&&null!==t}function o(t){return void 0===t}t.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},i.prototype.emit=function(t){var e,i,s,a,u,h;if(this._events||(this._events={}),"error"===t&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}if(o(i=this._events[t]))return!1;if(n(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),i.apply(this,a)}else if(r(i))for(a=Array.prototype.slice.call(arguments,1),s=(h=i.slice()).length,u=0;u<s;u++)h[u].apply(this,a);return!0},i.prototype.addListener=function(t,e){var s;if(!n(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(e.listener)?e.listener:e),this._events[t]?r(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,r(this._events[t])&&!this._events[t].warned&&(s=o(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&s>0&&this._events[t].length>s&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(t,e){if(!n(e))throw TypeError("listener must be a function");var i=!1;function r(){this.removeListener(t,r),i||(i=!0,e.apply(this,arguments))}return r.listener=e,this.on(t,r),this},i.prototype.removeListener=function(t,e){var i,o,s,a;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(s=(i=this._events[t]).length,o=-1,i===e||n(i.listener)&&i.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(r(i)){for(a=s;a-- >0;)if(i[a]===e||i[a].listener&&i[a].listener===e){o=a;break}if(o<0)return this;1===i.length?(i.length=0,delete this._events[t]):i.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},i.prototype.removeAllListeners=function(t){var e,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n(i=this._events[t]))this.removeListener(t,i);else if(i)for(;i.length;)this.removeListener(t,i[i.length-1]);return delete this._events[t],this},i.prototype.listeners=function(t){return this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},i.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(n(e))return 1;if(e)return e.length}return 0},i.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,i){(function(t,n){var r=/%[sdj%]/g;e.format=function(t){if(!E(t)){for(var e=[],i=0;i<arguments.length;i++)e.push(a(arguments[i]));return e.join(" ")}i=1;for(var n=arguments,o=n.length,s=String(t).replace(r,function(t){if("%%"===t)return"%";if(i>=o)return t;switch(t){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch(t){return"[Circular]"}default:return t}}),u=n[i];i<o;u=n[++i])v(u)||!b(u)?s+=" "+u:s+=" "+a(u);return s},e.deprecate=function(i,r){if(m(t.process))return function(){return e.deprecate(i,r).apply(this,arguments)};if(!0===n.noDeprecation)return i;var o=!1;return function(){if(!o){if(n.throwDeprecation)throw new Error(r);n.traceDeprecation?console.trace(r):console.error(r),o=!0}return i.apply(this,arguments)}};var o,s={};function a(t,i){var n={seen:[],stylize:h};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),d(i)?n.showHidden=i:i&&e._extend(n,i),m(n.showHidden)&&(n.showHidden=!1),m(n.depth)&&(n.depth=2),m(n.colors)&&(n.colors=!1),m(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=u),l(n,t,n.depth)}function u(t,e){var i=a.styles[e];return i?"["+a.colors[i][0]+"m"+t+"["+a.colors[i][1]+"m":t}function h(t,e){return t}function l(t,i,n){if(t.customInspect&&i&&T(i.inspect)&&i.inspect!==e.inspect&&(!i.constructor||i.constructor.prototype!==i)){var r=i.inspect(n,t);return E(r)||(r=l(t,r,n)),r}var o=function(t,e){if(m(e))return t.stylize("undefined","undefined");if(E(e)){var i="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(i,"string")}if(g(e))return t.stylize(""+e,"number");if(d(e))return t.stylize(""+e,"boolean");if(v(e))return t.stylize("null","null")}(t,i);if(o)return o;var s=Object.keys(i),a=function(t){var e={};return t.forEach(function(t,i){e[t]=!0}),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(i)),S(i)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return c(i);if(0===s.length){if(T(i)){var u=i.name?": "+i.name:"";return t.stylize("[Function"+u+"]","special")}if(y(i))return t.stylize(RegExp.prototype.toString.call(i),"regexp");if(R(i))return t.stylize(Date.prototype.toString.call(i),"date");if(S(i))return c(i)}var h,b="",O=!1,A=["{","}"];(p(i)&&(O=!0,A=["[","]"]),T(i))&&(b=" [Function"+(i.name?": "+i.name:"")+"]");return y(i)&&(b=" "+RegExp.prototype.toString.call(i)),R(i)&&(b=" "+Date.prototype.toUTCString.call(i)),S(i)&&(b=" "+c(i)),0!==s.length||O&&0!=i.length?n<0?y(i)?t.stylize(RegExp.prototype.toString.call(i),"regexp"):t.stylize("[Object]","special"):(t.seen.push(i),h=O?function(t,e,i,n,r){for(var o=[],s=0,a=e.length;s<a;++s)I(e,String(s))?o.push(f(t,e,i,n,String(s),!0)):o.push("");return r.forEach(function(r){r.match(/^\d+$/)||o.push(f(t,e,i,n,r,!0))}),o}(t,i,n,a,s):s.map(function(e){return f(t,i,n,a,e,O)}),t.seen.pop(),function(t,e,i){if(t.reduce(function(t,e){return 0,e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return i[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+i[1];return i[0]+e+" "+t.join(", ")+" "+i[1]}(h,b,A)):A[0]+b+A[1]}function c(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,i,n,r,o){var s,a,u;if((u=Object.getOwnPropertyDescriptor(e,r)||{value:e[r]}).get?a=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(a=t.stylize("[Setter]","special")),I(n,r)||(s="["+r+"]"),a||(t.seen.indexOf(u.value)<0?(a=v(i)?l(t,u.value,null):l(t,u.value,i-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n")):a=t.stylize("[Circular]","special")),m(s)){if(o&&r.match(/^\d+$/))return a;(s=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function p(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function v(t){return null===t}function g(t){return"number"==typeof t}function E(t){return"string"==typeof t}function m(t){return void 0===t}function y(t){return b(t)&&"[object RegExp]"===O(t)}function b(t){return"object"==typeof t&&null!==t}function R(t){return b(t)&&"[object Date]"===O(t)}function S(t){return b(t)&&("[object Error]"===O(t)||t instanceof Error)}function T(t){return"function"==typeof t}function O(t){return Object.prototype.toString.call(t)}function A(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(m(o)&&(o=n.env.NODE_DEBUG||""),t=t.toUpperCase(),!s[t])if(new RegExp("\\b"+t+"\\b","i").test(o)){var i=n.pid;s[t]=function(){var n=e.format.apply(e,arguments);console.error("%s %d: %s",t,i,n)}}else s[t]=function(){};return s[t]},e.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=p,e.isBoolean=d,e.isNull=v,e.isNullOrUndefined=function(t){return null==t},e.isNumber=g,e.isString=E,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=m,e.isRegExp=y,e.isObject=b,e.isDate=R,e.isError=S,e.isFunction=T,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=i(58);var _=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function I(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){var t,i;console.log("%s - %s",(t=new Date,i=[A(t.getHours()),A(t.getMinutes()),A(t.getSeconds())].join(":"),[t.getDate(),_[t.getMonth()],i].join(" ")),e.format.apply(e,arguments))},e.inherits=i(10),e._extend=function(t,e){if(!e||!b(e))return t;for(var i=Object.keys(e),n=i.length;n--;)t[i[n]]=e[i[n]];return t}}).call(this,i(7),i(0))},function(t,e,i){(function(e){var n=i(4),r=i(1).EventEmitter,o=i(2),s=i(5),a=s.int16,u=s.uint16,h=s.uint24,l=s.s32,c=s.u32,f=new Map,p=new Map,d="thermometer";function v(t,e){var i=f.get(this),n=Object.create(null);this.components.forEach(function(r){i[r]=new v[r](Object.assign({controller:e.controller||t,freq:e.freq,board:this.board},e)),n[r]={get:function(){return i[r]}},g[r]&&(n[g[r]]=n[r])}),Object.defineProperties(this,n)}v.accelerometer=i(28),v.altimeter=i(36),v.barometer=i(37),v.gyro=i(38),v.hygrometer=i(39),v.magnetometer=i(40),v.orientation=i(41),v.thermometer=i(42);var g={thermometer:"temperature"},E={SHT31D:{ADDRESSES:{value:[68]},REGISTER:{value:{SOFT_RESET:12450,MEASURE_HIGH_REPEATABILITY:9216}},initialize:{value:function(t,e){var i=t.io,n=e.address||this.ADDRESSES[0];e.address=n,i.i2cConfig(e),i.i2cWrite(n,[this.REGISTER.SOFT_RESET>>8,255&this.REGISTER.SOFT_RESET]);var r={temperature:null,humidity:null},o=function(){i.i2cWrite(n,[this.REGISTER.MEASURE_HIGH_REPEATABILITY>>8,255&this.REGISTER.MEASURE_HIGH_REPEATABILITY]),setTimeout(function(){i.i2cReadOnce(n,6,function(t){r.temperature=u(t[0],t[1]),r.humidity=u(t[3],t[4]),this.emit("data",r),o()}.bind(this))}.bind(this),16)}.bind(this);o()}},identifier:{value:function(t){return"sht-31d-"+(t.address||E.SHT31D.ADDRESSES.value[0])}}},HTU21D:{ADDRESSES:{value:[64]},REGISTER:{value:{HUMIDITY:229,TEMPERATURE:227,SOFT_RESET:254}},initialize:{value:function(t,e){var i=t.io,n=e.address||this.ADDRESSES[0];e.address=n,e.delay=5e4,i.i2cConfig(e),i.i2cWrite(n,this.REGISTER.SOFT_RESET);var r={temperature:null,humidity:null},o=0,s=function(){var t=0===o,e=t?this.REGISTER.TEMPERATURE:this.REGISTER.HUMIDITY;i.i2cReadOnce(n,e,2,function(e){t?r.temperature=u(e[0],e[1]):r.humidity=u(e[0],e[1]),2==++o&&(o=0,this.emit("data",r)),s()}.bind(this))}.bind(this);s()}},identifier:{value:function(t){return"htu-s1d-"+(t.address||E.HTU21D.ADDRESSES.value[0])}}},HIH6130:{ADDRESSES:{value:[39]},initialize:{value:function(t,e){var i=t.io,n=e.address||this.ADDRESSES[0];e.address=n,i.i2cConfig(e);var r={humidity:null,temperature:null},o=36.65,s=function(){i.i2cWrite(n,160,[0,0]),setTimeout(function(){i.i2cWrite(n,128,[0,0]),i.i2cReadOnce(n,4,function(t){var e=t[0]>>6;r.humidity=a(63&t[0],t[1]),r.temperature=a(t[2],t[3]>>2),0===e&&o--,1===e&&o++,this.emit("data",r),s()}.bind(this))}.bind(this),o)}.bind(this);s()}},identifier:{value:function(t){return"hih6130-"+(t.address||E.HIH6130.ADDRESSES.value[0])}}},DHT_I2C_NANO_BACKPACK:{ADDRESSES:{value:[10]},REGISTER:{value:{READ:0}},initialize:{value:function(t,e){var i=t.io,n=e.address||this.ADDRESSES[0],r=11;e.address=n,i.i2cConfig(e);var o=/(\d{2})/.exec(e.controller),s=o&&o.length&&o[0];s&&(r=+s,Number.isNaN(r)&&(r=11));var u={temperature:null,humidity:null};i.i2cWrite(n,[2,r]),i.i2cRead(n,4,function(t){u.humidity=a(t[0],t[1]),u.temperature=a(t[2],t[3]),this.emit("data",u)}.bind(this))}},identifier:{value:function(t){return"dht_i2c_nano_backpack-"+(t.address||E.DHT_I2C_NANO_BACKPACK.ADDRESSES.value[0])}}},MPU6050:{ADDRESSES:{value:[104,105]},REGISTER:{value:{SETUP:[107,0],READ:59}},initialize:{value:function(t,e){var i=t.io,n=e.address||this.ADDRESSES[0];e.address=n;var r={accelerometer:{},temperature:{},gyro:{}};i.i2cConfig(e),i.i2cWrite(n,this.REGISTER.SETUP),i.i2cRead(n,this.REGISTER.READ,14,function(t){r.accelerometer={x:a(t[0],t[1]),y:a(t[2],t[3]),z:a(t[4],t[5])},r.temperature=a(t[6],t[7]),r.gyro={x:a(t[8],t[9]),y:a(t[10],t[11]),z:a(t[12],t[13])},this.emit("data",r)}.bind(this))}},identifier:{value:function(t){return"mpu-6050-"+(t.address||E.MPU6050.ADDRESSES.value[0])}}},BNO055:{ADDRESSES:{value:[40,41]},REGISTER:{value:{READ:{ACCEL:8,MAG:14,GYRO:20,EULER:26,QUARTERNION:32,TEMP:52},LENGTH:{ACCEL:6,MAG:6,GYRO:6,EULER:6,QUARTERNION:8,TEMP:1},OPR_MODE_ADDR:61,OPR_MODES:{CONFIG:0,ACCONLY:1,MAGONLY:2,GYRONLY:3,ACCMAG:4,ACCGYRO:5,MAGGYRO:6,AMG:7,IMUPLUS:8,COMPASS:9,M4G:10,NDOF_FMC_OFF:11,NDOF:12},PWR_MODE_ADDR:62,PWR_MODES:{NORMAL:0,LOW:1,SUSPEND:2},PAGE_ID_ADDR:7,PAGE_STATES:{ZERO:0},CALIBRATION:53,SYS_TRIGGER:63,UNIT_SEL_ADDR:59,AXIS_MAP_CONFIG_ADDR:65,AXIS_MAP_SIGN_ADDR:66}},initialize:{value:function(t,e){var i=t.io,n=e.address||this.ADDRESSES[0],r=e.calibrationMask||192;e.address=n;var o={accelerometer:{x:null,y:null,z:null},gyro:{x:null,y:null,z:null},magnetometer:{x:null,y:null,z:null},orientation:{euler:{heading:null,roll:null,pitch:null},quarternion:{w:null,x:null,y:null,z:null}},temperature:null,calibration:null};i.i2cConfig(e),i.i2cWriteReg(n,this.REGISTER.OPR_MODE_ADDR,this.REGISTER.OPR_MODES.CONFIG),i.i2cWriteReg(n,this.REGISTER.PAGE_ID_ADDR,this.REGISTER.PAGE_STATES.ZERO),i.i2cWriteReg(n,this.REGISTER.SYS_TRIGGER,32),new Promise(function(t){setTimeout(function(){i.i2cWriteReg(n,this.REGISTER.PWR_MODE_ADDR,this.REGISTER.PWR_MODES.NORMAL),i.i2cWriteReg(n,this.REGISTER.SYS_TRIGGER,e.enableExternalCrystal?128:0);var r=e.axisMap||36;i.i2cWriteReg(n,this.REGISTER.AXIS_MAP_CONFIG_ADDR,r);var o=e.axisSign||0;i.i2cWriteReg(n,this.REGISTER.AXIS_MAP_SIGN_ADDR,o),setTimeout(function(){i.i2cWriteReg(n,this.REGISTER.OPR_MODE_ADDR,this.REGISTER.OPR_MODES.NDOF),t()}.bind(this),10)}.bind(this),650)}.bind(this)).then(function(){return new Promise(function(t){var e=function(){i.i2cReadOnce(n,this.REGISTER.CALIBRATION,1,function(i){var n=i[0],s=o.calibration!==n;o.calibration=n,s&&this.emit("calibration",o.calibration),(n&r)===r?(this.emit("calibrated"),t()):e()}.bind(this))}.bind(this);e()}.bind(this))}.bind(this)).then(function(){i.i2cRead(n,this.REGISTER.READ.TEMP,2,function(t){o.temperature=t[0];var e=o.calibration!==t[1];o.calibration=t[1],this.emit("data",o),e&&this.emit("calibration",o.calibration)}.bind(this)),i.i2cRead(n,this.REGISTER.READ.ACCEL,18,function(t){o.accelerometer={x:a(t[1],t[0]),y:a(t[3],t[2]),z:a(t[5],t[4])},o.magnetometer={x:a(t[7],t[6]),y:a(t[9],t[8]),z:a(t[11],t[10])},o.gyro={x:a(t[13],t[12]),y:a(t[15],t[14]),z:a(t[17],t[16])},this.emit("data",o)}.bind(this)),i.i2cRead(n,this.REGISTER.READ.EULER,14,function(t){o.orientation.euler={heading:a(t[1],t[0]),roll:a(t[3],t[2]),pitch:a(t[5],t[4])},o.orientation.quarternion={w:a(t[7],t[6]),x:a(t[9],t[8]),y:a(t[11],t[10]),z:a(t[13],t[12])},this.emit("data",o)}.bind(this))}.bind(this))}},identifier:{value:function(t){return"bno055-"+(t.address||E.BNO055.ADDRESSES.value[0])}}},MPL115A2:{ADDRESSES:{value:[96]},REGISTER:{value:{COEFFICIENTS:4,PADC_MSB:0,CONVERT:18}},initialize:{value:function(t,e){var i=t.io,n=e.address||this.ADDRESSES[0];e.address=n,i.i2cConfig(e);var r={pressure:null,temperature:null},o={a0:null,b1:null,b2:null,c12:null},s=function(t){var e=u(t[0],t[1])>>6,i=u(t[2],t[3])>>6;r.pressure=o.a0+(o.b1+o.c12*i)*e+o.b2*i,r.temperature=i,this.emit("data",r),h()}.bind(this),h=function(){i.i2cWriteReg(n,this.REGISTER.CONVERT,0),i.i2cReadOnce(n,this.REGISTER.PADC_MSB,4,s)}.bind(this);new Promise(function(t){i.i2cReadOnce(n,this.REGISTER.COEFFICIENTS,8,function(e){var i=a(e[0],e[1]),n=a(e[2],e[3]),r=a(e[4],e[5]),s=a(e[6],e[7])>>2;o.a0=i/8,o.b1=n/8192,o.b2=r/16384,o.c12=s/4194304,t()}.bind(this))}.bind(this)).then(h)}},identifier:{value:function(t){return"mpl115a2-"+(t.address||E.MPL115A2.ADDRESSES.value[0])}}},MPL3115A2:{ADDRESSES:{value:[96]},REGISTER:{value:{STATUS:0,PRESSURE:1,CONFIG:19,BAR_IN_MSB:20,BAR_IN_LSB:21,CONTROL:38}},MASK:{value:{STATUS:{PRESSURE_DATA_READ:4},CONTROL:{SBYB:1,OS128:56,ALTIMETER:128,PRESSURE:0},CONFIG:{TDEFE:1,PDEFE:2,DREM:4}}},initialize:{value:function(t,e){var i=t.io,n=e.address||this.ADDRESSES[0],r=!1,o=null,s=0;e.address=n;var a=0,l={pressure:0,altitude:0,temperature:0};void 0!==e.elevation&&(o=e.elevation),null!==o&&o<=0&&(s=Math.abs(o)+1,o=1);var c=function(t){i.i2cReadOnce(n,this.REGISTER.STATUS,1,function(e){e[0]&this.MASK.STATUS.PRESSURE_DATA_READ?t():setTimeout(function(){c(t)},100)}.bind(this))}.bind(this),f=function(){var t=r?this.MASK.CONTROL.PRESSURE:this.MASK.CONTROL.ALTIMETER,e=this.MASK.CONTROL.SBYB|this.MASK.CONTROL.OS128|t;i.i2cWrite(n,this.REGISTER.CONTROL,e),c(function(){i.i2cReadOnce(n,this.REGISTER.PRESSURE,6,function(t){var e=h(t[1],t[2],t[3])>>4,i=u(t[4],t[5])>>4;if(l.temperature=i,r)l.pressure=e,this.emit("data",l);else{var n=t[1],o=t[2],c=t[3];a=(3*a+((n<<8|o)+(c>>4)/16))/4,l.altitude=a-s}r=!r,f()}.bind(this))}.bind(this))}.bind(this),p=[],d=function(){i.i2cWrite(n,this.REGISTER.CONTROL,59),i.i2cWrite(n,this.REGISTER.CONTROL,57),setTimeout(function(){i.i2cReadOnce(n,this.REGISTER.PRESSURE,6,function(t){var e=t[1],r=t[2],s=(t[3]>>4)/4;if(p.push((e<<10|r<<2)+s),4===p.length){var u=(p[0]+p[1]+p[2]+p[3])/4/Math.pow(1-225577e-10*o,5.255);i.i2cWrite(n,this.REGISTER.BAR_IN_MSB,u/2>>8),i.i2cWrite(n,this.REGISTER.BAR_IN_LSB,u/2&255),i.i2cWrite(n,this.REGISTER.CONTROL,187),i.i2cWrite(n,this.REGISTER.CONTROL,185),setTimeout(function(){i.i2cReadOnce(n,this.REGISTER.PRESSURE,6,function(t){var e=t[1],i=t[2],n=t[3];a=(e<<8|i)+(n>>4)/16,f(!1)})}.bind(this),550)}else d()}.bind(this))}.bind(this),500)}.bind(this);i.i2cConfig(Object.assign(e,{settings:{stopTX:!0}})),i.i2cWriteReg(n,45,0),i.i2cWriteReg(n,this.REGISTER.BAR_IN_MSB,0),i.i2cWriteReg(n,this.REGISTER.BAR_IN_LSB,0),i.i2cWriteReg(n,this.REGISTER.CONFIG,this.MASK.CONFIG.TDEFE|this.MASK.CONFIG.PDEFE|this.MASK.CONFIG.DREM),null!==o?d():f()}},identifier:{value:function(t){return"mpl3115a2-"+(t.address||E.MPL3115A2.ADDRESSES.value[0])}}},BMP180:{ADDRESSES:{value:[119]},REGISTER:{value:{COEFFICIENTS:170,READ:0,READ_START:244,READ_RESULT:246}},initialize:{value:function(t,e){var i=t.io,n=e.address||this.ADDRESSES[0],r=null,o=0;void 0!==e.elevation&&(r=e.elevation),(null!=r&&r<=0||null==r)&&(o=Math.abs(r)+1,r=1),e.address=n;var l=e.mode||3,c=[5,8,14,26][l],f=s.constrain(l,0,3),p={a1:null,a2:null,a3:null,a4:null,a5:null,a6:null,b1:null,b2:null,b5:null,mb:null,mc:null,md:null};i.i2cConfig(e),new Promise(function(t){i.i2cReadOnce(n,this.REGISTER.COEFFICIENTS,22,function(e){p.a1=a(e[0],e[1]),p.a2=a(e[2],e[3]),p.a3=a(e[4],e[5]),p.a4=u(e[6],e[7]),p.a5=u(e[8],e[9]),p.a6=u(e[10],e[11]),p.b1=a(e[12],e[13]),p.b2=a(e[14],e[15]),p.mb=a(e[16],e[17]),p.mc=a(e[18],e[19]),p.md=a(e[20],e[21]),t()})}.bind(this)).then(function(){var t={altitude:null,pressure:null,temperature:null},e=0,u=function(){var l=0===e,d=l?46:52+(f<<6),v=l?2:3,g=l?5:c;i.i2cWriteReg(n,this.REGISTER.READ_START,d),setTimeout(function(){i.i2cReadOnce(n,this.REGISTER.READ_RESULT,v,function(i){var n,c,d,v,g,E,m,y,b,R;if(l)d=((c=a(i[0],i[1]))-p.a6)*p.a5>>15,v=(p.mc<<11)/(d+p.md)>>0,p.b5=d+v|0,t.temperature=(p.b5+8>>4)/10;else{c=h(i[0],i[1],i[2])>>8-f,R=(y=p.b5-4e3)*y>>12,g=(d=p.b2*R>>11)+(v=p.a2*y>>11),E=(2+(4*p.a1+g<<f))/4>>0,g=(d=p.a3*y>>13)+(v=p.b1*R>>16)+2>>2,m=p.a4*(g+32768)>>15,n=(b=(c-E)*(5e4>>f))<s.POW_2_31?2*b/m:b/m*2,n>>=0,n+=(d=3038*(d=(n>>8)*(n>>8))>>16)+(v=-7357*n>>16)+3791>>4,t.pressure=n;var S=n/Math.pow(1-225577e-10*r,5.255),T=44330*(1-Math.pow(n/S,1/5.255));t.altitude=Math.round(T-o)}2==++e&&(e=0,this.emit("data",t)),u()}.bind(this))}.bind(this),g)}.bind(this);u()}.bind(this))}},identifier:{value:function(t){return"bmp180-"+(t.address||E.BMP180.ADDRESSES.value[0])}}},BMP280:{ADDRESSES:{value:[119]},REGISTER:{value:{COEFFICIENTS:136,CONFIG:245,MEASURE:244,PRESSURE:247,TEMPERATURE:250,RESET:224}},initialize:{value:function(t,e){var i=t.io,n=e.address||this.ADDRESSES[0],r=null,o=0;void 0!==e.elevation&&(r=e.elevation),(null!=r&&r<=0||null==r)&&(o=Math.abs(r)+1,r=1),e.address=n;var f={T1:null,T2:null,T3:null,P1:null,P2:null,P3:null,P4:null,P5:null,P6:null,P7:null,P8:null,P9:null};i.i2cConfig(e),i.i2cWrite(n,this.REGISTER.RESET,182),new Promise(function(t){i.i2cReadOnce(n,this.REGISTER.COEFFICIENTS,24,function(e){f.T1=u(e[1],e[0]),f.T2=a(e[3],e[2]),f.T3=a(e[5],e[4]),f.P1=u(e[7],e[6]),f.P2=a(e[9],e[8]),f.P3=a(e[11],e[10]),f.P4=a(e[13],e[12]),f.P5=a(e[15],e[14]),f.P6=a(e[17],e[16]),f.P7=a(e[19],e[18]),f.P8=a(e[21],e[20]),f.P9=a(e[23],e[22]),t()})}.bind(this)).then(function(){i.i2cWrite(n,this.REGISTER.MEASURE,63);var t={altitude:null,pressure:null,temperature:null};i.i2cRead(n,this.REGISTER.PRESSURE,6,function(e){var i,n,a,u=0,p=l(h(e[0],e[1],e[2])),d=l(h(e[3],e[4],e[5]));p>>=4;var v=((d>>=4)>>4)-f.T1;if(i=(n=((d>>3)-(f.T1<<1))*f.T2>>11)+(a=(v*v>>12)*f.T3>>14),t.temperature=(5*i+128>>8)/100,n=void 0,a=void 0,a=(((n=l(i>>1)-64e3)>>2)*(n>>2)>>11)*l(f.P6),a=((a+=n*l(f.P5)<<1)>>2)+(l(f.P4)<<16),n=(f.P3*((n>>2)*(n>>2)>>13)>>3)+(l(f.P2)*n>>1)>>18,0===(n=(s.POW_2_15+n)*l(f.P1)>>15))return 0;u=(u=3125*c(l(s.POW_2_20)-p-(a>>12)))<s.POW_2_31?(u<<1>>>0)/c(n):2*(u/c(n)>>>0);var g=(u=c(u)>>>0)>>3;n=l(f.P9)*l(g*g>>13)>>12,a=l(u>>2)*l(f.P8)>>13,u=c(l(u)+(n+a+f.P7>>4)),t.pressure=u;var E=u/Math.pow(1-225577e-10*r,5.255),m=44330*(1-Math.pow(u/E,1/5.255));t.altitude=Math.round(m-o),this.emit("data",t)}.bind(this))}.bind(this))}},identifier:{value:function(t){return"bmp280-"+(t.address||E.BMP280.ADDRESSES.value[0])}}},BME280:{ADDRESSES:{value:[119]},REGISTER:{value:{COEFFICIENTS_TP:136,COEFFICIENTS_H:225,CONFIG:245,MEASURE_H:242,MEASURE_TP:244,PRESSURE:247,TEMPERATURE:250,HUMIDITY:253,RESET:224}},initialize:{value:function(t,i){var n=t.io,r=i.address||this.ADDRESSES[0],o=null,f=0;void 0!==i.elevation&&(o=i.elevation),(null!=o&&o<=0||null==o)&&(f=Math.abs(o)+1,o=1),i.address=r;var p={T1:null,T2:null,T3:null,P1:null,P2:null,P3:null,P4:null,P5:null,P6:null,P7:null,P8:null,P9:null,H1:null,H2:null,H3:null,H4:null,H5:null,H6:null};n.i2cConfig(i),n.i2cWrite(r,this.REGISTER.RESET,182),new Promise(function(t){Promise.all([new Promise(function(t){n.i2cReadOnce(r,136,24,function(e){p.T1=u(e[1],e[0]),p.T2=a(e[3],e[2]),p.T3=a(e[5],e[4]),p.P1=u(e[7],e[6]),p.P2=a(e[9],e[8]),p.P3=a(e[11],e[10]),p.P4=a(e[13],e[12]),p.P5=a(e[15],e[14]),p.P6=a(e[17],e[16]),p.P7=a(e[19],e[18]),p.P8=l(a(e[21],e[20])),p.P9=l(a(e[23],e[22])),t()})}),new Promise(function(t){n.i2cReadOnce(r,161,1,function(e){p.H1=s.u8(e[0]),t()})}),new Promise(function(t){n.i2cReadOnce(r,225,8,function(e){p.H2=l(a(e[1],e[0])),p.H3=l(e[2]),p.H4=l(e[3]<<4|15&e[4]),p.H5=l(e[5]<<4|e[4]>>4),p.H6=s.s8(e[6]),t()})})]).then(t)}.bind(this)).then(function(){n.i2cWrite(r,this.REGISTER.MEASURE_H,5),n.i2cWrite(r,this.REGISTER.MEASURE_TP,183);var t={altitude:null,pressure:null,humidity:null,temperature:null},i=Date.now();n.i2cRead(r,this.REGISTER.PRESSURE,8,function(n){if(e.env.IS_TEST_MODE||!(i+1e3>Date.now())){var r,a,d,v,g=0,E=l(h(n[0],n[1],n[2])),m=l(h(n[3],n[4],n[5])),y=l(u(n[6],n[7]));E>>=4;var b=((m>>=4)>>4)-p.T1;if(r=(a=((m>>3)-(p.T1<<1))*p.T2>>11)+(d=(b*b>>12)*p.T3>>14),t.temperature=(5*r+128>>8)/100,a=void 0,d=void 0,d=(((a=l(r>>1)-64e3)>>2)*(a>>2)>>11)*l(p.P6),d=((d+=a*l(p.P5)<<1)>>2)+(l(p.P4)<<16),a=(p.P3*((a>>2)*(a>>2)>>13)>>3)+(l(p.P2)*a>>1)>>18,0===(a=(s.POW_2_15+a)*l(p.P1)>>15))return 0;g=(g=3125*c(l(s.POW_2_20)-E-(d>>12)))<s.POW_2_31?(g<<1>>>0)/c(a):2*(g/c(a)>>>0);var R=(g=c(g)>>>0)>>3;a=l(p.P9)*l(R*R>>13)>>12,d=l(g>>2)*p.P8>>13,g=c(l(g)+(a+d+p.P7>>4)),t.pressure=g;var S=g/Math.pow(1-225577e-10*o,5.255),T=44330*(1-Math.pow(g/S,1/5.255));t.altitude=Math.round(T-f),v=l(r-76800),v=((y<<14)-l(p.H4<<20)-p.H5*v+s.POW_2_14>>15)*((((v*p.H6>>10)*((v*p.H3>>11)+s.POW_2_15)>>10)+s.POW_2_21)*p.H2+s.POW_2_13>>14),v-=((v>>15)*(v>>15)>>7)*l(p.H1)>>4,v=s.constrain(v,0,419430400),t.humidity=c(v>>12),this.emit("data",t)}}.bind(this))}.bind(this))}},identifier:{value:function(t){return"bme280-"+(t.address||E.BME280.ADDRESSES.value[0])}}},SI7020:{ADDRESSES:{value:[64]},REGISTER:{value:{HUMIDITY:229,TEMPERATURE:224}},initialize:{value:function(t,e){var i=t.io,n=e.address||this.ADDRESSES[0];e.address=n,e.delay=5e4,i.i2cConfig(e);var r={temperature:null,humidity:null};i.i2cRead(n,this.REGISTER.TEMPERATURE,2,function(t){r.temperature=u(t[0],t[1]),this.emit("data",r)}.bind(this)),i.i2cRead(n,this.REGISTER.HUMIDITY,2,function(t){r.humidity=u(t[0],t[1]),this.emit("data",r)}.bind(this))}},identifier:{value:function(t){return"si7020-"+(t.address||E.SI7020.ADDRESSES.value[0])}}},MS5611:{ADDRESSES:{value:[119]},REGISTER:{value:{COEFFICIENTS:162,READ:0,PRESSURE:64,TEMPERATURE:80,RESET:30}},initialize:{value:function(t,e){var i=t.io,n=e.address||this.ADDRESSES[0],r=null,o=0;void 0!==e.elevation&&(r=e.elevation),(null!=r&&r<=0||null==r)&&(o=Math.abs(r)+1,r=1),e.address=n;var a={altitude:null,pressure:null,temperature:null},l=e.mode||5,c=[1,2,3,4,5,10][l],f={C1:null,C2:null,C3:null,C4:null,C5:null,C6:null},p=Object.keys(f);e.delay=1e3*c,i.i2cConfig(e),i.i2cWrite(n,this.REGISTER.RESET),new Promise(function(t){setTimeout(function(){var e=p.map(function(t,e){var r=this.REGISTER.COEFFICIENTS+2*e;return new Promise(function(e){i.i2cReadOnce(n,r,2,function(i){f[t]=u(i[0],i[1]),e()})})}.bind(this));Promise.all(e).then(t)}.bind(this),50)}.bind(this)).then(function(){var t,e,u,p,d,v,g,E,m,y,b=0,R=function(){var S=0===b,T=(S?80:64)+l;i.i2cWrite(n,T),S?(e=0,u=0,p=0,E=0,m=0,y=0):(t=0,d=0,v=0,g=0),setTimeout(function(){i.i2cReadOnce(n,this.REGISTER.READ,3,function(i){if(S)e=h(i[0],i[1],i[2]),u=e-f.C5*s.POW_2_8,(p=2e3+u*f.C6/s.POW_2_23)<2e3&&(E=Math.pow(u,2)/s.POW_2_31,m=5*Math.pow(p-2e3,2)/2,y=5*Math.pow(p-2e3,2)/s.POW_2_2,p<-1500&&(m+=7*Math.pow(p+1500,2),y+=11*Math.pow(p+1500,2)/2)),p-=E,a.temperature=p/100;else{t=h(i[0],i[1],i[2]),d=f.C2*s.POW_2_16+f.C4*u/s.POW_2_7,v=f.C1*s.POW_2_15+f.C3*u/s.POW_2_8,d-=m,g=(t*(v-=y)/s.POW_2_21-d)/s.POW_2_15,a.pressure=g;var n=g/Math.pow(1-225577e-10*r,5.255),l=44330*(1-Math.pow(g/n,1/5.255));a.altitude=l-o}2==++b&&(b=0,this.emit("data",a)),R()}.bind(this))}.bind(this),c)}.bind(this);R()}.bind(this))}},identifier:{value:function(t){return"ms5611-"+(t.address||E.MS5611.ADDRESSES.value[0])}}},TH02:{ADDRESSES:{value:[64]},COMMAND:{value:{MEASURE_HUMIDITY:1,MEASURE_TEMPERATURE:17}},REGISTER:{value:{STATUS:0,READ:1,CONFIG:3}},initialize:{value:function(t,e){var i=t.io,n=e.address||this.ADDRESSES[0];e.address=n;var r={temperature:null,humidity:null},o=0;i.i2cConfig(Object.assign(e,{settings:{stopTX:!0}}));var s=function(){var t=0===o,e=t?this.COMMAND.MEASURE_TEMPERATURE:this.COMMAND.MEASURE_HUMIDITY;new Promise(function(t){i.i2cWrite(n,this.REGISTER.CONFIG,e);var r=function(){i.i2cReadOnce(n,this.REGISTER.STATUS,1,function(e){1&e[0]?r():t()})}.bind(this);r()}.bind(this)).then(function(){Promise.all([new Promise(function(t){i.i2cReadOnce(n,1,1,function(e){t(e[0])})}),new Promise(function(t){i.i2cReadOnce(n,2,1,function(e){t(e[0])})})]).then(function(e){t?r.temperature=(u(e[0],e[1])>>2)/32-50:r.humidity=(u(e[0],e[1])>>4)/16-24,2==++o&&(o=0,this.emit("data",r)),s()}.bind(this))}.bind(this))}.bind(this);s()}},identifier:{value:function(t){return"th02-"+(t.address||E.TH02.ADDRESSES.value[0])}}},LSM303C:{ADDRESSES:{value:{ACC:29,MAG:30}},COMMAND:{value:{ACC_SETUP:[4,63,63,63],MAG_SETUP:[216,96,64,216,8,0]}},REGISTER:{value:{ACC_CTRL_SEQ:[35,32,32,32],ACC_STATUS:39,ACC_OUTX_L:40,ACC_OUTX_H:41,ACC_OUTY_L:42,ACC_OUTY_H:43,ACC_OUTZ_L:44,ACC_OUTZ_H:45,MAG_CTRL_SEQ:[32,33,36,32,35,34],MAG_STATUS:39,MAG_OUTX_L:40,MAG_OUTX_H:41,MAG_OUTY_L:42,MAG_OUTY_H:43,MAG_OUTZ_L:44,MAG_OUTZ_H:45,MAG_TEMP_OUT_L:46,MAG_TEMP_OUT_H:47}},initialize:{value:function(t,e){var i=t.io,n=this.freq||40,r=this.ADDRESSES,o={},s={},u={temperature:0,magnetometer:s,accelerometer:o},h=function(){i.i2cConfig(Object.assign({},e,{address:r.ACC})),this.REGISTER.ACC_CTRL_SEQ.forEach(function(t,e){i.i2cWrite(r.ACC,t,this.COMMAND.ACC_SETUP[e])}.bind(this))}.bind(this),l=function(){i.i2cConfig(Object.assign({},e,{address:r.MAG})),this.REGISTER.MAG_CTRL_SEQ.forEach(function(t,e){i.i2cWrite(r.MAG,t,this.COMMAND.MAG_SETUP[e])}.bind(this))}.bind(this),c=function(t){i.i2cReadOnce(r.ACC,this.REGISTER.ACC_OUTX_L,6,function(e){o.x=.06103515625*a(e[1],e[0]),o.y=.06103515625*a(e[3],e[2]),o.z=.06103515625*a(e[5],e[4]),t()})}.bind(this),f=function(t){i.i2cReadOnce(r.MAG,this.REGISTER.MAG_OUTX_L,6,function(e){s.x=.00048828125*a(e[1],e[0]),s.y=.00048828125*a(e[3],e[2]),s.z=.00048828125*a(e[5],e[4]),t()})}.bind(this),p=function(t){i.i2cReadOnce(r.MAG,this.REGISTER.MAG_TEMP_OUT_L,2,function(e){u.temperature=a(e[1],e[0]),t()})}.bind(this),d=function(){Promise.all([new Promise(c),new Promise(f),new Promise(p)]).then(function(){this.emit("data",u),setTimeout(d,n)}.bind(this))}.bind(this);h(),l(),d()}},identifier:{value:function(t){return"lsm303c-"+(t.address||E.LSM303C.ADDRESSES.value[0])}}}};E.BMP085=E.BMP180,E.GY521=E.MPU6050,E.SI7021=E.SI7020,E.DHT11_I2C_NANO_BACKPACK=E.DHT_I2C_NANO_BACKPACK,E.DHT21_I2C_NANO_BACKPACK=E.DHT_I2C_NANO_BACKPACK,E.DHT22_I2C_NANO_BACKPACK=E.DHT_I2C_NANO_BACKPACK,E.get=function(t,e,i){var n,o,s;return p.has(t)||p.set(t,{}),i=i||{},(n=p.get(t))[o=E[e].identifier.value(i)]||(s=new r,Object.defineProperties(s,E[e]),s.initialize(t,i),n[o]=s),n[o]},E.clear=function(){p.clear()};var m={MPU6050:{initialize:{value:function(t){v.call(this,"MPU6050",t)}},components:{value:["accelerometer","gyro",d]}},BNO055:{initialize:{value:function(t){f.get(this).calibrationMask=t.calibrationMask||192;var e=E.get(this.board,"BNO055",t);e.on("calibrated",function(){this.emit("calibrated")}.bind(this)),e.on("calibration",function(t){this.emit("calibration",t)}.bind(this)),v.call(this,"BNO055",t)}},components:{value:["accelerometer","gyro","magnetometer","orientation",d]},calibration:{get:function(){return this.orientation.calibration}},isCalibrated:{get:function(){var t=f.get(this).calibrationMask;return(this.orientation.calibration&t)===t}}},MPL115A2:{initialize:{value:function(t){v.call(this,"MPL115A2",t)}},components:{value:["barometer",d]}},SHT31D:{initialize:{value:function(t){v.call(this,"SHT31D",t)}},components:{value:["hygrometer",d]}},HTU21D:{initialize:{value:function(t){v.call(this,"HTU21D",t)}},components:{value:["hygrometer",d]}},HIH6130:{initialize:{value:function(t){v.call(this,"HIH6130",t)}},components:{value:["hygrometer",d]}},DHT_I2C_NANO_BACKPACK:{initialize:{value:function(t){v.call(this,"DHT_I2C_NANO_BACKPACK",t)}},components:{value:["hygrometer",d]}},MPL3115A2:{initialize:{value:function(t){v.call(this,"MPL3115A2",t)}},components:{value:["altimeter","barometer",d]}},BMP180:{initialize:{value:function(t){v.call(this,"BMP180",t)}},components:{value:["altimeter","barometer",d]}},BMP280:{initialize:{value:function(t){v.call(this,"BMP280",t)}},components:{value:["altimeter","barometer",d]}},BME280:{initialize:{value:function(t){v.call(this,"BME280",t)}},components:{value:["altimeter","barometer","hygrometer",d]}},SI7020:{initialize:{value:function(t){v.call(this,"SI7020",t)}},components:{value:["hygrometer",d]}},MS5611:{initialize:{value:function(t){v.call(this,"MS5611",t)}},components:{value:["altimeter","barometer",d]}},TH02:{initialize:{value:function(t){v.call(this,"TH02",t)}},components:{value:["hygrometer",d]}},LSM303C:{initialize:{value:function(t){v.call(this,"LSM303C",t)}},components:{value:["magnetometer",d,"accelerometer"]}}};function y(t){if(!(this instanceof y))return new y(t);var e,i;if(n.Component.call(this,t=n.Options(t)),null==(e=t.controller&&"string"==typeof t.controller?m[t.controller.toUpperCase()]:t.controller))throw new Error("Missing IMU/Multi controller");this.freq=t.freq||20,i={},f.set(this,i),n.Controller.call(this,e,t),"function"==typeof this.initialize&&this.initialize(t),this.isReady=!1,setInterval(function(){this.isReady&&this.emit("data",this)}.bind(this),this.freq);var o=this.components.slice();this.components&&this.components.length>0&&this.components.forEach(function(t){this[t]instanceof r&&this[t].on("change",function(){if(o.length){var e=o.indexOf(t);-1!==e&&o.splice(e,1)}o.length||this.isReady||(this.isReady=!0),this.isReady&&this.emit("change",this,t)}.bind(this))},this)}m.BMP085=m.BMP180,m.GY521=m.MPU6050,m.SI7021=m.SI7020,m.DHT11_I2C_NANO_BACKPACK=m.DHT_I2C_NANO_BACKPACK,m.DHT21_I2C_NANO_BACKPACK=m.DHT_I2C_NANO_BACKPACK,m.DHT22_I2C_NANO_BACKPACK=m.DHT_I2C_NANO_BACKPACK,o.inherits(y,r),y.Drivers=E,e.env.IS_TEST_MODE&&(y.Controllers=m,y.purge=function(){f.clear()}),t.exports=y}).call(this,i(0))},function(t,e,i){(function(e){Array.prototype.includes||i(27);var n,r=!!e.env.IS_TEST_MODE,o=i(1).EventEmitter,s=i(2),a=i(59),u=i(6),h=i(5),l=i(32),c=i(33),f=i(68),p=[],d=/usb|acm|^com/i,v="undefined",g={used:[],attempts:[],detect:function(t){(parseFloat(e.versions.nw)>=.13?i(19):i(16)).list(function(e,i){var n=i.filter(function(t){var e=!0;return d.test(t.comName)||(e=!1),g.used.includes(t.comName)&&(e=!1),e}).map(function(t){return t.comName});if(!n.length){if(r&&this.abort)return;return g.attempts[g.used.length]||(g.attempts[g.used.length]=0,this.info("Board","Looking for connected device")),g.attempts[g.used.length]++,g.attempts[g.used.length]>10?void this.fail("Board","No connected device found"):void setTimeout(()=>{g.detect.call(this,t)},400)}this.info("Available",a.grey(n)),t.call(this,n[0])}.bind(this))},connect:function(t,e){var n,r,o,s,u=i(71).Board,h=null;"object"==typeof t&&t.path?(o=t.path,this.info(t.transport||"SerialPort",a.grey(o))):o=t,g.used.push(o);try{(n=new u(t,function(t){t&&(h=t),e.call(this,h,h?"error":"ready",n)}.bind(this))).name="Firmata",n.defaultLed=13,n.port=o,r=!0}catch(t){h=t}h&&(h=h.message||h),s=r?"connect":"error",e.call(this,h,s,n)}};function E(t){if(!(this instanceof E))return new E(t);t=t||{};var i={},n=!1;Object.assign(this,t),this.timer=null,this.isConnected=!1,this.isReady=!1,this.io=this.io||null,this.register=[],this.occupied=[],this.Drivers={},this.id||(this.id=h.uid()),typeof this.debug===v&&(this.debug=!0),typeof this.repl===v&&(this.repl=!0),typeof this.sigint===v&&(this.sigint=!0),this.pins=null,this.repl&&(l.ref?(i[this.id]=this,l.ref.on("ready",function(){l.ref.inject(i)}),this.repl=l.ref):(i[this.id]=i.board=this,this.repl=new l(i))),t.io?(this.io=t.io,this.isReady=t.io.isReady,this.transport=this.io.transport||null,this.port=this.io.name,this.pins=E.Pins(this)):this.port&&t.port?g.connect.call(this,this.port,m):g.detect.call(this,function(t){g.connect.call(this,t,m)}),t.port||null===this.io||(this.info("Available",a.grey(this.io.name||"unknown")),["connect","ready"].forEach(function(t){this.io.once(t,function(){"ready"!==t||this.isConnected?m.call(this,null,t,this.io):n=!0,"connect"===t&&n&&m.call(this,null,"ready",this.io)}.bind(this)),this.io.isReady&&e.nextTick(function(){this.io.emit(t)}.bind(this))},this)),this.once("ready",function(){var t=e.hrtime();this.millis=function(){return e.hrtime(t)[1]/1e6},["close","disconnect","error","string"].forEach(function(t){this.io.on(t,function(e){this.emit(t,e)}.bind(this))},this)}.bind(this)),p.push(this)}function m(t,i,n){var o=!1;this.io||(this.io=n),"error"===i&&t&&t.message&&(o=!0,this.error("Error",t.message)),"connect"===i&&(this.isConnected=!0,this.port=n.port||n.name,this.info("Connected",a.grey(this.port)),r||(this.timer=setTimeout(function(){this.error("Device or Firmware Error","A timeout occurred while connecting to the Board. \n\nPlease check that you've properly flashed the board with the correct firmware.\nSee: https://github.com/rwaldron/johnny-five/wiki/Getting-Started#trouble-shooting\n\nIf connecting to a Leonardo or Leonardo clone, press the 'Reset' button on the board, wait approximately 11 seconds for complete reset, then run your program again."),this.emit("error",new Error("A timeout occurred while connecting to the Board."))}.bind(this),this.timeout||1e4))),"ready"===i&&(this.timer&&clearTimeout(this.timer),this.isReady=!0,this.pins=E.Pins(this),this.MODES=this.io.MODES,typeof n.debug!==v&&!1===n.debug&&(this.debug=!1),typeof n.repl!==v&&!1===n.repl&&(this.repl=!1),this.repl&&this.repl.initialize(this.emit.bind(this,"ready")),"Mock"!==n.name&&this.sigint&&e.on("SIGINT",function(){this.emit("exit"),this.warn("Board","Closing.");var t=setTimeout(function(){e.reallyExit()},1e3),i=setInterval(function(){this.io.pending||(clearInterval(i),clearTimeout(t),e.nextTick(e.reallyExit))}.bind(this),1)}.bind(this))),this.repl?"connect"===i&&this.emit(i,t):o||this.emit(i,t)}s.inherits(E,o),["digitalWrite","analogWrite","analogRead","digitalRead","pinMode","queryPinState","stepperConfig","stepperStep","sendI2CConfig","sendI2CWriteRequest","sendI2CReadRequest","i2cConfig","i2cWrite","i2cWriteReg","i2cRead","i2cReadOnce","pwmWrite","servoConfig","servoWrite","sysexCommand","sysexResponse","serialConfig","serialWrite","serialRead","serialStop","serialClose","serialFlush","serialListen"].forEach(function(t){E.prototype[t]=function(){return this.io[t].apply(this.io,arguments),this}}),E.prototype.snapshot=function(t){var e=this.snapshot.blacklist,i=this.snapshot.special,n="function"==typeof t;return this.register.reduce(function(r,o){return typeof o.components===v&&r.push(Object.getOwnPropertyNames(o).reduce(function(r,s){var a=o[s];if(!e.includes(s)&&"function"!=typeof a)if(n){var u=t(s,a,o);void 0!==u&&(r[s]=u)}else r[s]=i[s]?i[s](a):a;return r},Object.create(null))),r}.bind(this),[])},E.prototype.serialize=function(t){return JSON.stringify(this.snapshot(t))},E.prototype.snapshot.blacklist=["board","io","_events","_eventsCount","state"],E.prototype.samplingInterval=function(t){if(!this.io.setSamplingInterval)throw new Error("This IO plugin does not implement an interval adjustment method");return this.io.setSamplingInterval(t),this},E.prototype.snapshot.special={mode:function(t){return["INPUT","OUTPUT","ANALOG","PWM","SERVO"][t]||"unknown"}},E.prototype.shiftOut=function(t,e,i,n){3===arguments.length&&(n=i,i=!0);for(var r=0;r<8;r++)this.io.digitalWrite(e,0),i?this.io.digitalWrite(t,0|!!(n&1<<7-r)):this.io.digitalWrite(t,0|!!(n&1<<r)),this.io.digitalWrite(e,1)};var y={specials:["error","fail","warn","info"],colors:{log:"white",error:"red",fail:"inverse",warn:"yellow",info:"cyan"}};function b(t){if(!(this instanceof b))return new b(t);var e;if(Array.isArray(t)&&(e=t.slice(),t={ports:e}),Array.isArray(t)||"object"!=typeof t||void 0===t.ports||(e=t.ports),!Array.isArray(e))throw new Error("Expected ports to be an array");typeof t.debug===v&&(t.debug=!0),typeof t.repl===v&&(t.repl=!0);var i={},n=e.some(function(t){return!1===t.repl}),r=e.some(function(t){return!1===t.debug});this.length=e.length,this.debug=t.debug,this.repl=t.repl,r&&(this.debug=!1),n&&(this.repl=!1);var o=e.map(function(t,e){var n;return"string"==typeof t?(n={},d.test(t)?n.port=t:n.id=t):n=t,n.repl=!1,this[e]=i[n.id]=new E(n),this[e].on("error",function(t){this.emit("error",t)}.bind(this)),this[e].on("fail",function(t){this.emit("fail",t)}.bind(this)),new Promise(function(t){this[e].on("ready",function(){t(i[n.id])})}.bind(this))},this);Promise.all(o).then(function(t){Object.assign(this,t),this.each(function(t){t.info("Board ID: ",a.green(t.id))}),this.repl?(this.repl=new l(Object.assign({},i,{board:this})),this.repl.initialize(function(){this.emit("ready",i)}.bind(this))):this.emit("ready",i)}.bind(this))}E.prototype.log=function(){var t=Array.from(arguments);y.specials.includes(t[0])||t.unshift("log");var e=t.shift(),i=t.shift(),n=t.shift(),r=y.colors[e],o=Date.now(),s={type:e,timestamp:o,class:i,message:"",data:null};"object"==typeof t[t.length-1]&&(s.data=t.pop()),n+=" "+t.join(", "),s.message=n.trim(),this.debug&&console.log([a.grey(o),a.magenta(i),a[r](n),t.join(", ")].join(" ")),this.emit(e,s),this.emit("message",s)},y.specials.forEach(function(t){E.prototype[t]=function(){var e=[].slice.call(arguments);e.unshift(t),this.log.apply(this,e)}}),E.prototype.wait=function(t,e){return setTimeout(e,t),this},E.prototype.loop=function(t,e){var i=setInterval(function(){e(function(){clearInterval(i)})},t);return this},E.map=h.map,E.fmap=h.fmap,E.constrain=h.constrain,E.range=h.range,E.range.prefixed=h.range.prefixed,E.uid=h.uid,E.mount=function(t){var e,i="number"==typeof t&&t;return t&&t.board?t.board:"number"==typeof i?(e=p[i])&&e||null:p.length?p[0]:null},E.Component=function(t,e){var r;if(typeof t===v&&(t={}),typeof e===v&&(e={}),this.board=E.mount(t),this.io=this.board.io,this.id=t.id||E.uid(),this.custom=t.custom||{},"number"==typeof t.pin||"string"==typeof t.pin)r=[t.pin];else if(Array.isArray(t.pins))r=t.pins.slice();else if("object"==typeof t.pins&&null!==t.pins){var o=t.pins||t.pin;for(var s in r=[],o)r.push(o[s])}t.controller&&("string"==typeof t.controller&&(t.controller=t.controller.replace(/-/g,"")),n||(n=i(9)),n.hasController(t.controller)&&(e={normalizePin:!1,requestPin:!1})),(e=E.Component.initialization(e)).normalizePin&&(t=E.Pins.normalize(t,this.board)),typeof t.pins!==v&&(this.pins=t.pins||[]),typeof t.pin!==v&&(this.pin=t.pin),typeof t.emitter!==v&&(this.emitter=t.emitter),typeof t.address!==v&&(this.address=t.address),typeof t.controller!==v&&(this.controller=t.controller),typeof t.bus!==v&&(this.bus=t.bus),this.board.register.push(this)},E.Component.initialization=function(t){return Object.assign({},{requestPin:!0,normalizePin:!0},t)},E.Controller=function(t,e){var i=t.requirements&&t.requirements.value;i&&i.options&&Object.keys(i.options).forEach(function(t){if(typeof e[t]===v||typeof e[t]!==i.options[t].typeof){if(i.options[t].throws)throw new Error(i.options[t].message);this.board.warn(this.constructor.name,i.options[t].message)}},this),Object.defineProperties(this,t)},E.Pins=f,E.Options=c,Object.defineProperty(E,"cache",{get:function(){return p}}),E.Event=function(t){if(typeof t===v)throw new Error("Board.Event missing Event object");this.type=t.type||"data",this.target=t.target||null,Object.assign(this,t)},s.inherits(b,o),Object.assign(b.prototype,u.prototype),b.prototype.byId=function(t){for(var e=0;e<this.length;e++)if(this[e].id===t)return this[e];return null},b.prototype.log=E.prototype.log,y.specials.forEach(function(t){b.prototype[t]=function(){var e=[].slice.call(arguments);e.unshift(t),this.log.apply(this,e)}}),r&&(g.purge=function(){g.used.length=0},E.Serial=g,E.purge=function(){E.Pins.normalize.clear(),l.isActive=!1,l.isBlocked=!0,l.ref=null,p.length=0},E.testMode=function(t){if(!arguments.length)return r;r=t}),E.Array=b,E.Collection=b,t.exports=E}).call(this,i(0))},function(t,e,i){var n={debounce:i(66),cloneDeep:i(67),toFixed:function(t,e){return+(t||0).toFixed(e)},map:function(t,e,i,n,r){return(t-e)*(r-n)/(i-e)+n|0}};n.scale=n.map;var r=new Float32Array(1);n.fmap=function(t,e,i,n,o){return r[0]=(t-e)*(o-n)/(i-e)+n,r[0]},n.fscale=n.fmap,n.constrain=function(t,e,i){return Math.min(i,Math.max(e,t))},n.inRange=function(t,e,i){return t>=e&&t<=i},n.range=function(t,e,i){1===arguments.length&&(e=t-1,t=0),t=t||0,e=e||0,i=i||1;for(var n=Math.max(Math.ceil((e-t)/i),0),r=0,o=[];r<=n;)o[r++]=t,t+=i;return o},n.range.prefixed=function(t){return n.range.apply(null,[].slice.call(arguments,1)).map(function(e){return t+e})},n.uid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}).toUpperCase()},n.square=function(t){return t*t},n.sum=function(t){return(Array.isArray(t)?t:[].slice.call(arguments)).reduce(function(t,e){return t+e},0)},n.fma=function(t,e,i){var n,r,o=134217729*t,s=134217729*e,a=t*e,u=a+i;return u+(a-(u-i)+(i-(u-a))+((o+=t-o)*(s+=e-s)-a+o*(r=e-s)+(n=t-o)*s+n*r))},n._BV=n.bitValue=n.bv=function(t){return 1<<t},n.int16=function(t,e){var i=t<<8|e;return i>>15?-1*(1+(65535^i)):i},n.uint16=function(t,e){return t<<8|e},n.int24=function(t,e,i){var n=t<<16|e<<8|i;return n>>23?-1*(1+(16777215^n)):n},n.uint24=function(t,e,i){return t<<16|e<<8|i},n.int32=function(t,e,i,n){var r=t<<24|e<<16|i<<8|n;return r>>31?-1*(1+(4294967295^r)):r},n.uint32=function(t,e,i,n){return(t<<24|e<<16|i<<8|n)>>>0},n.bitSize=function(t){return Math.round(Math.log2(t))};for(var o=n.bitSize(Number.MAX_SAFE_INTEGER)+1,s=0;s<o;s++)n["POW_2_"+s]=Math.pow(2,s);[4,8,10,12,16,20,24,32].forEach(function(t){var e=n["POW_2_"+t],i=e/2>>>0,r=i-1;n["u"+t]=function(t){return t<0&&(t+=e),n.constrain(t,0,e-1)},n["s"+t]=function(t){return t>r&&(t-=e),n.constrain(t,-i,r)}}),n.RAD_TO_DEG=180/Math.PI,n.DEG_TO_RAD=Math.PI/180,n.TAU=2*Math.PI,t.exports=n},function(t,e,i){(function(e){var n=!!e.env.IS_TEST_MODE,r=i(1).EventEmitter,o=i(2),s=new Map;function a(t){var e=this.type,i=[];if(this.length=0,Array.isArray(t))i=t;else if(Array.isArray(t.pins)){var n=Object.keys(t).filter(function(t){return"pins"!==t});i=t.pins.map(function(e){var i={};return Array.isArray(e)?i.pins=e:i.pin=e,n.reduce(function(e,i){return e[i]=t[i],e},i)})}if(i.length)for(;i.length;){var r=i.shift();"function"==typeof e&&(r instanceof e||r instanceof this.constructor||(r=new e(r))),this.add(r)}}"undefined"!=typeof Symbol&&Symbol.iterator&&(a.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator]),a.prototype.add=function(){for(var t=this.length,e=arguments.length,i=0;i<e;i++)this.type?(arguments[i]instanceof this.type||arguments[i]instanceof this.constructor)&&(this[t++]=arguments[i]):this[t++]=arguments[i];return this.length=t},a.prototype.each=function(t){for(var e=this.length,i=0;i<e;i++)t.call(this[i],this[i],i);return this},a.prototype.forEach=function(){[].forEach.apply(this,arguments)},a.prototype.includes=function(){return[].includes.apply(this,arguments)},a.prototype.indexOf=function(){return[].indexOf.apply(this,arguments)},a.prototype.map=function(){return[].map.apply(this,arguments)},a.prototype.slice=function(){return new this.constructor([].slice.apply(this,arguments))},a.prototype.byId=function(t){return[].find.call(this,function(e){return void 0!==e.id&&e.id===t})},a.installMethodForwarding=function(t,e){return Object.keys(e).reduce(function(t,e){return t[e]=function(){for(var t=this.length,i=0;i<t;i++)this[i][e].apply(this[i],arguments);return this},t},t)},a.Emitter=function(t){s.set(this,{timing:{last:Date.now()}}),a.call(this,t);var e=null,i=5;Array.isArray(t)||"object"!=typeof t||null===t||(i=t.freq||t.period||i,t.frequency&&(i=1/t.frequency*1e3)),Object.defineProperties(this,{period:{get:function(){return i},set:function(t){i!==t&&(i=t),e&&clearInterval(e),e=setInterval(function(){this.emit("data",this)}.bind(this),i)}}}),this.period=i,this.on("newListener",function(t){"change"!==t&&"data"!==t&&this.forEach(function(e){e.on(t,function(i){this.emit(t,e,i)}.bind(this))},this)})},o.inherits(a.Emitter,a),Object.assign(a.Emitter.prototype,r.prototype),"undefined"!=typeof Symbol&&Symbol.iterator&&(a.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator]),a.Emitter.prototype.add=function(){var t=Array.from(arguments);return t.length&&(a.prototype.add.apply(this,t),t.forEach(function(t){t&&t.on("change",function(){this.emit("change",t)}.bind(this))},this)),this.length},n&&(a.purge=function(){s.clear()}),t.exports=a}).call(this,i(0))},function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var n=i(69),r=i(70),o=i(34);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,i){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,i);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return h(this,t,e,i)}function h(t,e,i,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,i,n){if(e.byteLength,i<0||e.byteLength<i)throw new RangeError("'offset' is out of bounds");if(e.byteLength<i+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===i&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,i):new Uint8Array(e,i,n);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=f(t,e);return t}(t,e,i,n):"string"==typeof e?function(t,e,i){"string"==typeof i&&""!==i||(i="utf8");if(!u.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var n=0|d(e,i),r=(t=a(t,n)).write(e,i);r!==n&&(t=t.slice(0,r));return t}(t,e,i):function(t,e){if(u.isBuffer(e)){var i=0|p(e.length);return 0===(t=a(t,i)).length?t:(e.copy(t,0,0,i),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?a(t,0):f(t,e);if("Buffer"===e.type&&o(e.data))return f(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function c(t,e){if(l(e),t=a(t,e<0?0:0|p(e)),!u.TYPED_ARRAY_SUPPORT)for(var i=0;i<e;++i)t[i]=0;return t}function f(t,e){var i=e.length<0?0:0|p(e.length);t=a(t,i);for(var n=0;n<i;n+=1)t[n]=255&e[n];return t}function p(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function d(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var i=t.length;if(0===i)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return k(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return H(t).length;default:if(n)return k(t).length;e=(""+e).toLowerCase(),n=!0}}function v(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function g(t,e,i,n,r){if(0===t.length)return-1;if("string"==typeof i?(n=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=r?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(r)return-1;i=t.length-1}else if(i<0){if(!r)return-1;i=0}if("string"==typeof e&&(e=u.from(e,n)),u.isBuffer(e))return 0===e.length?-1:E(t,e,i,n,r);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):E(t,[e],i,n,r);throw new TypeError("val must be string, number or Buffer")}function E(t,e,i,n,r){var o,s=1,a=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,i/=2}function h(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(r){var l=-1;for(o=i;o<a;o++)if(h(t,o)===h(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(i+u>a&&(i=a-u),o=i;o>=0;o--){for(var c=!0,f=0;f<u;f++)if(h(t,o+f)!==h(e,f)){c=!1;break}if(c)return o}return-1}function m(t,e,i,n){i=Number(i)||0;var r=t.length-i;n?(n=Number(n))>r&&(n=r):n=r;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[i+s]=a}return s}function y(t,e,i,n){return F(k(e,t.length-i),t,i,n)}function b(t,e,i,n){return F(function(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,n)}function R(t,e,i,n){return b(t,e,i,n)}function S(t,e,i,n){return F(H(e),t,i,n)}function T(t,e,i,n){return F(function(t,e){for(var i,n,r,o=[],s=0;s<t.length&&!((e-=2)<0);++s)i=t.charCodeAt(s),n=i>>8,r=i%256,o.push(r),o.push(n);return o}(e,t.length-i),t,i,n)}function O(t,e,i){return 0===e&&i===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,i))}function A(t,e,i){i=Math.min(t.length,i);for(var n=[],r=e;r<i;){var o,s,a,u,h=t[r],l=null,c=h>239?4:h>223?3:h>191?2:1;if(r+c<=i)switch(c){case 1:h<128&&(l=h);break;case 2:128==(192&(o=t[r+1]))&&(u=(31&h)<<6|63&o)>127&&(l=u);break;case 3:o=t[r+1],s=t[r+2],128==(192&o)&&128==(192&s)&&(u=(15&h)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=t[r+1],s=t[r+2],a=t[r+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&h)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,c=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),r+=c}return function(t){var e=t.length;if(e<=_)return String.fromCharCode.apply(String,t);var i="",n=0;for(;n<e;)i+=String.fromCharCode.apply(String,t.slice(n,n+=_));return i}(n)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,i){return h(null,t,e,i)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,i){return function(t,e,i,n){return l(e),e<=0?a(t,e):void 0!==i?"string"==typeof n?a(t,e).fill(i,n):a(t,e).fill(i):a(t,e)}(null,t,e,i)},u.allocUnsafe=function(t){return c(null,t)},u.allocUnsafeSlow=function(t){return c(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var i=t.length,n=e.length,r=0,o=Math.min(i,n);r<o;++r)if(t[r]!==e[r]){i=t[r],n=e[r];break}return i<n?-1:n<i?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;var n=u.allocUnsafe(e),r=0;for(i=0;i<t.length;++i){var s=t[i];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,r),r+=s.length}return n},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?A(this,0,t):function(t,e,i){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return M(this,e,i);case"utf8":case"utf-8":return A(this,e,i);case"ascii":return I(this,e,i);case"latin1":case"binary":return w(this,e,i);case"base64":return O(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,i);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",i=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,i,n,r){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===n&&(n=0),void 0===r&&(r=this.length),e<0||i>t.length||n<0||r>this.length)throw new RangeError("out of range index");if(n>=r&&e>=i)return 0;if(n>=r)return-1;if(e>=i)return 1;if(this===t)return 0;for(var o=(r>>>=0)-(n>>>=0),s=(i>>>=0)-(e>>>=0),a=Math.min(o,s),h=this.slice(n,r),l=t.slice(e,i),c=0;c<a;++c)if(h[c]!==l[c]){o=h[c],s=l[c];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},u.prototype.indexOf=function(t,e,i){return g(this,t,e,i,!0)},u.prototype.lastIndexOf=function(t,e,i){return g(this,t,e,i,!1)},u.prototype.write=function(t,e,i,n){if(void 0===e)n="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)n=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(i)?(i|=0,void 0===n&&(n="utf8")):(n=i,i=void 0)}var r=this.length-e;if((void 0===i||i>r)&&(i=r),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return m(this,t,e,i);case"utf8":case"utf-8":return y(this,t,e,i);case"ascii":return b(this,t,e,i);case"latin1":case"binary":return R(this,t,e,i);case"base64":return S(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,e,i);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var _=4096;function I(t,e,i){var n="";i=Math.min(t.length,i);for(var r=e;r<i;++r)n+=String.fromCharCode(127&t[r]);return n}function w(t,e,i){var n="";i=Math.min(t.length,i);for(var r=e;r<i;++r)n+=String.fromCharCode(t[r]);return n}function M(t,e,i){var n=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>n)&&(i=n);for(var r="",o=e;o<i;++o)r+=U(t[o]);return r}function C(t,e,i){for(var n=t.slice(e,i),r="",o=0;o<n.length;o+=2)r+=String.fromCharCode(n[o]+256*n[o+1]);return r}function D(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function P(t,e,i,n,r,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<o)throw new RangeError('"value" argument is out of bounds');if(i+n>t.length)throw new RangeError("Index out of range")}function L(t,e,i,n){e<0&&(e=65535+e+1);for(var r=0,o=Math.min(t.length-i,2);r<o;++r)t[i+r]=(e&255<<8*(n?r:1-r))>>>8*(n?r:1-r)}function x(t,e,i,n){e<0&&(e=4294967295+e+1);for(var r=0,o=Math.min(t.length-i,4);r<o;++r)t[i+r]=e>>>8*(n?r:3-r)&255}function N(t,e,i,n,r,o){if(i+n>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function G(t,e,i,n,o){return o||N(t,0,i,4),r.write(t,e,i,n,23,4),i+4}function W(t,e,i,n,o){return o||N(t,0,i,8),r.write(t,e,i,n,52,8),i+8}u.prototype.slice=function(t,e){var i,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(i=this.subarray(t,e)).__proto__=u.prototype;else{var r=e-t;i=new u(r,void 0);for(var o=0;o<r;++o)i[o]=this[o+t]}return i},u.prototype.readUIntLE=function(t,e,i){t|=0,e|=0,i||D(t,e,this.length);for(var n=this[t],r=1,o=0;++o<e&&(r*=256);)n+=this[t+o]*r;return n},u.prototype.readUIntBE=function(t,e,i){t|=0,e|=0,i||D(t,e,this.length);for(var n=this[t+--e],r=1;e>0&&(r*=256);)n+=this[t+--e]*r;return n},u.prototype.readUInt8=function(t,e){return e||D(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||D(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||D(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||D(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||D(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,i){t|=0,e|=0,i||D(t,e,this.length);for(var n=this[t],r=1,o=0;++o<e&&(r*=256);)n+=this[t+o]*r;return n>=(r*=128)&&(n-=Math.pow(2,8*e)),n},u.prototype.readIntBE=function(t,e,i){t|=0,e|=0,i||D(t,e,this.length);for(var n=e,r=1,o=this[t+--n];n>0&&(r*=256);)o+=this[t+--n]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||D(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||D(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},u.prototype.readInt16BE=function(t,e){e||D(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},u.prototype.readInt32LE=function(t,e){return e||D(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||D(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||D(t,4,this.length),r.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||D(t,4,this.length),r.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||D(t,8,this.length),r.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||D(t,8,this.length),r.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,i,n){(t=+t,e|=0,i|=0,n)||P(this,t,e,i,Math.pow(2,8*i)-1,0);var r=1,o=0;for(this[e]=255&t;++o<i&&(r*=256);)this[e+o]=t/r&255;return e+i},u.prototype.writeUIntBE=function(t,e,i,n){(t=+t,e|=0,i|=0,n)||P(this,t,e,i,Math.pow(2,8*i)-1,0);var r=i-1,o=1;for(this[e+r]=255&t;--r>=0&&(o*=256);)this[e+r]=t/o&255;return e+i},u.prototype.writeUInt8=function(t,e,i){return t=+t,e|=0,i||P(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,i){return t=+t,e|=0,i||P(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,i){return t=+t,e|=0,i||P(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,i){return t=+t,e|=0,i||P(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):x(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,i){return t=+t,e|=0,i||P(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):x(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,i,n){if(t=+t,e|=0,!n){var r=Math.pow(2,8*i-1);P(this,t,e,i,r-1,-r)}var o=0,s=1,a=0;for(this[e]=255&t;++o<i&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+i},u.prototype.writeIntBE=function(t,e,i,n){if(t=+t,e|=0,!n){var r=Math.pow(2,8*i-1);P(this,t,e,i,r-1,-r)}var o=i-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+i},u.prototype.writeInt8=function(t,e,i){return t=+t,e|=0,i||P(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,i){return t=+t,e|=0,i||P(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,i){return t=+t,e|=0,i||P(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,i){return t=+t,e|=0,i||P(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):x(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,i){return t=+t,e|=0,i||P(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):x(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,i){return G(this,t,e,!0,i)},u.prototype.writeFloatBE=function(t,e,i){return G(this,t,e,!1,i)},u.prototype.writeDoubleLE=function(t,e,i){return W(this,t,e,!0,i)},u.prototype.writeDoubleBE=function(t,e,i){return W(this,t,e,!1,i)},u.prototype.copy=function(t,e,i,n){if(i||(i=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<i&&(n=i),n===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-i&&(n=t.length-e+i);var r,o=n-i;if(this===t&&i<e&&e<n)for(r=o-1;r>=0;--r)t[r+e]=this[r+i];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)t[r+e]=this[r+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+o),e);return o},u.prototype.fill=function(t,e,i,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,i=this.length):"string"==typeof i&&(n=i,i=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;var o;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(o=e;o<i;++o)this[o]=t;else{var s=u.isBuffer(t)?t:k(new u(t,n).toString()),a=s.length;for(o=0;o<i-e;++o)this[o+e]=s[o%a]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function U(t){return t<16?"0"+t.toString(16):t.toString(16)}function k(t,e){var i;e=e||1/0;for(var n=t.length,r=null,o=[],s=0;s<n;++s){if((i=t.charCodeAt(s))>55295&&i<57344){if(!r){if(i>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}r=i;continue}if(i<56320){(e-=3)>-1&&o.push(239,191,189),r=i;continue}i=65536+(r-55296<<10|i-56320)}else r&&(e-=3)>-1&&o.push(239,191,189);if(r=null,i<128){if((e-=1)<0)break;o.push(i)}else if(i<2048){if((e-=2)<0)break;o.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;o.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return o}function H(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(B,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function F(t,e,i,n){for(var r=0;r<n&&!(r+i>=e.length||r>=t.length);++r)e[r+i]=t[r];return r}}).call(this,i(7))},function(t,e,i){(function(e){var n=i(4),r=i(1).EventEmitter,o=i(2),s=i(74).nano,a=i(5),u=new Map,h=new Map;function l(){r.call(this),this.HIGH=1,this.LOW=0,this.isReady=!1,this.MODES={},this.pins=[],this.analogPins=[]}o.inherits(l,r);var c={MCP23017:{ADDRESSES:{value:[32]},REGISTER:{value:{IODIRA:0,GPPUA:12,GPIOA:18,OLATA:20,IODIRB:1,GPPUB:13,GPIOB:19,OLATB:21}},initialize:{value:function(t){var e=u.get(this);e.iodir=[255,255],e.olat=[255,255],e.gpio=[255,255],e.gppu=[0,0],this.address=t.address||this.ADDRESSES[0],t.address=this.address,this.io.i2cConfig(t),this.io.i2cWrite(this.address,[this.REGISTER.IODIRA,e.iodir[this.REGISTER.IODIRA]]),this.io.i2cWrite(this.address,[this.REGISTER.IODIRB,e.iodir[this.REGISTER.IODIRB]]),Object.assign(this.MODES,this.io.MODES);for(var i=0;i<16;i++)this.pins.push({supportedModes:[this.MODES.INPUT,this.MODES.OUTPUT],mode:0,value:0,report:0,analogChannel:127}),this.pinMode(i,this.MODES.OUTPUT),this.digitalWrite(i,this.LOW);this.name="MCP23017",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value:function(t){return t}},pinMode:{value:function(t,e){var i=u.get(this),n=t,r=0,o=null;t<8?r=this.REGISTER.IODIRA:(r=this.REGISTER.IODIRB,t-=8),o=i.iodir[r],e===this.io.MODES.INPUT?o|=1<<t:o&=~(1<<t),this.pins[n].mode=e,this.io.i2cWrite(this.address,[r,o]),i.iodir[r]=o}},digitalWrite:{value:function(t,e){var i=u.get(this),n=t,r=0,o=0,s=0;t<8?(r=this.REGISTER.IODIRA,s=this.REGISTER.GPIOA):(r=this.REGISTER.IODIRB,s=this.REGISTER.GPIOB,t-=8),o=i.olat[r],e===this.io.HIGH?o|=1<<t:o&=~(1<<t),this.pins[n].report=0,this.pins[n].value=e,this.io.i2cWrite(this.address,[s,o]),i.olat[r]=o,i.gpio[r]=o}},pullUp:{value:function(t,e){var i=u.get(this),n=0,r=0,o=0;t<8?(n=this.REGISTER.IODIRA,o=this.REGISTER.GPPUA):(n=this.REGISTER.IODIRB,o=this.REGISTER.GPPUB,t-=8),r=i.gppu[n],e===this.io.HIGH?r|=1<<t:r&=~(1<<t),this.io.i2cWrite(this.address,[o,r]),i.gppu[n]=r}},digitalRead:{value:function(t,e){var i=t,n=0;t<8?n=this.REGISTER.GPIOA:(n=this.REGISTER.GPIOB,t-=8),this.pins[i].report=1,this.on("digital-read-"+i,e),this.io.i2cRead(this.address,n,1,function(e){var n=e[0]>>t&1;this.pins[i].value=n,this.emit("digital-read-"+i,n)}.bind(this))}}},MCP23008:{ADDRESSES:{value:[32]},REGISTER:{value:{IODIR:0,GPPU:6,GPIO:9,OLAT:10}},initialize:{value:function(t){var e=u.get(this);e.iodir=[255],e.olat=[255],e.gpio=[255],e.gppu=[0],this.address=t.address||this.ADDRESSES[0],t.address=this.address,this.io.i2cConfig(t),this.io.i2cWrite(this.address,[this.REGISTER.IODIR,e.iodir[this.REGISTER.IODIR]]),Object.assign(this.MODES,this.io.MODES);for(var i=0;i<8;i++)this.pins.push({supportedModes:[this.MODES.INPUT,this.MODES.OUTPUT],mode:0,value:0,report:0,analogChannel:127}),this.pinMode(i,this.MODES.OUTPUT),this.digitalWrite(i,this.LOW);this.name="MCP23008",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value:function(t){return t}},pinMode:{value:function(t,e){var i=u.get(this),n=t,r=this.REGISTER.IODIR,o=i.iodir[r];e===this.io.MODES.INPUT?o|=1<<t:o&=~(1<<t),this.pins[n].mode=e,this.io.i2cWrite(this.address,[r,o]),i.iodir[r]=o}},digitalWrite:{value:function(t,e){var i=u.get(this),n=t,r=this.REGISTER.IODIR,o=this.REGISTER.GPIO,s=i.olat[r];e===this.io.HIGH?s|=1<<t:s&=~(1<<t),this.pins[n].report=0,this.pins[n].value=e,this.io.i2cWrite(this.address,[o,s]),i.olat[r]=s,i.gpio[r]=s}},pullUp:{value:function(t,e){var i=u.get(this),n=this.REGISTER.IODIR,r=this.REGISTER.GPPU,o=i.gppu[n];e===this.io.HIGH?o|=1<<t:o&=~(1<<t),this.io.i2cWrite(this.address,[r,o]),i.gppu[n]=o}},digitalRead:{value:function(t,e){var i=t,n=this.REGISTER.GPIO;this.pins[i].report=1,this.on("digital-read-"+t,e),this.io.i2cRead(this.address,n,1,function(e){var n=e[0]>>t&1;this.pins[i].value=n,this.emit("digital-read-"+t,n)}.bind(this))}}},PCF8574:{ADDRESSES:{value:[32]},REGISTER:{},initialize:{value:function(t){var e=u.get(this);e.port=0,e.ddr=0,e.pins=0,this.address=t.address||this.ADDRESSES[0],t.address=this.address,this.io.i2cConfig(t),Object.assign(this.MODES,this.io.MODES);for(var i=0;i<8;i++)this.pins.push({supportedModes:[this.MODES.INPUT,this.MODES.OUTPUT],mode:1,value:0,report:0,analogChannel:127}),this.pinMode(i,this.MODES.OUTPUT),this.digitalWrite(i,this.LOW);this.name="PCF8574",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value:function(t){return t}},pinMode:{value:function(t,e){var i=u.get(this),n=t,r=i.port,o=i.ddr,s=i.pins;e===this.MODES.INPUT?(o&=~(1<<t),r&=~(1<<t)):(o|=1<<t,r&=~(1<<t)),this.pins[n].mode=e,i.port=r,i.ddr=o,this.io.i2cWrite(this.address,s&~o|r)}},digitalWrite:{value:function(t,e){var i=u.get(this),n=t,r=i.port,o=i.ddr,s=i.pins;e?r|=1<<t:r&=~(1<<t),this.pins[n].report=0,this.pins[n].value=e,i.port=r,this.io.i2cWrite(this.address,s&~o|r)}},digitalRead:{value:function(t,e){var i=u.get(this),n=t;this.pins[n].report=1,this.on("digital-read-"+t,e),this.io.i2cRead(this.address,1,function(e){var r=e[0],o=r>>t&1;i.pins=r,this.pins[n].value=o,this.emit("digital-read-"+t,o)}.bind(this))}}},PCF8575:{ADDRESSES:{value:[32]},REGISTER:{},initialize:{value:function(t){var e=u.get(this);e.port=[0,1],e.gpio=[0,0],this.address=t.address||this.ADDRESSES[0],t.address=this.address,this.io.i2cConfig(t),Object.assign(this.MODES,this.io.MODES);for(var i=0;i<16;i++)this.pins.push({supportedModes:[this.MODES.INPUT,this.MODES.OUTPUT],mode:1,value:0,report:0,analogChannel:127}),this.pinMode(i,this.MODES.OUTPUT),this.digitalWrite(i,this.LOW);this.io.i2cWrite(this.address,e.gpio),this.name="PCF8575",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value:function(t){return t}},pinMode:{value:function(t,e){var i=t;this.pins[i].mode=e}},digitalWrite:{value:function(t,e){var i,n=u.get(this),r=t;t<8?i=0:(i=1,t-=8),e===this.io.HIGH?n.gpio[i]|=1<<t:n.gpio[i]&=~(1<<t),this.pins[r].report=0,this.pins[r].value=e,this.io.i2cWrite(this.address,n.gpio)}},digitalRead:{value:function(t,e){var i,n=t;t<8?i=0:(i=1,t-=8),this.pins[n].report=1,this.on("digital-read-"+t,e),this.io.i2cRead(this.address,2,function(e){var r=e[i]>>t&1;this.pins[n].value=r,this.emit("digital-read-"+t,r)}.bind(this))}}},PCA9685:{ADDRESSES:{value:[64]},REGISTER:{value:{MODE1:0,PRESCALE:254,BASE:6}},initialize:{value:function(t){var e=u.get(this);e.frequency=.9*n.constrain(t.frequency||1526,24,1526),this.address=t.address||this.ADDRESSES[0],this.pwmRange=t.pwmRange||[0,4095],Object.defineProperties(this,{prescale:{get:function(){return Math.round(25e6/(4096*e.frequency))-1}},frequency:{get:function(){return e.frequency}}}),t.address=this.address,this.io.i2cConfig(t),this.io.i2cWriteReg(this.address,this.REGISTER.MODE1,0),this.io.i2cWriteReg(this.address,this.REGISTER.MODE1,16),this.io.i2cWriteReg(this.address,this.REGISTER.PRESCALE,this.prescale),this.io.i2cWriteReg(this.address,this.REGISTER.MODE1,0),s(5),this.io.i2cWriteReg(this.address,this.REGISTER.MODE1,161),Object.assign(this.MODES,this.io.MODES);for(var i=0;i<16;i++)this.pins.push({supportedModes:[this.MODES.OUTPUT,this.MODES.PWM,this.MODES.SERVO],mode:0,value:0,report:0,analogChannel:127}),this.pinMode(i,this.MODES.OUTPUT),this.digitalWrite(i,this.LOW);this.name="PCA9685",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value:function(t){return"Tessel 2"===this.io.name?t-1:t}},pinMode:{value:function(t,e){if(void 0===this.pins[t])throw new RangeError("Invalid PCA9685 pin: "+t);this.pins[t].mode=e}},digitalWrite:{value:function(t,e){this.pwmWrite(t,e?255:0)}},analogWrite:{value:function(t,e){this.pwmWrite(t,e)}},servoWrite:{value:function(t,e){var i;e<544?(e=n.constrain(e,0,180),i=a.map(e,0,180,this.pwmRange[0]/4,this.pwmRange[1]/4)):i=e/4,i|=0,this.io.i2cWrite(this.address,[this.REGISTER.BASE+4*t,0,0,i,i>>8])}},pwmWrite:{value:function(t,e){if(void 0===this.pins[t])throw new RangeError("Invalid PCA9685 pin: "+t);e=n.constrain(e,0,255);var i=0,r=this.pwmRange[1]*e/255;0===e&&(i=0,r=4096),255===e&&(i=4096,r=0),this.io.i2cWrite(this.address,[this.REGISTER.BASE+4*t,i,i>>8,r,r>>8]),this.pins[t].value=e}}},PCF8591:{ADDRESSES:{value:[72]},REGISTER:{},initialize:{value:function(t){var e=u.get(this);e.control=69,e.reading=!1,this.address=t.address||this.ADDRESSES[0],t.address=this.address,this.io.i2cConfig(t),Object.assign(this.MODES,this.io.MODES);for(var i=0;i<4;i++)this.pins.push({supportedModes:[this.MODES.ANALOG],mode:1,value:0,report:0,analogChannel:i});this.analogPins.push(0,1,2,3),this.io.i2cWrite(this.address,e.control),this.name="PCF8591",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value:function(t){return"string"==typeof t&&"A"===t[0]?+t.slice(1):t}},pinMode:{value:function(t,e){this.pins[t].mode=e}},analogRead:{value:function(t,e){var i=u.get(this),n=t;this.pins[n].report=1,this.on("analog-read-"+t,e),i.reading||(i.reading=!0,this.io.i2cRead(this.address,4,function(t){for(var e,i=0;i<4;i++)e=t[i]<<2,this.pins[i].value=e,this.pins[i].report&&this.emit("analog-read-"+i,e)}.bind(this)))}}},MUXSHIELD2:{initialize:{value:function(){var t=u.get(this);t.select=[2,4,6,7],t.ios=[null,10,11,12],t.io=[null,14,15,16],t.aio=[null,0,1,2],t.outMode=8,t.pinMap={},t.rowReading=[!1,!1,!1],t.rowMode=[null,null,null],t.rowValues=[0,0,0],Object.assign(this.MODES,{INPUT:0,OUTPUT:1,ANALOG:2}),this.io.pinMode(t.select[0],this.MODES.OUTPUT),this.io.pinMode(t.select[1],this.MODES.OUTPUT),this.io.pinMode(t.select[2],this.MODES.OUTPUT),this.io.pinMode(t.select[3],this.MODES.OUTPUT),this.io.pinMode(t.outMode,this.MODES.OUTPUT),this.io.digitalWrite(t.outMode,this.LOW),this.io.pinMode(t.ios[1],this.MODES.OUTPUT),this.io.pinMode(t.ios[2],this.MODES.OUTPUT),this.io.pinMode(t.ios[3],this.MODES.OUTPUT);for(var e=1,i=16,n=0,r=0;r<48;r++){(r&i)===i&&(e++,i*=2,n=0),t.pinMap["IO"+e+"-"+n]=r,this.pins.push({row:e,index:n,supportedModes:[this.MODES.INPUT,this.MODES.OUTPUT,this.MODES.ANALOG],mode:1,value:0,report:0,analogChannel:r}),this.analogPins.push(r),n++}this.name="MUXSHIELD2",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value:function(t){return t}},pinMode:{value:function(t,e){var i=u.get(this),n=i.pinMap[t];if(void 0===n)throw new Error("MUXSHIELD2: Invalid Pin number or name: "+t);var r=this.pins[n].row,o=r-1,s=i.rowMode[o];if(s===e)return this;if(null!==s&&s!==e)throw new Error("MUXSHIELD2: Cannot set mixed modes per IO row.");i.rowMode[o]=e;for(var a=0;a<16;a++)this.pins[o+a].mode=e;var h=i.io[r],l=i.ios[r];e===this.MODES.INPUT&&this.io.pinMode(h,this.MODES.INPUT),e===this.MODES.OUTPUT&&(this.io.pinMode(h,this.MODES.OUTPUT),this.io.digitalWrite(l,this.HIGH))}},digitalWrite:{value:function(t,e){var i=u.get(this),n=i.pinMap[t];if(void 0===n)throw new Error("MUXSHIELD2: Invalid Pin number or name: "+t);var r=this.pins[n].row,o=r-1,s=i.rowValues[o],a=n-16*(r-1);e?s|=1<<a:s&=~(1<<a),this.io.digitalWrite(i.select[3],this.LOW),this.io.digitalWrite(i.outMode,this.HIGH);for(var h=i.select[r-1],l=i.io[r],c=15;c>=0;c--)this.io.digitalWrite(h,this.LOW),this.io.digitalWrite(l,s>>c&1),this.io.digitalWrite(h,this.HIGH);this.io.digitalWrite(i.select[3],this.HIGH),this.io.digitalWrite(i.outMode,this.LOW),this.pins[n].value=e,i.rowValues[o]=s}},digitalRead:{value:function(t,e){this.ioRead("digital",t,e)}},analogRead:{value:function(t,e){this.ioRead("analog",t,e)}},ioRead:{value:function(t,e,i){var n=u.get(this),r=n.pinMap[e];if(void 0===r)throw new Error("MUXSHIELD2: Invalid Pin number or name: "+e);this.on(t+"-read-"+r,i);var o="analog"===t,s=this.pins[r].row-1,a=r-16*s;this.pins[r].report=1,this.pins[r].channel=a,this.pins[r].ioPin=o?s:s+14;var h=function(){for(var t=h.lastPinIndex+1;t<this.pins.length;t++)if(1===this.pins[t].report)return h.lastPinIndex=t,h.lastPinIndex;return h.lastPinIndex=-1,h()}.bind(this);h.lastPinIndex=-1;var l=function(e){var i=h.lastPinIndex,n=this.pins[i];this.emit(t+"-read-"+i,e),this.io.removeListener(t+"-read-"+n.ioPin,l),setTimeout(c,10)}.bind(this),c=function(){var t=h(),e=this.pins[t];this.select(e.channel),o?(this.io.pinMode(e.ioPin,this.io.MODES.ANALOG),this.io.analogRead(e.ioPin,l)):this.io.digitalRead(e.ioPin,l)}.bind(this);n.rowReading[s]||(n.rowReading[s]=!0,c())}},select:{value:function(t){var e=u.get(this);this.io.digitalWrite(e.outMode,this.LOW),this.io.digitalWrite(e.select[0],1&t),this.io.digitalWrite(e.select[1],(3&t)>>1),this.io.digitalWrite(e.select[2],(7&t)>>2),this.io.digitalWrite(e.select[3],(15&t)>>3)}}},GROVEPI:{ADDRESSES:{value:[4]},REGISTER:{},COMMANDS:{value:{DIGITAL_READ:1,DIGITAL_WRITE:2,ANALOG_READ:3,ANALOG_WRITE:4,PIN_MODE:5,PING_READ:7}},initialize:{value:function(t){var e=u.get(this);e.isReading=!1,e.pinMap={D2:2,D3:3,D4:4,D5:5,D6:6,D7:7,D8:8,A0:14,A1:15,A2:16},this.isPwm=function(t){var e="number"==typeof t?t:parseInt(t[1]);return 3===e||5===e||6===e},this.address=t.address||this.ADDRESSES[0],t.address=this.address,this.io.i2cConfig(t),Object.assign(this.MODES,this.io.MODES);for(var i=0;i<17;i++)127,i<=1||i>=9&&i<14?this.pins.push({supportedModes:[],mode:0,value:0,report:0,analogChannel:127}):(this.pins.push({supportedModes:[this.MODES.INPUT,this.MODES.OUTPUT],mode:0,value:0,report:0,analogChannel:127}),this.isPwm(i)&&this.pins[i].supportedModes.push(this.MODES.PWM),i>=14&&i<=17?(this.pins[i].analogChannel=i-14,this.pins[i].supportedModes.push(this.MODES.ANALOG),this.analogPins.push(i),this.pinMode("A"+this.pins[i].analogChannel,this.MODES.ANALOG)):(this.pinMode("D"+i,this.MODES.OUTPUT),this.digitalWrite("D"+i,this.LOW)));this.name="GROVEPI",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value:function(t){return t}},pinMode:{value:function(t,e){var i=u.get(this).pinMap[t];e===this.io.MODES.INPUT||e===this.io.MODES.ANALOG?this.pins[i].mode=0:this.pins[i].mode=1,this.io.i2cWrite(this.address,[this.COMMANDS.PIN_MODE,i,this.pins[i].mode,0])}},digitalWrite:{value:function(t,e){var i=u.get(this).pinMap[t];e=e?1:0,this.io.i2cWrite(this.address,[this.COMMANDS.DIGITAL_WRITE,i,e,0]),this.pins[i].value=e}},ioRead:{value:function(t,e,i){var n=u.get(this),r=n.pinMap[t],o="analog"===e,s=o?3:1,a=o?this.COMMANDS.ANALOG_READ:this.COMMANDS.DIGITAL_READ;this.on(e+"-read-"+r,i),this.pins[r].report=1,this.pins[r].command=a,this.pins[r].type=e,this.pins[r].length=s;var h=function(){for(var t=h.lastPinIndex+1;t<this.pins.length;t++)if(1===this.pins[t].report)return h.lastPinIndex=t,h.lastPinIndex;return h.lastPinIndex=-1,h()}.bind(this);h.lastPinIndex=-1;var l=function(t,e){var i=this.pins[t],n=!0;"digital"===i.type&&this.pins[t].value===e&&(n=!1),this.pins[t].value=e,n&&this.emit(i.type+"-read-"+t,e),setTimeout(c,1)}.bind(this),c=function(){var t=h(),e=this.pins[t],i="analog"===e.type;this.io.i2cWrite(this.address,[e.command,t,0,0]),this.io.i2cReadOnce(this.address,e.length,function(e){var n;n=i?(e[1]<<8)+e[2]:e[0],l(t,n)}.bind(this))}.bind(this);n.isReading||(n.isReading=!0,c())}},digitalRead:{value:function(t,e){this.ioRead(t,"digital",e)}},analogRead:{value:function(t,e){this.ioRead(t,"analog",e)}},pingRead:{value:function(t,e){var i=u.get(this).pinMap[t.pin];this.io.i2cWrite(this.address,[this.COMMANDS.PING_READ,i,0,0]),setTimeout(function(){this.once("ping-read-"+t.pin,e),this.io.i2cReadOnce(this.address,3,function(e){var n=Math.round(29*((e[1]<<8)+e[2])*2);this.pins[i].value=n,this.emit("ping-read-"+t.pin,n)}.bind(this))}.bind(this),200)}},analogWrite:{value:function(t,e){this.pwmWrite(t,e)}},pwmWrite:{writable:!0,value:function(t,e){var i=u.get(this).pinMap[t];e=n.constrain(e,0,255),this.io.i2cWrite(this.address,[this.COMMANDS.ANALOG_WRITE,i,e,0]),this.pins[i].value=e}}},"74HC595":{initialize:{value:function(t){var e=u.get(this);if(!t.pins.data)throw new Error("Expected pins.data");if(!t.pins.clock)throw new Error("Expected pins.clock");if(!t.pins.latch)throw new Error("Expected pins.latch");e.data=t.pins.data,e.clock=t.pins.clock,e.latch=t.pins.latch,e.value=0,Object.assign(this.MODES,this.io.MODES),this.pins=[];for(var i=0;i<8;i++)this.pins.push({supportedModes:[this.MODES.OUTPUT],mode:1,value:0,report:0,analogChannel:127});this.portWrite(0,e.value),this.name="74HC595",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value:function(t){return t}},pinMode:{value:function(t,e){this.pins[t].mode=e}},digitalWrite:{value:function(t,e){var i=u.get(this);e?i.value|=1<<t:i.value&=~(1<<t),this.pins[t].value=e,this.portWrite(0,i.value)}},portWrite:{writable:!0,configurable:!0,value:function(t,e){var i=u.get(this);i.value=e,this.board.digitalWrite(i.latch,this.io.LOW),this.board.shiftOut(i.data,i.clock,!0,i.value),this.board.digitalWrite(i.latch,this.io.HIGH);for(var n=0;n<8;n++)this.pins[n].value=i.value>>n&1}}},CD74HC4067:{ADDRESSES:{value:[10,11,12,13]},REGISTER:{},initialize:{value:function(t){u.get(this).reading=!1,this.address=t.address||this.ADDRESSES[0],t.address=this.address,this.io.i2cConfig(t),Object.assign(this.MODES,this.io.MODES);for(var e=0;e<16;e++)this.pins.push({supportedModes:[this.MODES.ANALOG],mode:1,value:0,report:0,analogChannel:e}),this.analogPins.push(e);this.name="CD74HC4067",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value:function(t){return"string"==typeof t&&"A"===t[0]?+t.slice(1):t}},pinMode:{value:function(t,e){this.pins[t].mode=e}},analogRead:{value:function(t,e){var i=u.get(this),n=t;this.pins[n].report=1,this.on("analog-read-"+t,e),this.io.i2cWrite(this.address,n,1),i.reading||(i.reading=!0,this.io.i2cRead(this.address,32,function(t){for(var e,i=0;i<16;i++){var n=2*i;e=(t[n]<<8)+t[n+1],this.pins[i].value=e,this.pins[i].report&&this.emit("analog-read-"+i,e)}}.bind(this)))}}},LIS3DH:{ADDRESSES:{value:[24]},REGISTER:{value:{OUT_ADC1_L:8,OUT_X_L:40,CTRL_REG1:32,CTRL_REG2:33,CTRL_REG3:34,CTRL_REG4:35,CTRL_REG5:36,TEMP_CFG_REG:31}},initialize:{value:function(t){u.get(this).reading=!1,this.address=t.address||this.ADDRESSES[0],t.address=this.address,this.io.i2cConfig(t);var e=7;e=-241&e|112,this.io.i2cWrite(this.address,this.REGISTER.CTRL_REG1,e),this.io.i2cWrite(this.address,this.REGISTER.CTRL_REG4,136),this.io.i2cWrite(this.address,this.REGISTER.CTRL_REG3,16),Object.assign(this.MODES,this.io.MODES);for(var i=0;i<4;i++)0===i?this.pins.push({supportedModes:[],mode:0,value:0,report:0,analogChannel:127}):(this.pins.push({supportedModes:[this.MODES.ANALOG],mode:1,value:0,report:0,analogChannel:i}),this.analogPins.push(i));this.name="LIS3DH",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value:function(t){return"string"==typeof t&&"A"===t[0]?+t.slice(1):t}},pinMode:{value:function(t,e){this.pins[t].mode=e}},analogRead:{value:function(t,e){var i=u.get(this),n=t;this.pins[n].report=1,this.on("analog-read-"+t,e),i.reading||(i.reading=!0,this.io.i2cWrite(this.address,this.REGISTER.TEMP_CFG_REG,128),this.io.i2cRead(this.address,128|this.REGISTER.OUT_ADC1_L,6,function(t){this.pins[1].value=a.scale(a.int16(t[1],t[0]),-32512,32512,1023,0),this.pins[2].value=a.scale(a.int16(t[3],t[2]),-32512,32512,1023,0),this.pins[3].value=a.scale(a.int16(t[5],t[4]),-32512,32512,1023,0);for(var e=1;e<4;e++)this.pins[e].report&&this.emit("analog-read-"+e,this.pins[e].value)}.bind(this)))}},i2cConfig:{value:function(){return this.io.i2cConfig.apply(this.io,arguments)}},i2cWrite:{value:function(){return this.io.i2cWrite.apply(this.io,arguments)}},i2cWriteReg:{value:function(){return this.io.i2cWriteReg.apply(this.io,arguments)}},i2cRead:{value:function(){return this.io.i2cRead.apply(this.io,arguments)}},i2cReadOnce:{value:function(){return this.io.i2cReadOnce.apply(this.io,arguments)}}},ADS1115:{ADDRESSES:{value:[72,73,74,75]},REGISTER:{value:{CONFIG:1,READ:0,PIN:[193,209,225,241],PIN_DATA:131}},initialize:{value:function(t){u.get(this).reading=!1,this.address=t.address||this.ADDRESSES[0],t.address=this.address,this.io.i2cConfig(t),Object.assign(this.MODES,this.io.MODES);for(var e=0;e<4;e++)this.pins.push({supportedModes:[this.MODES.ANALOG],mode:1,value:0,report:0,analogChannel:e}),this.analogPins.push(e);this.name="ADS1115",this.isReady=!0,this.emit("connect"),this.emit("ready")}},normalize:{value:function(t){return"string"==typeof t&&"A"===t[0]?+t.slice(1):t}},pinMode:{value:function(t,e){this.pins[t].mode=e}},analogRead:{value:function(t,e){var i=u.get(this);this.pins[t].report=1;var n=!1;if(this.on("analog-read-"+t,e),!i.reading){i.reading=!0;var r=function(){setTimeout(function(){n=!0},8)};this.io.i2cWrite(this.address,this.REGISTER.CONFIG,[this.REGISTER.PIN[t],this.REGISTER.PIN_DATA]),r(),this.io.i2cRead(this.address,this.REGISTER.READ,2,function(e){if(n){n=!1;var i=t===this.pins.length-1?0:t+1;this.io.i2cWrite(this.address,this.REGISTER.CONFIG,[this.REGISTER.PIN[i],this.REGISTER.PIN_DATA]);var o=(e[0]<<8)+e[1];this.pins[t].value=o,this.pins[t].report&&this.emit("analog-read-"+t,o),t=i,r()}}.bind(this))}}}}};c.CD74HCT4067=c.CD74HC4067,c["74HC4067"]=c.CD74HC4067,c.PCF8574A=Object.assign({},c.PCF8574,{ADDRESSES:{value:[56]}});var f=Object.keys(n.prototype);Object.keys(c).forEach(function(t){f.forEach(function(e){void 0===c[t][e]&&(c[t][e]={writable:!0,configurable:!0,value:function(){throw new Error("Expander:"+t+" does not support "+e)}})})});var p=["74HC595"];function d(t){if(!(this instanceof d))return new d(t);l.call(this);var e,i,r="Expander cannot reuse an active address",o=null;if("string"==typeof t&&(i=t),n.Component.call(this,t=n.Options(t),{normalizePin:!1,requestPin:!1}),p.includes(t.controller)&&void 0===this.address&&(this.address=a.uid()),e=h.get(this.address))throw this.bus&&void 0!==e.bus&&e.bus===this.bus&&(r+=" on this bus"),new Error(r);if(void 0===t.controller&&i&&(t.controller=i),null==(o=t.controller&&"string"==typeof t.controller?c[t.controller.toUpperCase()]:t.controller))throw new Error("Expander expects a valid controller");n.Controller.call(this,o,t),u.set(this,{}),"function"==typeof this.initialize&&this.initialize(t),h.set(this.address,this)}o.inherits(d,l),d.get=function(t){if(!t.address||!t.controller)throw new Error("Expander.get(...) requires an address and controller");if(void 0!==t.address&&(t.address=Number(t.address)),Number.isNaN(t.address))throw new Error("Expander.get(...) expects address to be a number");if("string"!=typeof t.controller)throw new Error("Expander.get(...) expects controller name to be a string");var e=h.get(t.address);return e&&e.name===t.controller.toUpperCase()?e:new d(t)},d.byAddress=function(t){return h.get(t)},d.byController=function(t){var e=null;return h.forEach(function(i){i.name===t.toUpperCase()&&(e=i)}),e},d.hasController=function(t){return void 0!==c[t]},e.env.IS_TEST_MODE&&(d.Controllers=c,d.purge=function(){u.clear(),h.clear()}),t.exports=d}).call(this,i(0))},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},function(t,e,i){"use strict";var n=i(17),r=Object.keys||function(t){var e=[];for(var i in t)e.push(i);return e};t.exports=c;var o=i(15);o.inherits=i(10);var s=i(49),a=i(26);o.inherits(c,s);for(var u=r(a.prototype),h=0;h<u.length;h++){var l=u[h];c.prototype[l]||(c.prototype[l]=a.prototype[l])}function c(t){if(!(this instanceof c))return new c(t);s.call(this,t),a.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||n.nextTick(p,this)}function p(t){t.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),c.prototype._destroy=function(t,e){this.push(null),this.end(),n.nextTick(e,t)}},function(t,e,i){(function(e){var n,r=i(1).EventEmitter,o=i(2),s=i(75),a=i(5);function u(t){if(n||(n=i(76)),!(this instanceof u))return new u(t);u.Segment.call(this),this.defaultTarget=t||{}}u.keys="@@keys",u.normalize="@@normalize",u.render="@@render",u.TemporalFallback=function(t){this.interval=setInterval(function(){t.loopFunction({calledAt:Date.now()})},t.rate)},u.TemporalFallback.prototype.stop=function(){this.interval&&clearInterval(this.interval)},o.inherits(u,r),u.Segment=function(t){this.cuePoints=[0,1],this.duration=1e3,this.easing="linear",this.loop=!1,this.loopback=0,this.metronomic=!1,this.currentSpeed=1,this.progress=0,this.fps=60,this.rate=1e3/60,this.paused=!1,this.isRunning=!1,this.segments=[],this.onstart=null,this.onpause=null,this.onstop=null,this.oncomplete=null,this.onloop=null,t&&(Object.assign(this,t),t.segments&&(this.segments=t.segments.slice()))},u.prototype.enqueue=function(t){return void 0===(t=t||{}).target&&(t.target=this.defaultTarget),this.segments.push(t),this.paused||this.isRunning||this.next(),this},u.prototype.next=function(){if(this.isRunning)return this;if(this.isRunning=!0,this.segments.length>0){var t=new u.Segment(this.segments.shift());Object.assign(this,t),this.paused=0===this.currentSpeed,this.onstart&&this.onstart(),this.normalizeKeyframes(),this.reverse&&(this.currentSpeed*=-1),0!==this.currentSpeed?this.play():this.paused=!0}else this.playLoop.stop();return this},u.prototype.pause=function(){this.emit("animation:pause"),this.playLoop&&this.playLoop.stop(),this.paused=!0,this.onpause&&this.onpause()},u.prototype.stop=function(){this.emit("animation:stop"),this.segments=[],this.isRunning=!1,this.playLoop&&this.playLoop.stop(),this.onstop&&this.onstop()},u.prototype.speed=function(t){return void 0===t?this.currentSpeed:(this.currentSpeed=t,this.scaledDuration=this.duration/Math.abs(this.currentSpeed),this.startTime=Date.now()-this.scaledDuration*this.progress,this.endTime=this.startTime+this.scaledDuration,this.paused||this.play(),this)},u.prototype.loopFunction=function(t){var i=this.calculateProgress(t.calledAt),n=this.findIndices(i);this.target[u.render](this.tweenedValue(n,i)),t.calledAt>this.fallBackTime&&(this.fallBackTime=1/0,this.playLoop&&this.playLoop.stop(),this.playLoop=new u.TemporalFallback(this)),(1===this.progress&&!this.reverse||i===this.loopback&&this.reverse)&&(this.loop||this.metronomic&&!this.reverse?(this.onloop&&this.onloop(),this.metronomic&&(this.reverse=!this.reverse),this.normalizeKeyframes(),this.progress=this.loopback,this.startTime=Date.now()-this.scaledDuration*this.progress,this.endTime=this.startTime+this.scaledDuration):(this.isRunning=!1,this.oncomplete&&e.nextTick(this.oncomplete.bind(this)),this.segments.length>0?e.nextTick(()=>{this.next()}):this.stop()))},u.prototype.play=function(){var t=Date.now();this.playLoop&&this.playLoop.stop(),this.paused=!1,this.isRunning=!0,this.scaledDuration=this.duration/Math.abs(this.currentSpeed),this.startTime=t-this.scaledDuration*this.progress,this.endTime=this.startTime+this.scaledDuration,this.fallBackTime=t+5e3,this.frameCount=0,this.fps&&(this.rate=1e3/this.fps),this.rate=0|this.rate,this.playLoop=n.loop(this.rate,this.loopFunction.bind(this))},u.prototype.findIndices=function(t){var e={left:null,right:null};return e.right=this.cuePoints.findIndex(function(e){return e>=t}),e.left=0===e.right?0:e.right-1,e},u.prototype.calculateProgress=function(t){var e=(t-this.startTime)/this.scaledDuration;return e>1&&(e=1),this.progress=e,this.reverse&&(e=1-e),e=s[this.easing](e),e=a.constrain(e,0,1)},u.prototype.tweenedValue=function(t,e){var i={duration:null,progress:null};return this.normalizedKeyFrames.map(function(n){var r={left:null,right:null};for(r.left=t.left;r.left>-1&&null===n[r.left];r.left--);r.right=n.findIndex(function(e,i){return i>=t.right&&null!==e}),i.duration=this.cuePoints[r.right]-this.cuePoints[r.left],i.progress=(e-this.cuePoints[r.left])/i.duration,Number.isFinite(i.progress)||(i.progress=this.reverse?0:1);var o=n[r.left],a=n[r.right];return i.progress=s[a.easing](i.progress),a.position?a.position.map(function(t,e){return(t-o.position[e])*i.progress+o.position[e]}):"number"==typeof a.value&&"number"==typeof o.value?(a.value-o.value)*i.progress+o.value:this.target[u.keys].reduce(function(t,e){return t[e]=(a.value[e]-o.value[e])*i.progress+o.value[e],t},{})},this)},u.prototype.normalizeKeyframes=function(){var t,e=a.cloneDeep(this.keyFrames),i=this.cuePoints;return e=this.target[u.normalize](e),Array.isArray(e[0])||(e=[e]),e.forEach(function(e){for(var n=e.length;n<i.length;n++)e.push(null);e.forEach(function(e,i,n){null!==e?("object"!=typeof e&&(e={step:e,easing:"linear"}),void 0!==e.step&&(e.value=!1===e.step?t:t+e.step),e.easing||(e.easing="linear"),void 0!==e.copyValue&&(e.value=n[e.copyValue].value),e.copyFrame&&(e=n[e.copyFrame]),t=e.value):e=i===n.length-1?{value:t,easing:"linear"}:null,n[i]=e},this)}),this.normalizedKeyFrames=e,this},t.exports=u}).call(this,i(0))},function(t,e,i){var n,r=i(1).EventEmitter,o=i(2);function s(t){this.address=t.address,this.io=t.io,this.io.i2cConfig(t)}function a(t){if(n)return n;this.bank={a:new s({address:a.BANK_A,io:t.io}),b:new s({address:a.BANK_B,io:t.io})},n=this}s.prototype.read=function(t,e,i){t?this.io.i2cRead(this.address,t,e,i):this.io.i2cRead(this.address,e,i)},s.prototype.write=function(t,e){Array.isArray(e)||(e=[e]),this.io.i2cWrite(this.address,t,e)},a.shieldPort=function(t){var e,i,n,r,o,s,u,h=a[t];if(void 0===h)throw new Error("Invalid EVShield pin name");var l=!1;return t.startsWith("BA")?(e=a.BANK_A,n="a"):(e=a.BANK_B,n="b"),t.includes("M")&&(r=t.endsWith("M1")?a.S1:a.S2),t.includes("S")&&(i=(l=t.endsWith("S1"))?a.S1_ANALOG:a.S2_ANALOG,o=l?a.S1_MODE:a.S2_MODE,s=l?a.S1_OFFSET:a.S2_OFFSET,u=l?a.S1:a.S2),{address:e,analog:i,bank:n,mode:o,motor:r,offset:s,port:h,sensor:u}},a.isRawSensor=function(t){return t.analog===a.S1_ANALOG||t.analog===a.S2_ANALOG},o.inherits(a,r),a.prototype.setup=function(t,e){this.bank[t.bank].write(t.mode,[e])},a.prototype.read=function(t,e,i,n){t.sensor&&t.offset&&!a.isRawSensor(t)&&(e+=t.offset),this.bank[t.bank].read(e,i,n)},a.prototype.write=function(t,e,i){this.bank[t.bank].write(e,i)},a.BAS1=1,a.BAS2=2,a.BBS1=3,a.BBS2=4,a.BAM1=5,a.BAM2=6,a.BBM1=7,a.BBM2=8,a.BANK_A=26,a.BANK_B=27,a.S1=1,a.S2=2,a.M1=1,a.M2=2,a.MM=3,a.Type_NONE=0,a.Type_SWITCH=1,a.Type_ANALOG=2,a.Type_I2C=9,a.Type_NXT_LIGHT_REFLECTED=3,a.Type_NXT_LIGHT=4,a.Type_NXT_COLOR=13,a.Type_NXT_COLOR_RGBRAW=4,a.Type_NXT_COLORRED=14,a.Type_NXT_COLORGREEN=15,a.Type_NXT_COLORBLUE=16,a.Type_NXT_COLORNONE=17,a.Type_DATABIT0_HIGH=64,a.S1_MODE=111,a.S1_ANALOG=112,a.S1_OFFSET=0,a.S2_MODE=163,a.S2_ANALOG=164,a.S2_OFFSET=52,a.Type_EV3_LIGHT_REFLECTED=0,a.Type_EV3_LIGHT=1,a.Type_EV3_COLOR=2,a.Type_EV3_COLOR_REFRAW=3,a.Type_EV3_COLOR_RGBRAW=4,a.Type_EV3_TOUCH=18,a.Type_EV3=19,a.Light=131,a.Bump=132,a.ColorMeasure=131,a.Proximity=131,a.Touch=131,a.Ultrasonic=129,a.Mode=129,a.Light_Bytes=2,a.Analog_Bytes=2,a.Bump_Bytes=1,a.ColorMeasure_Bytes=2,a.Proximity_Bytes=2,a.Touch_Bytes=1,a.Motor_1=1,a.Motor_2=2,a.Motor_Both=3,a.Motor_Next_Action_Float=0,a.Motor_Next_Action_Brake=1,a.Motor_Next_Action_BrakeHold=2,a.Motor_Stop=96,a.Motor_Reset=82,a.Motor_Reverse=0,a.Motor_Forward=1,a.Motor_Move_Absolute=0,a.Motor_Move_Relative=1,a.Motor_Completion_Dont_Wait=0,a.Motor_Completion_Wait_For=1,a.Speed_Full=90,a.Speed_Medium=60,a.Speed_Slow=25,a.CONTROL_SPEED=1,a.CONTROL_RAMP=2,a.CONTROL_RELATIVE=4,a.CONTROL_TACHO=8,a.CONTROL_BRK=16,a.CONTROL_ON=32,a.CONTROL_TIME=64,a.CONTROL_GO=128,a.STATUS_SPEED=1,a.STATUS_RAMP=2,a.STATUS_MOVING=4,a.STATUS_TACHO=8,a.STATUS_BREAK=16,a.STATUS_OVERLOAD=32,a.STATUS_TIME=64,a.STATUS_STALL=128,a.COMMAND=65,a.VOLTAGE=110,a.SETPT_M1=66,a.SPEED_M1=70,a.TIME_M1=71,a.CMD_B_M1=72,a.CMD_A_M1=73,a.SETPT_M2=74,a.SPEED_M2=78,a.TIME_M2=79,a.CMD_B_M2=80,a.CMD_A_M2=81,a.POSITION_M1=82,a.POSITION_M2=86,a.STATUS_M1=90,a.STATUS_M2=91,a.TASKS_M1=92,a.TASKS_M2=93,a.ENCODER_PID=94,a.SPEED_PID=100,a.PASS_COUNT=106,a.TOLERANCE=107,a.BTN_PRESS=218,a.RGB_LED=215,a.CENTER_RGB_LED=222,t.exports=a},function(t,e){var i={within:function(t,e,i){if("number"==typeof t&&(t=[0,t]),!Array.isArray(t))throw new Error("within expected a range array");return"function"==typeof e&&(i=e,e="value"),void 0===this[e]?this:(this.on("data",function(){var n=this[e];n>=t[0]&&n<=t[1]&&i.call(this,null,n)}.bind(this)),this)}};t.exports=i},function(t,e,i){(function(t){function i(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===i(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===i(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===i(t)},e.isError=function(t){return"[object Error]"===i(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=t.isBuffer}).call(this,i(8).Buffer)},function(t,e){t.exports=function(){}},function(t,e,i){"use strict";(function(e){!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,i,n,r){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,i)});case 3:return e.nextTick(function(){t.call(null,i,n)});case 4:return e.nextTick(function(){t.call(null,i,n,r)});default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return e.nextTick(function(){t.apply(null,o)})}}}:t.exports=e}).call(this,i(0))},function(t,e,i){var n=i(8),r=n.Buffer;function o(t,e){for(var i in t)e[i]=t[i]}function s(t,e,i){return r(t,e,i)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=n:(o(n,e),e.Buffer=s),o(r,s),s.from=function(t,e,i){if("number"==typeof t)throw new TypeError("Argument must not be a number");return r(t,e,i)},s.alloc=function(t,e,i){if("number"!=typeof t)throw new TypeError("Argument must be a number");var n=r(t);return void 0!==e?"string"==typeof i?n.fill(e,i):n.fill(e):n.fill(0),n},s.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r(t)},s.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},function(t,e,i){"use strict";(function(e,n){var r=i(1).EventEmitter,o=i(2),s=[7,8],a=[1,2],u=["none","even","mark","odd","space"],h=["RTSCTS"],l={baudrate:9600,parity:"none",rtscts:!1,databits:8,stopbits:1,buffersize:256};function c(t,i,n,o){r.call(this);var c,f=this,p=Array.prototype.slice.call(arguments);if("function"!=typeof(o=p.pop())&&(o=null),n=null==n||n,o=o||function(t){t&&f.emit("error",t)},(i="function"!=typeof i&&i||{}).baudRate=i.baudRate||i.baudrate||l.baudrate,i.dataBits=i.dataBits||i.databits||l.databits,-1===s.indexOf(i.dataBits))return c=new Error('Invalid "databits": '+i.dataBits),void o(c);if(i.stopBits=i.stopBits||i.stopbits||l.stopbits,-1===a.indexOf(i.stopBits))return c=new Error('Invalid "stopbits": '+i.stopbits),void o(c);if(i.parity=i.parity||l.parity,-1===u.indexOf(i.parity))return c=new Error('Invalid "parity": '+i.parity),void o(c);if(!t)return c=new Error("Invalid port specified: "+t),void o(c);if(i.rtscts=l.rtscts,i.flowControl||i.flowcontrol){var d=i.flowControl||i.flowcontrol;if("boolean"==typeof d)i.rtscts=!0;else if(!d.every(function(t){var e=t.toUpperCase(),n=h.indexOf(e);if(n<0){var r=new Error('Invalid "flowControl": '+e+". Valid options: "+h.join(", "));return o(r),!1}switch(n){case 0:i.rtscts=!0}return!0}))return}if(i.bufferSize=i.bufferSize||i.buffersize||l.buffersize,i.serial=i.serial||"undefined"!=typeof chrome&&chrome.serial,!i.serial)throw new Error("No access to serial ports. Try loading as a Chrome Application.");this.options=function(t){switch(t.dataBits){case 7:t.dataBits="seven";break;case 8:t.dataBits="eight"}switch(t.stopBits){case 1:t.stopBits="one";break;case 2:t.stopBits="two"}switch(t.parity){case"none":t.parity="no"}return t}(i),this.options.serial.onReceiveError.addListener(function(t){switch(t.error){case"disconnected":case"device_lost":case"system_error":c=new Error("Disconnected"),f.options.disconnectedCallback?f.options.disconnectedCallback(c):f.emit("disconnect",c),f.connectionId>=0&&f.close()}}),this.path=t,n&&e.nextTick(function(){f.open(o)})}function f(t){for(var e=new ArrayBuffer(t.length),i=new Uint8Array(e),n=0;n<t.length;n++)i[n]=t[n];return e}function p(t){for(var e=new n(t.byteLength),i=new Uint8Array(t),r=0;r<e.length;++r)e[r]=i[r];return e}o.inherits(c,r),c.prototype.connectionId=-1,c.prototype.open=function(t){var e={bitrate:parseInt(this.options.baudRate,10),dataBits:this.options.dataBits,parityBit:this.options.parity,stopBits:this.options.stopBits,ctsFlowControl:this.options.rtscts};this.options.serial.connect(this.path,e,this.proxy("onOpen",t))},c.prototype.onOpen=function(t,e){chrome.runtime.lastError?"function"==typeof t?t(chrome.runtime.lastError):this.emit("error",chrome.runtime.lastError):(this.connectionId=e.connectionId,-1!==this.connectionId?(this.emit("open",e),this._reader=this.proxy("onRead"),this.options.serial.onReceive.addListener(this._reader),"function"==typeof t&&t(chrome.runtime.lastError,e)):this.emit("error",new Error("Could not open port.")))},c.prototype.onRead=function(t){t&&this.connectionId===t.connectionId&&(this.options.dataCallback?this.options.dataCallback(p(t.data)):this.emit("data",p(t.data)))},c.prototype.write=function(t,e){if(this.connectionId<0){var i=new Error("Serialport not open.");"function"==typeof e?e(i):this.emit("error",i)}else"string"==typeof t&&(t=function(t){for(var e=new ArrayBuffer(t.length),i=new Uint8Array(e),n=0;n<t.length;n++)i[n]=t.charCodeAt(n);return e}(t)),t instanceof ArrayBuffer==!1&&(t=f(t)),this.options.serial.send(this.connectionId,t,function(t){"function"==typeof e&&e(chrome.runtime.lastError,t)})},c.prototype.close=function(t){if(this.connectionId<0){var e=new Error("Serialport not open.");"function"==typeof t?t(e):this.emit("error",e)}else this.options.serial.disconnect(this.connectionId,this.proxy("onClose",t))},c.prototype.onClose=function(t,e){this.connectionId=-1,this.emit("close"),this.removeAllListeners(),this._reader&&(this.options.serial.onReceive.removeListener(this._reader),this._reader=null),"function"==typeof t&&t(chrome.runtime.lastError,e)},c.prototype.flush=function(t){if(this.connectionId<0){var e=new Error("Serialport not open.");"function"==typeof t?t(e):this.emit("error",e)}else{var i=this;this.options.serial.flush(this.connectionId,function(e){chrome.runtime.lastError?"function"==typeof t?t(chrome.runtime.lastError,e):i.emit("error",chrome.runtime.lastError):t(null,e)})}},c.prototype.drain=function(t){if(this.connectionId<0){var e=new Error("Serialport not open.");"function"==typeof t?t(e):this.emit("error",e)}else"function"==typeof t&&t()},c.prototype.proxy=function(){for(var t=this,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=e.splice(0,1)[0];return function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];var o=e.concat(i);t[n].apply(t,o)}},c.prototype.set=function(t,e){this.options.serial.setControlSignals(this.connectionId,t,function(t){e(chrome.runtime.lastError,t)})},c.prototype.isOpen=function(){return this.connectionId>-1},t.exports={SerialPort:c,list:function(t){"undefined"!=typeof chrome&&chrome.serial?chrome.serial.getDevices(function(e){for(var i=new Array(e.length),n=0;n<e.length;n++)i[n]={comName:e[n].path,manufacturer:e[n].displayName,serialNumber:"",pnpId:"",locationId:"",vendorId:"0x"+(e[n].vendorId||0).toString(16),productId:"0x"+(e[n].productId||0).toString(16)};t(chrome.runtime.lastError,i)}):t(new Error("No access to serial ports. Try loading as a Chrome Application."),null)},buffer2ArrayBuffer:f,used:[]}}).call(this,i(0),i(8).Buffer)},function(t,e,i){(function(e){var n=i(4),r=i(1).EventEmitter,o=i(2),s=i(6),a=new Map,u={INPUT:0,OUTPUT:1,ANALOG:2,PWM:3,SERVO:4};function h(t){if(!(this instanceof h))return new h(t);if(void 0===t||"object"==typeof t&&void 0===t.addr&&void 0===t.pin)throw new Error("Pins must have a pin number");var e="object"==typeof t?t.addr||t.pin||0:t,i=h.isAnalog(t),r=!1;n.Component.call(this,t=n.Options(t)),t.addr=t.addr||t.pin,this.io.analogPins.includes(e)&&(i=!1,r=!0);var o=r?e:"object"!=typeof t?t:t.addr,s=t.type||(i?"analog":"digital"),u={mode:null,last:null,value:0};a.set(this,u),Object.defineProperties(this,{type:{get:function(){return s}},addr:{get:function(){return o}},value:{get:function(){return u.value}},mode:{set:function(t){a.get(this).mode=t,this.io.pinMode(this.addr,t)},get:function(){return a.get(this).mode}}}),this.mode=void 0!==t.as?t.as:void 0!==t.mode?t.mode:i?2:1,this.freq=void 0!==t.freq?t.freq:20,0!==this.mode&&2!==this.mode||l(this),"digital"===s&&Object.defineProperties(this,{isHigh:{get:function(){return!!u.value}},isLow:{get:function(){return!u.value}}})}function l(t){var e=a.get(t);t.io[t.type+"Read"](t.addr,function(t){e.value=t}),setInterval(function(){var i,n;i=e.value?"low":"high",n=e.value?"high":"low",e.mode===u.INPUT&&(null===e.last&&(e.last=i),e.last===i&&(e.last=n,t.emit(n,e.value),t.emit("change",e.value))),t.emit("data",e.value)},t.freq)}function c(t){if(!(this instanceof c))return new c(t);Object.defineProperty(this,"type",{value:h}),s.call(this,t)}o.inherits(h,r),Object.keys(u).forEach(function(t){Object.defineProperty(h,t,{value:u[t]})}),h.isAnalog=function(t){return!("string"!=typeof t||!h.isPrefixed(t,["I","A"]))||("object"==typeof t?h.isAnalog(void 0!==t.addr?t.addr:t.pin):void 0)},h.isPrefixed=function(t,e){return t=t[0],e.reduce(function(e,i){return e||i===t},!1)},h.write=function(t,e){a.get(t).value=e,t.mode=u.OUTPUT,t.io[t.type+"Write"](t.addr,e),t.emit("write",null,e)},h.read=function(t,e){var i=!1;"digital"===t.type&&0!==t.mode&&(i=!0,t.mode=u.INPUT),"analog"===t.type&&2!==t.mode&&(i=!0,t.mode=u.ANALOG),i&&l(t),t.on("data",function(){e.call(t,null,t.value)})},h.prototype.query=function(t){var e=this.addr;return"analog"===this.type&&(e=this.io.analogPins[this.addr]),this.io.queryPinState(e,function(){t(this.io.pins[e])}.bind(this)),this},h.prototype.high=function(){var t="analog"===this.type?255:1;return h.write(this,t),this.emit("high"),this},h.prototype.low=function(){return h.write(this,0),this.emit("low"),this},["read","write"].forEach(function(t){h.prototype[t]=function(e){return h[t](this,e),this}}),o.inherits(c,s),["high","low","write"].forEach(function(t){c.prototype[t]=function(){for(var e=this.length,i=0;i<e;i++)this[i][t].apply(this[i],arguments);return this}}),h.Array=c,h.Collection=c,e.env.IS_TEST_MODE&&(h.purge=function(){a.clear()}),t.exports=h}).call(this,i(0))},function(t,e,i){(function(e){var n=i(4),r=i(12),o=i(9),s=i(5),a=i(86),u=new Map,h={DEFAULT:{initialize:{value:function(t){l.colors.forEach(function(e,i){var r=t.pins[i];t.debug&&!this.board.pins.isPwm(r)&&n.Pins.Error({pin:r,type:"PWM",via:"Led.RGB"}),this.io.pinMode(r,this.io.MODES.PWM),this.pins[i]=r},this)}},write:{writable:!0,value:function(t){var e=u.get(this);l.colors.forEach(function(i,r){var o=this.pins[r],s=t[i];e.isAnode&&(s=255-n.constrain(s,0,255)),this.io.analogWrite(o,s)},this)}}},PCA9685:{initialize:{value:function(t){var e=u.get(this);this.address=t.address||64,this.pwmRange=t.pwmRange||[0,4095],this.frequency=t.frequency||200,e.expander=o.get({address:this.address,controller:this.controller,bus:this.bus,pwmRange:this.pwmRange,frequency:this.frequency}),l.colors.forEach(function(i,n){this.pins[n]=e.expander.normalize(t.pins[n]),e.expander.analogWrite(this.pins[n],0)},this)}},write:{writable:!0,value:function(t){var e=u.get(this);l.colors.forEach(function(i,r){var o=this.pins[r],s=t[i];e.isAnode&&(s=255-n.constrain(s,0,255)),e.expander.analogWrite(o,s)},this)}}},BLINKM:{REGISTER:{value:{GO_TO_RGB_COLOR_NOW:110,STOP_SCRIPT:111}},initialize:{value:function(t){this.address=t.address||9,t.address=this.address,this.board.Drivers[this.address]||(this.io.i2cConfig(t),this.board.Drivers[this.address]={initialized:!1},this.io.i2cWrite(this.address,[this.REGISTER.STOP_SCRIPT]),this.board.Drivers[this.address].initialized=!0)}},write:{writable:!0,value:function(t){this.io.i2cWrite(this.address,[this.REGISTER.GO_TO_RGB_COLOR_NOW,t.red,t.green,t.blue])}}}};function l(t){if(!(this instanceof l))return new l(t);var e=null;Array.isArray(t)?t={pins:t}:"object"!=typeof t.pins||Array.isArray(t.pins)||(t.pins=[t.pins.red,t.pins.green,t.pins.blue]),n.Component.call(this,t=n.Options(t)),null==(e=t.controller&&"string"==typeof t.controller?h[t.controller.toUpperCase()]:t.controller)&&(e=h.DEFAULT);var i={red:255,green:255,blue:255,intensity:100,isAnode:t.isAnode||!1,interval:null};i.values={red:i.red,green:i.green,blue:i.blue},u.set(this,i),n.Controller.call(this,e,t),Object.defineProperties(this,{isOn:{get:function(){return l.colors.some(function(t){return i[t]>0})}},isRunning:{get:function(){return!!i.interval}},isAnode:{get:function(){return i.isAnode}},values:{get:function(){return Object.assign({},i.values)}},update:{value:function(t){var e=u.get(this);t=t||this.color(),e.values=l.ToScaledRGB(e.intensity,t),this.write(e.values),Object.assign(e,t)}}}),this.initialize(t),this.off()}function c(t){return"string"==typeof t&&t.endsWith("%")}h.ESPLORA={initialize:{value:function(t){t.pins=[5,10,9],this.pins=[],h.DEFAULT.initialize.value.call(this,t)}},write:h.DEFAULT.write},l.colors=["red","green","blue"],l.ToScaledRGB=function(t,e){var i=t/100;return l.colors.reduce(function(t,n){return t[n]=Math.round(e[n]*i),t},{})},l.ToRGB=function(t,e,i){var n,r={},o=0;if(void 0!==t&&(o|=4),void 0!==e&&(o|=2),void 0!==i&&(o|=1),4==(4|o)){if(null==(n=t))throw new Error("Invalid color ("+n+")");if(Array.isArray(n))r={red:n[0],green:n[1],blue:n[2]};else if("object"==typeof n)r={red:n.red,green:n.green,blue:n.blue};else if("string"==typeof n)if(/^#?[0-9A-Fa-f]{6}$/.test(n))7===n.length&&"#"===n[0]&&(n=n.slice(1)),r={red:parseInt(n.slice(0,2),16),green:parseInt(n.slice(2,4),16),blue:parseInt(n.slice(4,6),16)};else{if(!/^rgb/.test(n))return l.ToRGB(a.keyword.rgb(n.toLowerCase()));var s=n.match(/^rgba?\(([^)]+)\)$/)[1].split(/[\s,]+/);c(s[0])&&s.forEach(function(t,e){e<=2&&(s[e]=Math.round(parseInt(t,10)/100*255))}),r={red:parseInt(s[0],10),green:parseInt(s[1],10),blue:parseInt(s[2],10)},s.length>3&&(c(s[3])&&(s[3]=parseInt(s[3],10)/100),r=l.ToScaledRGB(100*parseFloat(s[3]),r))}}else r={red:t,green:e,blue:i};return r},l.prototype.color=function(t,e,i){var n,r=u.get(this);if(0===arguments.length)return n=this.isOn?r:r.prev,l.colors.reduce(function(t,e){return t[e]=Math.round(n[e]),t},{});var o=l.ToRGB(t,e,i);return l.colors.forEach(function(t){var e=o[t];if(null==e)throw new Error("Led.RGB.color: invalid color (["+[o.red,o.green,o.blue].join(",")+"])");e=s.constrain(e,0,255),o[t]=e},this),this.update(o),this},l.prototype.on=function(){var t,e=u.get(this);return this.isOn||(t=e.prev||{red:255,green:255,blue:255},e.prev=null,this.update(t)),this},l.prototype.off=function(){var t=u.get(this);return this.isOn&&(t.prev=l.colors.reduce(function(e,i){return e[i]=t[i],e}.bind(this),{}),this.update({red:0,green:0,blue:0})),this},l.prototype.blink=function(t,e){var i=u.get(this);return this.stop(),"function"==typeof t&&(e=t,t=null),i.interval=setInterval(function(){this.toggle(),"function"==typeof e&&e()}.bind(this),t||100),this},l.prototype.strobe=l.prototype.blink,l.prototype.toggle=function(){return this[this.isOn?"off":"on"]()},l.prototype.stop=function(){var t=u.get(this);return t.interval&&clearInterval(t.interval),t.animation&&t.animation.stop(),t.interval=null,this},l.prototype.intensity=function(t){var e=u.get(this);return 0===arguments.length?e.intensity:(e.intensity=s.constrain(t,0,100),this.update(),this)},l.prototype[r.normalize]=function(t){var e=u.get(this);return null===t[0]&&(t[0]=e.values),t.reduce(function(t,i){var n={},r=i,o=null,s=e.intensity;if(null!==i){if("number"==typeof r)throw new Error("RGB LEDs expect a complete keyFrame object or hexadecimal string value");"string"==typeof r&&(o=r),Array.isArray(r)?o=r:"object"==typeof r&&(o=void 0!==r.color?r.color:r),"number"==typeof i.intensity&&(s=i.intensity,delete i.intensity),n.easing=i.easing||"linear",n.value=l.ToScaledRGB(s,l.ToRGB(o))}else n=i;return t.push(n),t},[])},l.prototype[r.render]=function(t){return this.color(t[0])},l.prototype[r.keys]=l.colors,e.env.IS_TEST_MODE&&(l.Controllers=h,l.purge=function(){u.clear()}),t.exports=l}).call(this,i(0))},function(t,e,i){(function(e){var n,r=i(2),o=i(4),s=i(92),a=new Map;function u(t){o.Component.call(this,t=o.Options(t));var e=null;void 0===(e="string"==typeof t.controller?n[t.controller]:t.controller)&&(e=n.DEFAULT),this.clear=e.clear,this.led=e.led,this.row=e.row,this.scanLimit=e.scanLimit,this.send=e.send,this.sendDigit=e.sendDigit,this.initialize=e.initialize,this.OP=e.OP,this.digitOrder=1,this.isMatrix||(this.colon=t.colon||!1),e.writeDisplay&&(this.writeDisplay=e.writeDisplay),e.blink&&(this.blink=e.blink);var i=t.devices||(t.addresses?t.addresses.length:1);this.memory=Array(64).fill(0),t.dims=t.dims||u.MATRIX_DIMENSIONS["8x8"],"string"==typeof t.dims&&(t.dims=u.MATRIX_DIMENSIONS[t.dims]),Array.isArray(t.dims)&&(t.dims={rows:t.dims[0],columns:t.dims[1]});var r={devices:i,digits:t.digits||8,isMatrix:!!t.isMatrix,isBicolor:!!t.isBicolor,rows:t.dims.rows,columns:t.dims.columns};if(8!==r.columns&&16!==r.columns||8!==r.rows&&16!==r.rows||r.columns+r.rows===32)throw new Error("Invalid matrix dimensions specified: must be 8x8, 16x8 or 8x16");Object.defineProperties(this,{devices:{get:function(){return r.devices}},digits:{get:function(){return r.digits}},isMatrix:{get:function(){return r.isMatrix}},isBicolor:{get:function(){return r.isBicolor}},rows:{get:function(){return r.rows}},columns:{get:function(){return r.columns}}}),a.set(this,r),e.initialize.call(this,t)}u.prototype.each=function(t){for(var e=0;e<this.devices;e++)t.call(this,e)},u.prototype.on=function(t){return void 0===t?this.each(function(t){this.on(t)}):this.send(t,this.OP.SHUTDOWN||u.OP.SHUTDOWN,1),this},u.prototype.off=function(t){return void 0===t?this.each(function(t){this.off(t)}):this.send(t,this.OP.SHUTDOWN||u.OP.SHUTDOWN,0),this},u.prototype.setLed=r.deprecate(function(t,e,i,n){return this.led(t,e,i,n)},"LedControl.prototype.setLed: Use `led`instead"),u.prototype.digit=function(t,e,i){var n,r,o,s,a,h=!1;return arguments.length<3?(n=Array.from(arguments),this.each(function(t){this.digit.apply(this,(n.unshift(t),n))}),this):this.isMatrix?(this.draw.apply(this,arguments),this):(r=t*this.digits,s=String(i),o=e=Number(e),-1===this.digitOrder&&(o=this.digits-o-1),2===s.length&&"."===s[1]&&(h=!0,s=s[0]),(a=u.DIGIT_CHARS[s])||(a=Math.abs(Number(s))),h&&(a|=u.DIGIT_CHARS["."]),this.memory[r+o]=a,this.sendDigit(t,o,a),this)},u.prototype.print=function(t,e){var i;if(e=e||{device:0},this.isMatrix)throw new Error("Led.Matrix does not yet support the print method");return"string"!=typeof t&&(t=String(t)),i=t.match(/([0-9A-Za-z][.]|[0-9A-Za-z:]|[\s])/g),this.colon&&i.length>2&&":"!==i[2]&&" "!==i[2]&&i.splice(2,0," "),(i||[]).forEach(function(t,i){this.digit(e.device,i,t)},this),this},u.prototype.brightness=function(t,e){return 1===arguments.length?(e=t,this.each(function(t){this.brightness(t,e)})):this.send(t,this.OP.BRIGHTNESS||u.OP.BRIGHTNESS,o.map(e,0,100,0,15)),this},u.prototype.column=function(t,e,i){var n;if(!this.isMatrix)throw new Error("The `column` method is only supported for Matrix devices");if(2===arguments.length)i=e,e=t,this.each(function(t){this.column(t,e,i)});else for(var r=0;r<this.rows;r++)n=i>>this.rows-1-r,n&=1,this.led(t,r,e,n);return this},u.prototype.draw=function(t,e){var i;if(1===arguments.length)e=t,this.each(function(t){this.draw(t,e)});else if(this.isMatrix){if(void 0!==(i=Array.isArray(e)?e:s.MATRIX_CHARS[e])){if(i.length!==this.rows&&i.length!==this.columns)throw new Error("Invalid character: "+i);for(var n=i.length,r=0;r<this.rows-n;r++)i.push(0);i.forEach(function(e,i){this.row(t,i,e)},this)}}else this.digit.apply(this,arguments);return this},u.prototype.char=r.deprecate(function(t,e,i,n){return this.draw(t,e,i,n)},"LedControl.prototype.setLed: Use `draw`instead"),u.prototype.device=function(t){var e={};return Object.keys(u.prototype).forEach(function(i){e[i]=this[i].bind(this,t)},this),Object.getOwnPropertyNames(this).forEach(function(i){this[i]&&"function"==typeof this[i]&&(e[i]=this[i].bind(this,t))},this),e};var h=new Set([112,113,114,115,116,117,118,119]);n={HT16K33:{OP:{SHUTDOWN:32,BRIGHTNESS:224,BLINK:128},initialize:function(t){var e=a.get(this),i=Array.from(h);if(0===i.length)throw new Error("There are no available HT16K33 controller addresses");this.addresses=t.addresses||(t.address?[t.address]:null),null===this.addresses&&(this.addresses=i.slice(0,e.devices)),this.addresses.forEach(function(t){if(!h.has(t))throw new Error("Invalid HT16K33 controller address: "+t);h.delete(t)}),this.rotation=t.rotation||1,16!==this.columns||t.rotation||(this.rotation=0),this.buffer=Array(this.rows).fill([]),this.isMatrix||(this.colon=!0),t.addresses=this.addresses,this.io.i2cConfig(t),this.each(function(t){this.on(t),this.blink(t,!1),this.brightness(t,100),this.clear(t)})},blink:function(t,e){if(1===arguments.length)e=t,this.each(function(t){this.blink(t,e)});else{var i=null;switch(e){case!1:i=0;break;case"slow":i=6;break;case"normal":i=4;break;case"fast":i=2}if(null==i)return;this.send(t,1|this.OP.BLINK,i)}return this},clear:function(t){var e;if(void 0===t)this.each(function(t){this.clear(t)});else{e=t*this.columns;for(var i=0;i<this.rows;i++)this.memory[e+i]=0,this.buffer[t][i]=0;this.writeDisplay(t)}return this},led:function(t,e,i,n){if(3===arguments.length)return n=i,i=e,e=t,this.each(function(t){this.led(t,e,i,n)}),this;var r,o=i,s=e,a=this.rows,h=this.columns;if(s<0||s>=a)return this;if(o<0||o>=h)return this;switch(this.rotation){case 1:h=this.rows,a=this.columns,r=o,o=s,s=r,o=h-o-1;break;case 2:o=h-o-1,s=a-s-1;break;case 3:h=this.rows,r=o,o=s,s=(a=this.columns)-(s=r)-1}return this.isBicolor?n===u.COLORS.GREEN?(this.buffer[t][s]|=1<<o,this.buffer[t][s]&=~(1<<o+8)):n===u.COLORS.YELLOW?this.buffer[t][s]|=1<<o+8|1<<o:n===u.COLORS.RED?(this.buffer[t][s]|=1<<o+8,this.buffer[t][s]&=~(1<<o)):this.buffer[t][s]&=~(1<<o)&~(1<<o+8):(8===h&&8===a&&(o+=h-1,o%=h),n?this.buffer[t][s]|=1<<o:this.buffer[t][s]&=~(1<<o)),this.writeDisplay(t),this},writeDisplay:function(t){for(var e=[0],i=0;i<8;i++)e.push(255&this.buffer[t][i]),e.push(this.buffer[t][i]>>8);this.io.i2cWrite(this.addresses[t],e)},row:function(t,e,i){if(!this.isMatrix)throw new Error("The `row` method is only supported for Matrix devices");if("number"==typeof i&&(i=("0000000000000000"+parseInt(i,10).toString(2)).substr(0-this.columns,this.columns)),2===arguments.length)i=e,e=t,this.each(function(t){this.row(t,e,i)});else for(var n=0;n<this.columns;n++)this.led(t,e,n,parseInt(i[n],10));return this},scanLimit:function(){throw new Error("The `scanLimit` method is not implemented for HT16K33 devices")},send:function(t,e,i){if(3!==arguments.length)throw new Error("The `send` method expects three arguments: device, opcode, data");return this.io.i2cWrite(this.addresses[t],[e|i]),this},sendDigit:function(t,e,i){return i>0&&i<255&&(i=(i=("00000000"+i.toString(2)).slice(-8).split("")).shift()+i.reverse().join(""),i=parseInt(i,2)),this.buffer[t][e]=i,this.writeDisplay(t),this}},DEFAULT:{OP:{},initialize:function(t){this.pins={data:t.pins.data,clock:t.pins.clock,cs:t.pins.cs||t.pins.latch},["data","clock","cs"].forEach(function(t){this.io.pinMode(this.pins[t],this.io.MODES.OUTPUT)},this),this.digitOrder=-1,this.digitOrder=-1;for(var e=0;e<this.devices;e++)this.isMatrix&&this.send(e,u.OP.DECODING,0),this.send(e,u.OP.BRIGHTNESS,3),this.send(e,u.OP.SCANLIMIT,7),this.send(e,u.OP.SHUTDOWN,1),this.send(e,u.OP.DISPLAYTEST,0),this.clear(e),this.on(e);return this},clear:function(t){var e;if(void 0===t)this.each(function(t){this.clear(t)});else{e=8*t;for(var i=0;i<8;i++)this.memory[e+i]=0,this.send(t,i+1,0)}return this},sendDigit:function(t,e,i){return this.send(t,e+1,i),this},led:function(t,e,i,n){var r,o;return 3===arguments.length?(n=i,i=e,e=t,this.each(function(t){this.led(t,e,i,n)})):(r=t*this.columns,o=128>>i,n?this.memory[r+e]=this.memory[r+e]|o:(o=~o,this.memory[r+e]=this.memory[r+e]&o),this.send(t,e+1,this.memory[r+e])),this},row:function(t,e,i){if(!this.isMatrix)throw new Error("The `row` method is only supported for Matrix devices");var n;return"string"==typeof i&&(i=parseInt(i,2)),2===arguments.length?(i=e,e=t,this.each(function(t){this.row(t,e,i)})):(n=t*this.columns,this.memory[n+e]=i,this.send(t,e+1,this.memory[n+e])),this},scanLimit:function(t,e){return 1===arguments.length?(e=t,this.each(function(t){this.scanLimit(t,e)})):this.send(t,u.OP.SCANLIMIT,e),this},send:function(t,e,i){if(3!==arguments.length)throw new Error("`send` expects three arguments: device, opcode, data");var n=2*t,r=2*this.devices,o=[];if(t<this.devices){for(var s=0;s<r;s++)o[s]=0;o[n+1]=e,o[n]=i,this.io.digitalWrite(this.pins.cs,this.io.LOW);for(var a=r;a>0;a--)this.board.shiftOut(this.pins.data,this.pins.clock,o[a-1]);this.io.digitalWrite(this.pins.cs,this.io.HIGH)}return this}}},u.DEFAULTS={DECODING:0,BRIGHTNESS:3,SCANLIMIT:7,SHUTDOWN:1,DISPLAYTEST:0},Object.freeze(u.DEFAULTS),u.OP={},u.OP.NOOP=0,u.OP.DIGIT0=1,u.OP.DIGIT1=2,u.OP.DIGIT2=3,u.OP.DIGIT3=4,u.OP.DIGIT4=5,u.OP.DIGIT5=6,u.OP.DIGIT6=7,u.OP.DIGIT7=8,u.OP.DECODEMODE=9,u.OP.INTENSITY=10,u.OP.SCANLIMIT=11,u.OP.SHUTDOWN=12,u.OP.DISPLAYTEST=15,u.OP.BRIGHTNESS=u.OP.INTENSITY,u.OP.DECODING=u.OP.DECODEMODE,u.OP.DISPLAY=u.OP.DISPLAYTEST,u.OP.POWERDOWN=u.OP.SHUTDOWN,Object.freeze(u.OP),u.COLORS={RED:1,YELLOW:2,GREEN:3},u.DIRECTIONS={UP:1,RIGHT:2,DOWN:3,LEFT:4,1:"UP",2:"RIGHT",3:"DOWN",4:"LEFT"},Object.freeze(u.DIRECTIONS);for(var l=[[224,160,160,160,160,160,224,0],[64,192,64,64,64,64,224,0],[224,32,32,224,128,128,224,0],[224,32,32,96,32,32,224,0],[32,96,160,224,32,32,32,0],[224,128,128,224,32,32,224,0],[224,128,128,224,160,160,224,0],[224,32,32,32,32,32,32,0],[224,160,160,64,160,160,224,0],[224,160,160,224,32,32,224,0]],c="",f=0;f<10;f++)for(var p=0;p<10;p++){c=f+""+p,s.MATRIX_CHARS[c]=[];for(var d=0;d<8;d++)s.MATRIX_CHARS[c][d]=l[f][d]|l[p][d]>>>4}u.MATRIX_DIMENSIONS={"16x8":{rows:16,columns:8},"8x16":{rows:8,columns:16},"8x8":{rows:8,columns:8}},u.MATRIX_CHARS=s.MATRIX_CHARS,u.DIGIT_CHARS=s.DIGIT_CHARS,e.env.IS_TEST_MODE&&(u.Controllers=n,u.purge=function(){h=new Set([112,113,114,115,116,117,118,119]),a.clear()}),t.exports=u}).call(this,i(0))},function(t,e,i){(function(e){var n=i(4),r=i(5),o=i(1),s=i(2),a=i(6),u=i(14),h=new Map;function l(t){if(!(this instanceof l))return new l(t);var i=1023,o=null,s=-1,a=[];n.Component.call(this,t=n.Options(t)),t.type||(t.type="analog"),this.io.RESOLUTION&&this.io.RESOLUTION.ADC&&this.io.RESOLUTION.ADC!==i&&(i=this.io.RESOLUTION.ADC),this.mode="digital"===t.type?this.io.MODES.INPUT:this.io.MODES.ANALOG,this.io.pinMode(this.pin,this.mode);var u={enabled:void 0===t.enabled||t.enabled,booleanBarrier:"digital"===t.type?0:null,intervalId:null,scale:null,value:0,median:0,freq:t.freq||25,previousFreq:t.freq||25};h.set(this,u),this.range=t.range||[0,i],this.limit=t.limit||null,this.threshold=void 0===t.threshold?1:t.threshold,this.isScaled=!1,this.io[t.type+"Read"](this.pin,function(e){o=e,"digital"!==t.type&&a.push(o)}.bind(this));var c=function(){var e,i,n,r;if(null,"digital"===t.type)return this.emit("data",o),void(s!==o&&(this.emit("change",o),s=o));a.length>0&&(u.median=(i=a.sort(function(t,e){return t-e}),n=i.length,r=Math.floor(n/2),n%2?i[r]:(i[r-1]+i[r])/2));var h=Math.round(u.median);this.emit("data",h),(u.median<=s-this.threshold||u.median>=s+this.threshold)&&(this.emit("change",h),s=u.median),this.limit&&(u.median<=this.limit[0]&&(e="lower"),u.median>=this.limit[1]&&(e="upper"),e&&(this.emit("limit",{boundary:e,value:h}),this.emit("limit:"+e,h))),a.length=0}.bind(this);Object.defineProperties(this,{raw:{get:function(){return o}},analog:{get:function(){return"digital"===t.type?o:null===o?0:0|r.map(this.raw,0,i,0,255)}},constrained:{get:function(){return"digital"===t.type?o:null===o?0:r.constrain(this.raw,0,255)}},boolean:{get:function(){var t=h.get(this),e=t.booleanBarrier,n=t.scale||[0,i];return null===e&&(e=n[0]+(n[1]-n[0])/2),this.value>e}},scaled:{get:function(){var e;return u.scale&&null!==o?"digital"===t.type?u.scale[o]:(e=r.fmap(o,this.range[0],this.range[1],u.scale[0],u.scale[1]),r.constrain(e,u.scale[0],u.scale[1])):this.constrained}},freq:{get:function(){return u.freq},set:function(t){u.freq=t,u.intervalId&&clearInterval(u.intervalId),null!==u.freq&&(u.intervalId=setInterval(c,t))}},value:{get:function(){return u.scale?(this.isScaled=!0,this.scaled):o}},resolution:{get:function(){return i}}}),e.env.IS_TEST_MODE&&Object.defineProperties(this,{state:{get:function(){return h.get(this)}}}),u.enabled&&(this.freq=u.freq)}function c(t){if(!(this instanceof c))return new c(t);Object.defineProperty(this,"type",{value:l}),a.Emitter.call(this,t)}s.inherits(l,o.EventEmitter),Object.assign(l.prototype,u),l.prototype.enable=function(){var t=h.get(this);return t.enabled||(this.freq=t.freq||t.previousFreq),this},l.prototype.disable=function(){var t=h.get(this);return t.enabled&&(t.enabled=!1,t.previousFreq=t.freq,this.freq=null),this},l.prototype.scale=function(t,e){return this.isScaled=!0,h.get(this).scale=Array.isArray(t)?t:[t,e],this},l.prototype.scaleTo=function(t,e){var i=Array.isArray(t)?t:[t,e];return r.map(this.raw,0,this.resolution,i[0],i[1])},l.prototype.fscaleTo=function(t,e){var i=Array.isArray(t)?t:[t,e];return r.fmap(this.raw,0,this.resolution,i[0],i[1])},l.prototype.booleanAt=function(t){return h.get(this).booleanBarrier=t,this},s.inherits(c,a.Emitter),a.installMethodForwarding(c.prototype,l.prototype),l.Collection=c,e.env.IS_TEST_MODE&&(l.purge=function(){h.clear()}),t.exports=l}).call(this,i(0))},function(t,e,i){(function(t){var n=void 0!==t&&t||"undefined"!=typeof self&&self||window,r=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(r.call(setTimeout,n,arguments),clearTimeout)},e.setInterval=function(){return new o(r.call(setInterval,n,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(n,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},i(100),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,i(7))},function(t,e,i){(e=t.exports=i(49)).Stream=e,e.Readable=e,e.Writable=i(26),e.Duplex=i(11),e.Transform=i(53),e.PassThrough=i(115)},function(t,e,i){"use strict";(function(e,n,r){var o=i(17);function s(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,i){var n=t.entry;t.entry=null;for(;n;){var r=n.callback;e.pendingcb--,r(i),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=m;var a,u=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?n:o.nextTick;m.WritableState=E;var h=i(15);h.inherits=i(10);var l={deprecate:i(114)},c=i(50),f=i(18).Buffer,p=r.Uint8Array||function(){};var d,v=i(51);function g(){}function E(t,e){a=a||i(11),t=t||{};var n=e instanceof a;this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,h=t.writableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(h||0===h)?h:l,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var c=!1===t.decodeStrings;this.decodeStrings=!c,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var i=t._writableState,n=i.sync,r=i.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(i),e)!function(t,e,i,n,r){--e.pendingcb,i?(o.nextTick(r,n),o.nextTick(O,t,e),t._writableState.errorEmitted=!0,t.emit("error",n)):(r(n),t._writableState.errorEmitted=!0,t.emit("error",n),O(t,e))}(t,i,n,e,r);else{var s=S(i);s||i.corked||i.bufferProcessing||!i.bufferedRequest||R(t,i),n?u(b,t,i,s,r):b(t,i,s,r)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function m(t){if(a=a||i(11),!(d.call(m,this)||this instanceof a))return new m(t);this._writableState=new E(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),c.call(this)}function y(t,e,i,n,r,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,i?t._writev(r,e.onwrite):t._write(r,o,e.onwrite),e.sync=!1}function b(t,e,i,n){i||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,n(),O(t,e)}function R(t,e){e.bufferProcessing=!0;var i=e.bufferedRequest;if(t._writev&&i&&i.next){var n=e.bufferedRequestCount,r=new Array(n),o=e.corkedRequestsFree;o.entry=i;for(var a=0,u=!0;i;)r[a]=i,i.isBuf||(u=!1),i=i.next,a+=1;r.allBuffers=u,y(t,e,!0,e.length,r,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new s(e),e.bufferedRequestCount=0}else{for(;i;){var h=i.chunk,l=i.encoding,c=i.callback;if(y(t,e,!1,e.objectMode?1:h.length,h,l,c),i=i.next,e.bufferedRequestCount--,e.writing)break}null===i&&(e.lastBufferedRequest=null)}e.bufferedRequest=i,e.bufferProcessing=!1}function S(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function T(t,e){t._final(function(i){e.pendingcb--,i&&t.emit("error",i),e.prefinished=!0,t.emit("prefinish"),O(t,e)})}function O(t,e){var i=S(e);return i&&(!function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,o.nextTick(T,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),i}h.inherits(m,c),E.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(E.prototype,"buffer",{get:l.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(m,Symbol.hasInstance,{value:function(t){return!!d.call(this,t)||this===m&&(t&&t._writableState instanceof E)}})):d=function(t){return t instanceof this},m.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},m.prototype.write=function(t,e,i){var n,r=this._writableState,s=!1,a=!r.objectMode&&(n=t,f.isBuffer(n)||n instanceof p);return a&&!f.isBuffer(t)&&(t=function(t){return f.from(t)}(t)),"function"==typeof e&&(i=e,e=null),a?e="buffer":e||(e=r.defaultEncoding),"function"!=typeof i&&(i=g),r.ended?function(t,e){var i=new Error("write after end");t.emit("error",i),o.nextTick(e,i)}(this,i):(a||function(t,e,i,n){var r=!0,s=!1;return null===i?s=new TypeError("May not write null values to stream"):"string"==typeof i||void 0===i||e.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(t.emit("error",s),o.nextTick(n,s),r=!1),r}(this,r,t,i))&&(r.pendingcb++,s=function(t,e,i,n,r,o){if(!i){var s=function(t,e,i){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=f.from(e,i));return e}(e,n,r);n!==s&&(i=!0,r="buffer",n=s)}var a=e.objectMode?1:n.length;e.length+=a;var u=e.length<e.highWaterMark;u||(e.needDrain=!0);if(e.writing||e.corked){var h=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:r,isBuf:i,callback:o,next:null},h?h.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else y(t,e,!1,a,n,r,o);return u}(this,r,a,t,e,i)),s},m.prototype.cork=function(){this._writableState.corked++},m.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||R(this,t))},m.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(m.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),m.prototype._write=function(t,e,i){i(new Error("_write() is not implemented"))},m.prototype._writev=null,m.prototype.end=function(t,e,i){var n=this._writableState;"function"==typeof t?(i=t,t=null,e=null):"function"==typeof e&&(i=e,e=null),null!=t&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(t,e,i){e.ending=!0,O(t,e),i&&(e.finished?o.nextTick(i):t.once("finish",i));e.ended=!0,t.writable=!1}(this,n,i)},Object.defineProperty(m.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),m.prototype.destroy=v.destroy,m.prototype._undestroy=v.undestroy,m.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,i(0),i(24).setImmediate,i(7))},function(t,e){Object.defineProperty(Array.prototype,"includes",{value:function(t){return-1!==this.indexOf(t)},enumerable:!1,configurable:!1,writable:!1})},function(t,e,i){(function(e){var n=i(4),r=i(9),o=i(1).EventEmitter,s=i(2),a=i(5),u=a.constrain,h=a.fma,l=a.int16,c=a.sum,f=a.toFixed,p=new Map,d=10,v="x",g="y",E="z",m=[v,g,E];function y(t,e){var i=p.get(this),n={};i.zeroV=t.zeroV||this.DEFAULTS.zeroV,i.sensitivity=t.sensitivity||this.DEFAULTS.sensitivity,this.pins.forEach(function(t,i){this.io.pinMode(t,this.io.MODES.ANALOG),this.io.analogRead(t,function(t){var r=m[i];n[r]=t,e(n)}.bind(this))},this)}function b(t,e){var i=p.get(this),n=i.zeroV;Array.isArray(n)&&n.length>0&&(n=n[m.indexOf(e)||0]);return(t-n)/i.sensitivity}var R={ANALOG:{DEFAULTS:{value:{zeroV:478,sensitivity:96}},initialize:{value:y},toGravity:{value:b}},MPU6050:{initialize:{value:function(t,e){var n=i(3).Drivers.get(this.board,"MPU6050",t);p.get(this).sensitivity=t.sensitivity||16384,n.on("data",function(t){e(t.accelerometer)})}},toGravity:{value:function(t){var e=p.get(this);return f(t/e.sensitivity,3)}}},BNO055:{initialize:{value:function(t,e){var n=i(3).Drivers.get(this.board,"BNO055",t);p.get(this).sensitivity=100,n.on("data",function(t){e(t.accelerometer)})}},toGravity:{value:function(t){var e=p.get(this);return f(t/e.sensitivity,2)}}},ADXL335:{DEFAULTS:{value:{zeroV:330,sensitivity:66.5}},initialize:{value:y},toGravity:{value:function(t,e){var i=b.call(this,t,e);return f(i,3)}}},ADXL345:{ADDRESSES:{value:[83]},REGISTER:{value:{POWER:45,DATA_FORMAT:49,DATAX0:50}},initialize:{value:function(t,e){var i=t.address||this.ADDRESSES[0];t.address=i,this.io.i2cConfig(t),this.io.i2cWrite(i,this.REGISTER.POWER,0),this.io.i2cWrite(i,this.REGISTER.POWER,8);var n={2:0,4:1,8:2,16:3}[t.range||2];this.io.i2cWrite(i,this.REGISTER.DATA_FORMAT,8|n),this.io.i2cRead(i,this.REGISTER.DATAX0,6,function(t){e({x:l(t[1],t[0]),y:l(t[3],t[2]),z:l(t[5],t[4])})})}},toGravity:{value:function(t){return f(.00390625*t,8)}}},MMA7361:{DEFAULTS:{value:{zeroV:[372,372,287],sensitivity:170}},initialize:{value:function(t,e){var i=p.get(this);void 0!==t.sleepPin&&(i.sleepPin=t.sleepPin,this.io.pinMode(i.sleepPin,1),this.io.digitalWrite(i.sleepPin,1)),y.call(this,t,e)}},toGravity:{value:function(t,e){var i=b.call(this,t,e);return f(i,3)}},enabledChanged:{value:function(t){var e=p.get(this);void 0!==e.sleepPin&&this.io.digitalWrite(e.sleepPin,t?1:0)}}},MMA8452:{ADDRESSES:{value:[29]},REGISTER:{value:{STATUS:0,OUT_X_MSB:1,XYZ_DATA_CFG:14,PULSE_CFG:33,PULSE_SRC:34,PULSE_THSX:35,PULSE_THSY:36,PULSE_THSZ:37,PULSE_TMLT:38,PULSE_LTCY:39,PULSE_WIND:40,CTRL_REG1:42,CTRL_REG4:46,CTRL_REG5:47}},initialize:{value:function(t,e){var i=p.get(this),n=t.address||this.ADDRESSES[0];t.address=n;var r=[800,400,200,100,50,12,6],o=r.indexOf(t.odr||800),s=t.range||2,a={2:0,4:1,8:2}[s];t.taps=t.taps||{x:!1,y:!1,z:!0};var u={x:t.taps.x?8:128,y:t.taps.y?8:128,z:t.taps.z?8:128};i.scale=s;var h={x:null,y:null,z:null};if(this.io.i2cConfig(Object.assign(t,{settings:{stopTX:!1}})),-1===o)throw new RangeError("Invalid odr. Expected one of: 800,  400,  200,  100,  50,  12,  6");var c=8;c|=o<<3,this.io.i2cWriteReg(n,this.REGISTER.CTRL_REG1,c),this.io.i2cWriteReg(n,this.REGISTER.XYZ_DATA_CFG,a);var f=0;128&u.x||(f|=3,this.io.i2cWriteReg(n,this.REGISTER.PULSE_THSX,u.x)),128&u.y||(f|=12,this.io.i2cWriteReg(n,this.REGISTER.PULSE_THSY,u.y)),128&u.z||(f|=48,this.io.i2cWriteReg(n,this.REGISTER.PULSE_THSZ,u.z)),this.io.i2cWriteReg(n,this.REGISTER.PULSE_CFG,64|f),this.io.i2cWriteReg(n,this.REGISTER.PULSE_TMLT,60/(1e3/r[o])),this.io.i2cWriteReg(n,this.REGISTER.PULSE_LTCY,200/(1e3/r[o])),this.io.i2cWriteReg(n,this.REGISTER.PULSE_WIND,255),c|=1,this.io.i2cWriteReg(n,this.REGISTER.CTRL_REG1,c),this.io.i2cRead(n,this.REGISTER.STATUS,7,function(t){(8&t.shift())>>>3&&(h.x=l(t[0],t[1])>>4,h.y=l(t[2],t[3])>>4,h.z=l(t[4],t[5])>>4,e(h))}.bind(this)),this.io.i2cRead(n,this.REGISTER.PULSE_SRC,1,function(t){var e=t[0],i=127&e;128&e&&(this.emit("tap"),i>>2&1&&(this.emit("tap:single"),i>>3&1&&this.emit("tap:double")))}.bind(this))}},toGravity:{value:function(t){var e=p.get(this);return f(t/(2048*e.scale),4)}}},MMA7660:{ADDRESSES:{value:[76]},REGISTER:{value:{XOUT:0,MODE:7,SR:8}},initialize:{value:function(t,e){var i=t.address||this.ADDRESSES[0];p.get(this).sensitivity=21.33,t.address=i,this.io.i2cConfig(t),this.io.i2cWrite(i,this.REGISTER.MODE,0),this.io.i2cWrite(i,this.REGISTER.SR,7),this.io.i2cWrite(i,this.REGISTER.MODE,1),this.io.i2cRead(i,this.REGISTER.XOUT,3,function(t){e({x:63&t[0],y:63&t[1],z:63&t[2]})})}},toGravity:{value:function(t){var e=p.get(this);return f(t/e.sensitivity,3)}}},ESPLORA:{DEFAULTS:{value:{zeroV:[320,330,310],sensitivity:170}},initialize:{value:function(t,e){this.pins=[5,11,6],y.call(this,t,e)}},toGravity:{value:function(t,e){var i=b.call(this,t,e);return f(i,2)}}},LIS3DH:{ADDRESSES:{value:[24]},REGISTER:{value:{OUT_X_L:40,CTRL_REG1:32,CTRL_REG2:33,CTRL_REG3:34,CTRL_REG4:35,CTRL_REG5:36,TEMP_CFG_REG:31,CLICK_CFG:56,CLICK_SRC:57,CLICK_THS:58,TIME_LIMIT:59,TIME_LATENCY:60,TIME_WINDOW:61}},initialize:{value:function(t,e){var i=p.get(this),n=t.address||24,o={2:0,4:1,8:2,16:3}[t.range||4];void 0===o&&(o=1);var s=[16380,8190,4096,1365][o];void 0===s&&(s=1);var u=[80,40,20,10][o];void 0===u&&(u=10),i.divider=s,i.expander=r.get({address:n,controller:this.controller,bus:this.bus});var h=136|o<<4;i.expander.i2cWrite(n,this.REGISTER.CTRL_REG4,h),i.expander.i2cReadOnce(n,this.REGISTER.CTRL_REG1,1,function(t){var r=t[0];r&=-241,r|=96,i.expander.i2cWrite(n,this.REGISTER.CTRL_REG1,r),i.expander.i2cRead(n,128|this.REGISTER.OUT_X_L,6,function(t){e({x:a.int16(t[1],t[0]),y:a.int16(t[3],t[2]),z:a.int16(t[5],t[4])})}),i.expander.i2cWrite(n,this.REGISTER.CTRL_REG3,128),i.expander.i2cWrite(n,this.REGISTER.CTRL_REG5,8),i.expander.i2cWrite(n,this.REGISTER.CLICK_CFG,42);i.expander.i2cWrite(n,this.REGISTER.CLICK_THS,u),i.expander.i2cWrite(n,this.REGISTER.TIME_LIMIT,10),i.expander.i2cWrite(n,this.REGISTER.TIME_LATENCY,20),i.expander.i2cWrite(n,this.REGISTER.TIME_WINDOW,255);var o=null;i.expander.i2cRead(n,this.REGISTER.CLICK_SRC,1,function(t){var e=t[0],i=Date.now();null===o&&(o=i-101),i<o+100||0!==e&&48&e&&(o=i,this.emit("tap"),16&e&&this.emit("tap:single"),32&e&&(this.emit("tap:single"),this.emit("tap:double")))}.bind(this))}.bind(this))}},toGravity:{value:function(t){var e=p.get(this);return f(t/e.divider,3)}}},LSM303C:{initialize:{value:function(t,e){i(3).Drivers.get(this.board,"LSM303C",t).on("data",function(t){e(t.accelerometer)})}},toGravity:{value:function(t){return f(t,2)}}}};function S(t){if(!(this instanceof S))return new S(t);var e=null,i={enabled:!0,x:{value:0,previous:0,stash:[],orientation:null,inclination:null,acceleration:null,calibration:[]},y:{value:0,previous:0,stash:[],orientation:null,inclination:null,acceleration:null,calibration:[]},z:{value:0,previous:0,stash:[],orientation:null,inclination:null,acceleration:null,calibration:[]}};n.Component.call(this,t=n.Options(t)),null==(e=t.controller&&"string"==typeof t.controller?R[t.controller.toUpperCase()]:t.controller)&&(e=R.ANALOG),n.Controller.call(this,e,t),this.toGravity||(this.toGravity=t.toGravity||function(t){return t}),this.enabledChanged||(this.enabledChanged=function(){}),p.set(this,i),"function"==typeof this.initialize&&this.initialize(t,function(e){var n=!1;i.enabled&&(Object.keys(e).forEach(function(r){var o=e[r],s=i[r];if(t.autoCalibrate&&s.calibration.length<d){var a=m.indexOf(r);s.calibration.push(o),Array.isArray(i.zeroV)||(i.zeroV=[]),i.zeroV[a]=c(s.calibration)/s.calibration.length,r===E&&(i.zeroV[a]-=i.sensitivity)}if(0===s.stash.length)for(var u=0;u<5;u++)s.stash[u]=o;s.previous=s.value,s.stash.shift(),s.stash.push(o),s.value=c(s.stash)/5|0,this.acceleration!==s.acceleration&&(s.acceleration=this.acceleration,n=!0,this.emit("acceleration",s.acceleration)),this.orientation!==s.orientation&&(s.orientation=this.orientation,n=!0,this.emit("orientation",s.orientation)),this.inclination!==s.inclination&&(s.inclination=this.inclination,n=!0,this.emit("inclination",s.inclination))},this),this.emit("data",{x:i.x.value,y:i.y.value,z:i.z.value}),n&&this.emit("change",{x:this.x,y:this.y,z:this.z}))}.bind(this)),Object.defineProperties(this,{hasAxis:{writable:!0,value:function(t){return!!i[t]&&i[t].stash.length>0}},enable:{value:function(){return i.enabled=!0,this.enabledChanged(!0),this}},disable:{value:function(){return i.enabled=!1,this.enabledChanged(!1),this}},zeroV:{get:function(){return i.zeroV}},pitch:{get:function(){var t=this.x,e=this.y,i=this.z,n=this.hasAxis(E)?Math.atan2(t,Math.hypot(e,i)):Math.asin(u(t,-1,1));return f(n*a.RAD_TO_DEG,2)}},roll:{get:function(){var t=this.x,e=this.y,i=this.z,n=this.hasAxis(E)?Math.atan2(e,Math.hypot(t,i)):Math.asin(u(e,-1,1));return f(n*a.RAD_TO_DEG,2)}},x:{get:function(){return this.toGravity(i.x.value,v)}},y:{get:function(){return this.toGravity(i.y.value,g)}},z:{get:function(){return this.hasAxis(E)?this.toGravity(i.z.value,E):0}},acceleration:{get:function(){return t=this.x,e=this.y,i=this.z,n=h(e,e,n=t*t),n=h(i,i,n),Math.sqrt(n);var t,e,i,n}},inclination:{get:function(){return Math.atan2(this.y,this.x)*a.RAD_TO_DEG}},orientation:{get:function(){var t=Math.abs,e=this.x,i=this.y,n=this.hasAxis(E)?this.z:1,r=t(e),o=t(i),s=t(n);return r<o&&r<s?e>0?1:-1:o<r&&o<s?i>0?2:-2:s<r&&s<o?n>0?3:-3:0}}})}R.TINKERKIT=R.ANALOG,R.MMA8452Q=R.MMA8452,s.inherits(S,o),e.env.IS_TEST_MODE&&(S.Controllers=R,S.purge=function(){p.clear()}),t.exports=S}).call(this,i(0))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,i){var n=i(31),r={};for(var o in n)n.hasOwnProperty(o)&&(r[n[o]]=o);var s=t.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var a in s)if(s.hasOwnProperty(a)){if(!("channels"in s[a]))throw new Error("missing channels property: "+a);if(!("labels"in s[a]))throw new Error("missing channel labels property: "+a);if(s[a].labels.length!==s[a].channels)throw new Error("channel and label counts mismatch: "+a);var u=s[a].channels,h=s[a].labels;delete s[a].channels,delete s[a].labels,Object.defineProperty(s[a],"channels",{value:u}),Object.defineProperty(s[a],"labels",{value:h})}s.rgb.hsl=function(t){var e,i,n=t[0]/255,r=t[1]/255,o=t[2]/255,s=Math.min(n,r,o),a=Math.max(n,r,o),u=a-s;return a===s?e=0:n===a?e=(r-o)/u:r===a?e=2+(o-n)/u:o===a&&(e=4+(n-r)/u),(e=Math.min(60*e,360))<0&&(e+=360),i=(s+a)/2,[e,100*(a===s?0:i<=.5?u/(a+s):u/(2-a-s)),100*i]},s.rgb.hsv=function(t){var e,i,n,r,o,s=t[0]/255,a=t[1]/255,u=t[2]/255,h=Math.max(s,a,u),l=h-Math.min(s,a,u),c=function(t){return(h-t)/6/l+.5};return 0===l?r=o=0:(o=l/h,e=c(s),i=c(a),n=c(u),s===h?r=n-i:a===h?r=1/3+e-n:u===h&&(r=2/3+i-e),r<0?r+=1:r>1&&(r-=1)),[360*r,100*o,100*h]},s.rgb.hwb=function(t){var e=t[0],i=t[1],n=t[2];return[s.rgb.hsl(t)[0],100*(1/255*Math.min(e,Math.min(i,n))),100*(n=1-1/255*Math.max(e,Math.max(i,n)))]},s.rgb.cmyk=function(t){var e,i=t[0]/255,n=t[1]/255,r=t[2]/255;return[100*((1-i-(e=Math.min(1-i,1-n,1-r)))/(1-e)||0),100*((1-n-e)/(1-e)||0),100*((1-r-e)/(1-e)||0),100*e]},s.rgb.keyword=function(t){var e=r[t];if(e)return e;var i,o,s,a=1/0;for(var u in n)if(n.hasOwnProperty(u)){var h=n[u],l=(o=t,s=h,Math.pow(o[0]-s[0],2)+Math.pow(o[1]-s[1],2)+Math.pow(o[2]-s[2],2));l<a&&(a=l,i=u)}return i},s.keyword.rgb=function(t){return n[t]},s.rgb.xyz=function(t){var e=t[0]/255,i=t[1]/255,n=t[2]/255;return[100*(.4124*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3576*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)+.1805*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)),100*(.2126*e+.7152*i+.0722*n),100*(.0193*e+.1192*i+.9505*n)]},s.rgb.lab=function(t){var e=s.rgb.xyz(t),i=e[0],n=e[1],r=e[2];return n/=100,r/=108.883,i=(i/=95.047)>.008856?Math.pow(i,1/3):7.787*i+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(i-n),200*(n-(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116))]},s.hsl.rgb=function(t){var e,i,n,r,o,s=t[0]/360,a=t[1]/100,u=t[2]/100;if(0===a)return[o=255*u,o,o];e=2*u-(i=u<.5?u*(1+a):u+a-u*a),r=[0,0,0];for(var h=0;h<3;h++)(n=s+1/3*-(h-1))<0&&n++,n>1&&n--,o=6*n<1?e+6*(i-e)*n:2*n<1?i:3*n<2?e+(i-e)*(2/3-n)*6:e,r[h]=255*o;return r},s.hsl.hsv=function(t){var e=t[0],i=t[1]/100,n=t[2]/100,r=i,o=Math.max(n,.01);return i*=(n*=2)<=1?n:2-n,r*=o<=1?o:2-o,[e,100*(0===n?2*r/(o+r):2*i/(n+i)),100*((n+i)/2)]},s.hsv.rgb=function(t){var e=t[0]/60,i=t[1]/100,n=t[2]/100,r=Math.floor(e)%6,o=e-Math.floor(e),s=255*n*(1-i),a=255*n*(1-i*o),u=255*n*(1-i*(1-o));switch(n*=255,r){case 0:return[n,u,s];case 1:return[a,n,s];case 2:return[s,n,u];case 3:return[s,a,n];case 4:return[u,s,n];case 5:return[n,s,a]}},s.hsv.hsl=function(t){var e,i,n,r=t[0],o=t[1]/100,s=t[2]/100,a=Math.max(s,.01);return n=(2-o)*s,i=o*a,[r,100*(i=(i/=(e=(2-o)*a)<=1?e:2-e)||0),100*(n/=2)]},s.hwb.rgb=function(t){var e,i,n,r,o,s,a,u=t[0]/360,h=t[1]/100,l=t[2]/100,c=h+l;switch(c>1&&(h/=c,l/=c),n=6*u-(e=Math.floor(6*u)),0!=(1&e)&&(n=1-n),r=h+n*((i=1-l)-h),e){default:case 6:case 0:o=i,s=r,a=h;break;case 1:o=r,s=i,a=h;break;case 2:o=h,s=i,a=r;break;case 3:o=h,s=r,a=i;break;case 4:o=r,s=h,a=i;break;case 5:o=i,s=h,a=r}return[255*o,255*s,255*a]},s.cmyk.rgb=function(t){var e=t[0]/100,i=t[1]/100,n=t[2]/100,r=t[3]/100;return[255*(1-Math.min(1,e*(1-r)+r)),255*(1-Math.min(1,i*(1-r)+r)),255*(1-Math.min(1,n*(1-r)+r))]},s.xyz.rgb=function(t){var e,i,n,r=t[0]/100,o=t[1]/100,s=t[2]/100;return i=-.9689*r+1.8758*o+.0415*s,n=.0557*r+-.204*o+1.057*s,e=(e=3.2406*r+-1.5372*o+-.4986*s)>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:12.92*i,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,[255*(e=Math.min(Math.max(0,e),1)),255*(i=Math.min(Math.max(0,i),1)),255*(n=Math.min(Math.max(0,n),1))]},s.xyz.lab=function(t){var e=t[0],i=t[1],n=t[2];return i/=100,n/=108.883,e=(e/=95.047)>.008856?Math.pow(e,1/3):7.787*e+16/116,[116*(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116)-16,500*(e-i),200*(i-(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116))]},s.lab.xyz=function(t){var e,i,n,r=t[0];e=t[1]/500+(i=(r+16)/116),n=i-t[2]/200;var o=Math.pow(i,3),s=Math.pow(e,3),a=Math.pow(n,3);return i=o>.008856?o:(i-16/116)/7.787,e=s>.008856?s:(e-16/116)/7.787,n=a>.008856?a:(n-16/116)/7.787,[e*=95.047,i*=100,n*=108.883]},s.lab.lch=function(t){var e,i=t[0],n=t[1],r=t[2];return(e=360*Math.atan2(r,n)/2/Math.PI)<0&&(e+=360),[i,Math.sqrt(n*n+r*r),e]},s.lch.lab=function(t){var e,i=t[0],n=t[1];return e=t[2]/360*2*Math.PI,[i,n*Math.cos(e),n*Math.sin(e)]},s.rgb.ansi16=function(t){var e=t[0],i=t[1],n=t[2],r=1 in arguments?arguments[1]:s.rgb.hsv(t)[2];if(0===(r=Math.round(r/50)))return 30;var o=30+(Math.round(n/255)<<2|Math.round(i/255)<<1|Math.round(e/255));return 2===r&&(o+=60),o},s.hsv.ansi16=function(t){return s.rgb.ansi16(s.hsv.rgb(t),t[2])},s.rgb.ansi256=function(t){var e=t[0],i=t[1],n=t[2];return e===i&&i===n?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(i/255*5)+Math.round(n/255*5)},s.ansi16.rgb=function(t){var e=t%10;if(0===e||7===e)return t>50&&(e+=3.5),[e=e/10.5*255,e,e];var i=.5*(1+~~(t>50));return[(1&e)*i*255,(e>>1&1)*i*255,(e>>2&1)*i*255]},s.ansi256.rgb=function(t){if(t>=232){var e=10*(t-232)+8;return[e,e,e]}var i;return t-=16,[Math.floor(t/36)/5*255,Math.floor((i=t%36)/6)/5*255,i%6/5*255]},s.rgb.hex=function(t){var e=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase();return"000000".substring(e.length)+e},s.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var i=e[0];3===e[0].length&&(i=i.split("").map(function(t){return t+t}).join(""));var n=parseInt(i,16);return[n>>16&255,n>>8&255,255&n]},s.rgb.hcg=function(t){var e,i=t[0]/255,n=t[1]/255,r=t[2]/255,o=Math.max(Math.max(i,n),r),s=Math.min(Math.min(i,n),r),a=o-s;return e=a<=0?0:o===i?(n-r)/a%6:o===n?2+(r-i)/a:4+(i-n)/a+4,e/=6,[360*(e%=1),100*a,100*(a<1?s/(1-a):0)]},s.hsl.hcg=function(t){var e=t[1]/100,i=t[2]/100,n=1,r=0;return(n=i<.5?2*e*i:2*e*(1-i))<1&&(r=(i-.5*n)/(1-n)),[t[0],100*n,100*r]},s.hsv.hcg=function(t){var e=t[1]/100,i=t[2]/100,n=e*i,r=0;return n<1&&(r=(i-n)/(1-n)),[t[0],100*n,100*r]},s.hcg.rgb=function(t){var e=t[0]/360,i=t[1]/100,n=t[2]/100;if(0===i)return[255*n,255*n,255*n];var r,o=[0,0,0],s=e%1*6,a=s%1,u=1-a;switch(Math.floor(s)){case 0:o[0]=1,o[1]=a,o[2]=0;break;case 1:o[0]=u,o[1]=1,o[2]=0;break;case 2:o[0]=0,o[1]=1,o[2]=a;break;case 3:o[0]=0,o[1]=u,o[2]=1;break;case 4:o[0]=a,o[1]=0,o[2]=1;break;default:o[0]=1,o[1]=0,o[2]=u}return r=(1-i)*n,[255*(i*o[0]+r),255*(i*o[1]+r),255*(i*o[2]+r)]},s.hcg.hsv=function(t){var e=t[1]/100,i=e+t[2]/100*(1-e),n=0;return i>0&&(n=e/i),[t[0],100*n,100*i]},s.hcg.hsl=function(t){var e=t[1]/100,i=t[2]/100*(1-e)+.5*e,n=0;return i>0&&i<.5?n=e/(2*i):i>=.5&&i<1&&(n=e/(2*(1-i))),[t[0],100*n,100*i]},s.hcg.hwb=function(t){var e=t[1]/100,i=e+t[2]/100*(1-e);return[t[0],100*(i-e),100*(1-i)]},s.hwb.hcg=function(t){var e=t[1]/100,i=1-t[2]/100,n=i-e,r=0;return n<1&&(r=(i-n)/(1-n)),[t[0],100*n,100*r]},s.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},s.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},s.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},s.gray.hsl=s.gray.hsv=function(t){return[0,0,t[0]]},s.gray.hwb=function(t){return[0,100,t[0]]},s.gray.cmyk=function(t){return[0,0,0,t[0]]},s.gray.lab=function(t){return[t[0],0,0]},s.gray.hex=function(t){var e=255&Math.round(t[0]/100*255),i=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(i.length)+i},s.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]}},function(t,e,i){"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(t,e,i){(function(e){var n=i(1).EventEmitter,r=i(16),o=i(2),s=new Map;function a(t){if(a.isActive)return a.ref;if(a.isActive=!0,!(this instanceof a))return new a(t);this.context={},this.ready=!1;var e={opts:t,board:t.board};s.set(this,e),a.ref=this}o.inherits(a,n),a.isActive=!1,a.isBlocked=!1,a.ref=null,a.prototype.initialize=function(t){var i=s.get(this);e.stdin.resume(),e.stdin.setEncoding("utf8");i.board.info("Repl","Initialized");var n=r.start({prompt:">> ",useGlobal:!1});this.ready=!0,this.cmd=n,this.context=n.context,n.on("exit",function(){i.board.emit("exit"),i.board.warn("Board","Closing.");var t=setTimeout(function(){e.reallyExit()},1e3),n=setInterval(function(){var r=!1;if(i.board.length){for(let t=0;t<i.board.length;t++)if(i.board[t].io.pending){r=!0;break}}else r=i.board.io.pending;r||(clearInterval(n),clearTimeout(t),e.nextTick(e.reallyExit))},1)}),this.inject(i.opts),t&&e.nextTick(t)},a.prototype.close=function(){this.cmd.emit("exit")},a.prototype.inject=function(t){Object.keys(t).forEach(function(e){Object.defineProperty(this.context,e,Object.getOwnPropertyDescriptor(t,e))},this)},t.exports=a}).call(this,i(0))},function(t,e){t.exports=function t(e){if(!(this instanceof t))return new t(e);var i={};"number"==typeof e||"string"==typeof e?i.pin=e:Array.isArray(e)?i.pins=e:i=e,Object.assign(this,i)}},function(t,e){var i={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},function(t,e,i){"use strict";t.exports={to7BitArray(t){let e=0,i=0;const n=[];return t.forEach(t=>{0===e?(n.push(127&t),e++,i=t>>7):(n.push(t<<e&127|i),6===e?(n.push(t>>1),e=0):i=t>>8-++e)}),e>0&&n.push(i),n},from7BitArray(t){const e=7*t.length>>3,i=[];for(let n=0;n<e;n++){const e=n<<3,r=parseInt(e/7,10),o=e%7;i[n]=t[r]>>o|t[r+1]<<7-o&255}return i}}},function(t,e,i){(function(e){var n=i(4),r=i(5),o=i(1).EventEmitter,s=i(2),a={MPL3115A2:{requirements:{value:{options:{elevation:{throws:!1,message:"Missing `elevation` option. Without a specified base `elevation`, the altitude measurement will be inaccurate. Use the meters value shown on whatismyelevation.com",typeof:"number"}}}},initialize:{value:function(t,e){i(3).Drivers.get(this.board,"MPL3115A2",t).on("data",function(t){e(t.altitude)})}},toMeters:{value:function(t){return r.toFixed(t,1)}}},MS5611:{initialize:{value:function(t,e){i(3).Drivers.get(this.board,"MS5611",t).on("data",function(t){e(t.altitude)})}},toMeters:{value:function(t){return r.toFixed(t,2)}}},BMP180:{initialize:{value:function(t,e){i(3).Drivers.get(this.board,"BMP180",t).on("data",function(t){e(t.altitude)})}},toMeters:{value:function(t){return r.toFixed(t,2)}}},BMP280:{initialize:{value:function(t,e){i(3).Drivers.get(this.board,"BMP280",t).on("data",function(t){e(t.altitude)})}},toMeters:{value:function(t){return r.toFixed(t,3)}}},BME280:{initialize:{value:function(t,e){i(3).Drivers.get(this.board,"BME280",t).on("data",function(t){e(t.altitude)})}},toMeters:{value:function(t){return r.toFixed(t,3)}}}};a.BMP085=a["BMP-085"]=a.BMP180;var u=new Map;function h(t){if(!(this instanceof h))return new h(t);var e,i=null,o=null,s=null;if(n.Component.call(this,t=n.Options(t)),e=t.freq||25,null==(i=t.controller&&"string"==typeof t.controller?a[t.controller.toUpperCase()]:t.controller))throw new Error("Altimeter expects a valid controller");u.set(this,{}),n.Controller.call(this,i,t),this.toMeters||(this.toMeters=t.toMeters||function(t){return t});var l={meters:{get:function(){return this.toMeters(s)}},feet:{get:function(){return r.toFixed(3.28084*this.meters,2)}}};l.m=l.meters,l.ft=l.feet,Object.defineProperties(this,l),"function"==typeof this.initialize&&this.initialize(t,function(t){s=t}),setInterval(function(){if(null!=s){var t={};t.m=t.meters=this.meters,t.ft=t.feet=this.feet,this.emit("data",t),this.meters!==o&&(o=this.meters,this.emit("change",t))}}.bind(this),e)}s.inherits(h,o),e.env.IS_TEST_MODE&&(h.Controllers=a,h.purge=function(){u.clear()}),t.exports=h}).call(this,i(0))},function(t,e,i){(function(e){var n=i(1).EventEmitter,r=i(2),o=i(4),s=i(5).toFixed,a={MPL115A2:{initialize:{value:function(t,e){i(3).Drivers.get(this.board,"MPL115A2",t).on("data",function(t){e.call(this,t.pressure)}.bind(this))}},toPressure:{value:function(t){return s(65/1023*t+50,2)}}},MPL3115A2:{initialize:{value:function(t,e){i(3).Drivers.get(this.board,"MPL3115A2",t).on("data",function(t){e.call(this,t.pressure)}.bind(this))}},toPressure:{value:function(t){return s(3.39*(t/4/3377),4)}}},BMP180:{initialize:{value:function(t,e){i(3).Drivers.get(this.board,"BMP180",t).on("data",function(t){e.call(this,t.pressure)}.bind(this))}},toPressure:{value:function(t){return s(t/1e3,3)}}},BMP280:{initialize:{value:function(t,e){i(3).Drivers.get(this.board,"BMP280",t).on("data",function(t){e.call(this,t.pressure)}.bind(this))}},toPressure:{value:function(t){return s(t/1e3,5)}}},BME280:{initialize:{value:function(t,e){i(3).Drivers.get(this.board,"BME280",t).on("data",function(t){e.call(this,t.pressure)}.bind(this))}},toPressure:{value:function(t){return s(t/1e3,5)}}},MS5611:{initialize:{value:function(t,e){i(3).Drivers.get(this.board,"MS5611",t).on("data",function(t){e.call(this,t.pressure)}.bind(this))}},toPressure:{value:function(t){return s(t/1e3,4)}}}};function u(t){if(!(this instanceof u))return new u(t);var e=null,i=null,n=null;o.Component.call(this,t=o.Options(t));var r=t.freq||25;if(null==(e=t.controller&&"string"==typeof t.controller?a[t.controller.toUpperCase()]:t.controller))throw new Error("Missing Barometer controller");o.Controller.call(this,e,t),this.toPressure||(this.toPressure=t.toPressure||function(t){return t}),"function"==typeof this.initialize&&this.initialize(t,function(t){n=t}),Object.defineProperties(this,{pressure:{get:function(){return this.toPressure(n)}}}),setInterval(function(){if(null!==n){var t={pressure:this.pressure};this.emit("data",t),this.pressure!==i&&(i=this.pressure,this.emit("change",t))}}.bind(this),r)}a.BMP085=a.BMP180,r.inherits(u,n),e.env.IS_TEST_MODE&&(u.Controllers=a,u.purge=function(){}),t.exports=u}).call(this,i(0))},function(t,e,i){(function(e){var n=i(4),r=i(1),o=i(2),s=i(5),a=s.sum,u=s.toFixed,h=new Map,l=["x","y","z"],c={ANALOG:{initialize:{value:function(t,e){var i,n,r=t.pins||[],o=h.get(this),s={};if(void 0===t.sensitivity)throw new Error("Expected a Sensitivity");i=t.sensitivity,n=t.resolution||4.88,o.K=n/i,r.forEach(function(t,i){this.io.pinMode(t,this.io.MODES.ANALOG),this.io.analogRead(t,function(t){s[l[i]]=t,e(s)}.bind(this))},this)}},toNormal:{value:function(t){return t>>2}},toDegreesPerSecond:{value:function(t,e){return(this.toNormal(t)-this.toNormal(e))*h.get(this).K|0}}},MPU6050:{initialize:{value:function(t,e){var n=i(3),r=h.get(this),o=n.Drivers.get(this.board,"MPU6050",t);r.sensitivity=t.sensitivity||131,o.on("data",function(t){e(t.gyro)})}},toNormal:{value:function(t){return 127+(t>>11)}},toDegreesPerSecond:{value:function(t,e){var i=h.get(this);return u((t-e)/i.sensitivity,4)}}},BNO055:{initialize:{value:function(t,e){var n=i(3),r=h.get(this),o=n.Drivers.get(this.board,"BNO055",t);r.sensitivity=16,o.on("data",function(t){e(t.gyro)})}},toNormal:{value:function(t){return t}},toDegreesPerSecond:{value:function(t){var e=h.get(this);return u(t/e.sensitivity,4)}}}};function f(t){if(!(this instanceof f))return new f(t);var e=null,i=!1,r={x:{angle:0,value:0,previous:0,calibration:[],stash:[0,0,0,0,0],center:0,hasValue:!1},y:{angle:0,value:0,previous:0,calibration:[],stash:[0,0,0,0,0],center:0,hasValue:!1},z:{angle:0,value:0,previous:0,calibration:[],stash:[0,0,0,0,0],center:0,hasValue:!1}};n.Component.call(this,t=n.Options(t)),null==(e=t.controller&&"string"==typeof t.controller?c[t.controller.toUpperCase()]:t.controller)&&(e=c.ANALOG),n.Controller.call(this,e,t),this.toNormal||(this.toNormal=t.toNormal||function(t){return t}),this.toDegreesPerSecond||(this.toDegreesPerSecond=t.toDegreesPerSecond||function(t){return t}),h.set(this,r),"function"==typeof this.initialize&&this.initialize(t,function(t){var e=!1;Object.keys(t).forEach(function(n){var o=t[n],s=r[n];s.previous=s.value,s.stash.shift(),s.stash.push(o),s.hasValue=!0,s.value=a(s.stash)/5|0,i||100!==r.x.calibration.length||100!==r.y.calibration.length||void 0!==this.z&&100!==r.z.calibration.length?s.calibration.length<100&&s.calibration.push(o):(i=!0,r.x.center=a(r.x.calibration)/100|0,r.y.center=a(r.y.calibration)/100|0,r.z.center=a(r.z.calibration)/100|0,r.x.calibration.length=0,r.y.calibration.length=0,r.z.calibration.length=0),s.previous!==s.value&&(e=!0)},this),i&&(r.x.angle+=this.rate.x/100,r.y.angle+=this.rate.y/100,r.z.angle+=this.rate.z/100,this.emit("data",{x:this.x,y:this.y,z:this.z}),e&&this.emit("change",{x:this.x,y:this.y,z:this.z}))}.bind(this)),Object.defineProperties(this,{isCalibrated:{get:function(){return i},set:function(t){"boolean"==typeof t&&(i=t)}},pitch:{get:function(){return{rate:u(this.rate.y,2),angle:u(r.y.angle,2)}}},roll:{get:function(){return{rate:u(this.rate.x,2),angle:u(r.x.angle,2)}}},yaw:{get:function(){return{rate:void 0!==this.z?u(this.rate.z,2):0,angle:void 0!==this.z?u(r.z.angle,2):0}}},x:{get:function(){return u(this.toNormal(r.x.value),4)}},y:{get:function(){return u(this.toNormal(r.y.value),4)}},z:{get:function(){return r.z.hasValue?u(this.toNormal(r.z.value),4):void 0}},rate:{get:function(){return{x:this.toDegreesPerSecond(r.x.value,r.x.center),y:this.toDegreesPerSecond(r.y.value,r.y.center),z:r.z.hasValue?this.toDegreesPerSecond(r.z.value,r.z.center):0}}}})}Object.defineProperties(f,{TK_4X:{value:.67},TK_1X:{value:.167}}),o.inherits(f,r.EventEmitter),f.prototype.recalibrate=function(){this.isCalibrated=!1},e.env.IS_TEST_MODE&&(f.Controllers=c,f.purge=function(){h.clear()}),t.exports=f}).call(this,i(0))},function(t,e,i){(function(e){var n=i(4),r=i(5),o=i(1).EventEmitter,s=i(2),a=r.toFixed,u=new Map,h={SHT31D:{initialize:{value:function(t,e){i(3).Drivers.get(this.board,"SHT31D",t).on("data",function(t){e(t.humidity)})}},toRelativeHumidity:{value:function(t){return a(100*t/65535,2)}}},HTU21D:{initialize:{value:function(t,e){i(3).Drivers.get(this.board,"HTU21D",t).on("data",function(t){e(t.humidity)})}},toRelativeHumidity:{value:function(t){return a(125*t/65536-6,2)}}},HIH6130:{initialize:{value:function(t,e){i(3).Drivers.get(this.board,"HIH6130",t).on("data",function(t){e(t.humidity)})}},toRelativeHumidity:{value:function(t){return a(100*t/(r.POW_2_14-1),2)}}},DHT_I2C_NANO_BACKPACK:{initialize:{value:function(t,e){i(3).Drivers.get(this.board,"DHT_I2C_NANO_BACKPACK",t).on("data",function(t){e(t.humidity)})}},toRelativeHumidity:{value:function(t){return a(t/100,1)}}},TH02:{initialize:{value:function(t,e){i(3).Drivers.get(this.board,"TH02",t).on("data",function(t){e(t.humidity)})}},toRelativeHumidity:{value:function(t){return t>100&&(t=0),a(t||0,2)}}},SI7020:{initialize:{value:function(t,e){i(3).Drivers.get(this.board,"SI7020",t).on("data",function(t){e(t.humidity)})}},toRelativeHumidity:{value:function(t){return a(125*t/65536-6,2)}}},BME280:{initialize:{value:function(t,e){i(3).Drivers.get(this.board,"BME280",t).on("data",function(t){e(t.humidity)})}},toRelativeHumidity:{value:function(t){return a(t/1024,3)}}}};function l(t){if(!(this instanceof l))return new l(t);var e=null,i=null,r=null;n.Component.call(this,t=n.Options(t));var o=t.freq||25;if(null==(e=t.controller&&"string"==typeof t.controller?h[t.controller.toUpperCase()]:t.controller))throw new Error("Missing Hygrometer controller");u.set(this,{}),n.Controller.call(this,e,t),this.toRelativeHumidity||(this.toRelativeHumidity=t.toRelativeHumidity||function(t){return t});var s={relativeHumidity:{get:function(){return this.toRelativeHumidity(r)}}};s.RH=s.relativeHumidity,Object.defineProperties(this,s),"function"==typeof this.initialize&&this.initialize(t,function(t){r=t}),setInterval(function(){if(null!=r&&!Number.isNaN(this.relativeHumidity)){var t={};t.RH=t.relativeHumidity=this.relativeHumidity,this.emit("data",t),this.relativeHumidity!==i&&(i=this.relativeHumidity,this.emit("change",t))}}.bind(this),o)}h.DHT11_I2C_NANO_BACKPACK=h.DHT_I2C_NANO_BACKPACK,h.DHT21_I2C_NANO_BACKPACK=h.DHT_I2C_NANO_BACKPACK,h.DHT22_I2C_NANO_BACKPACK=h.DHT_I2C_NANO_BACKPACK,h.SI7021=h.SI7020,s.inherits(l,o),e.env.IS_TEST_MODE&&(l.Controllers=h,l.purge=function(){u.clear()}),t.exports=l}).call(this,i(0))},function(t,e,i){(function(e){var n=i(4),r=i(1).EventEmitter,o=i(2),s=i(5),a=s.int16,u=s.TAU,h=new Map,l={HMC5883L:{REGISTER:{value:{CRA:0,CRB:1,MODE:2,READ:3}},initialize:{value:function(t,e){var i=h.get(this),n=t.address||30;i.scale=1,Object.assign(i,new c.Scale(t.gauss||.88)),t.address=n,this.io.i2cConfig(t),this.io.i2cWrite(n,this.REGISTER.CRA,112),this.io.i2cWrite(n,this.REGISTER.CRB,64),this.io.i2cWrite(n,this.REGISTER.MODE,0),this.io.i2cRead(n,this.REGISTER.READ,6,function(t){e({x:a(t[0],t[1]),y:a(t[4],t[5]),z:a(t[2],t[3])})})}},toScaledHeading:{value:function(t){var e=h.get(this);return f(t.x*e.scale,t.y*e.scale)}}},HMC6352:{REGISTER:{value:{READ:65}},initialize:{value:function(t,e){var i=h.get(this),n=t.address||33;i.scale=1,t.delay=10,t.address=n,this.io.i2cConfig(t),this.io.i2cWrite(n,this.REGISTER.READ),this.io.i2cRead(n,this.REGISTER.READ,2,function(t){e({x:((t[0]<<8)+t[1])/10|0,y:null,z:null})})}},toScaledHeading:{value:function(t){var e=h.get(this);return t.x*e.scale}}},BNO055:{initialize:{value:function(t,e){var n=i(3).Drivers.get(this.board,"BNO055",t);h.get(this).sensitivity=16,n.on("data",function(t){e(t.magnetometer)})}},toScaledHeading:{value:function(t){var e=h.get(this);return f(t.x/e.sensitivity,t.y/e.sensitivity)}}},MAG3110:{REGISTER:{value:{STATUS:0,READ:1,OFFSETS:9,CTRL_REG1:16,CTRL_REG2:17}},initialize:{value:function(t,e){var i,n=h.get(this),r=!1;n.isCalibrated=!1,n.isPreCalibrated=!1,n.hasEmittedCalibration=!1,n.measurements=20,n.offsets={x:0,y:0,z:0},n.accum={x:{offset:null,high:0,low:0},y:{offset:null,high:0,low:0},z:{offset:null,high:0,low:0}},t.delay=2,t.address=14,t.offsets&&(n.isCalibrated=!0,n.isPreCalibrated=!0,Array.isArray(t.offsets)&&(i=t.offsets.slice(),t.offsets={x:i[0],y:i[1],z:i[2]}),n.accum.x.low=t.offsets.x[0],n.accum.x.high=t.offsets.x[1],n.accum.x.offset=(n.accum.x.low+n.accum.x.high)/2,n.accum.y.low=t.offsets.y[0],n.accum.y.high=t.offsets.y[1],n.accum.y.offset=(n.accum.y.low+n.accum.y.high)/2,n.accum.z.low=t.offsets.z[0],n.accum.z.high=t.offsets.z[1],n.accum.z.offset=(n.accum.z.low+n.accum.z.high)/2),this.io.i2cConfig(t),this.io.i2cWrite(14,this.REGISTER.CTRL_REG2,128),this.io.i2cWrite(14,this.REGISTER.CTRL_REG1,1);var o={x:0,y:0,z:0},s=function(){this.io.i2cReadOnce(14,this.REGISTER.STATUS,1,function(t){r||15!==t[0]&&255!==t[0]?s():(r=!0,this.io.i2cReadOnce(14,this.REGISTER.READ,6,function(t){var i=0;r=!1,o.x=a(t[0],t[1]),o.y=a(t[2],t[3]),o.z=a(t[4],t[5]),n.isCalibrated||(null===n.accum.x.offset&&(n.accum.x.offset=o.x,n.accum.x.low=o.x,n.accum.x.high=o.x),null===n.accum.y.offset&&(n.accum.y.offset=o.y,n.accum.y.low=o.y,n.accum.y.high=o.y),n.accum.x.low=Math.min(n.accum.x.low,o.x),n.accum.x.high=Math.max(n.accum.x.high,o.x),n.accum.x.offset=Math.trunc((n.accum.x.low+n.accum.x.high)/2),n.accum.y.low=Math.min(n.accum.y.low,o.y),n.accum.y.high=Math.max(n.accum.y.high,o.y),n.accum.y.offset=Math.trunc((n.accum.y.low+n.accum.y.high)/2),n.accum.z.low=Math.min(n.accum.z.low,o.z),n.accum.z.high=Math.max(n.accum.z.high,o.z),n.accum.z.offset=Math.trunc((n.accum.z.low+n.accum.z.high)/2),--n.measurements,n.measurements||(n.isCalibrated=!0)),n.isCalibrated&&(n.hasEmittedCalibration||(n.hasEmittedCalibration=!0,n.offsets.x=n.accum.x.offset,n.offsets.y=n.accum.y.offset,n.offsets.z=n.accum.z.offset,this.io.i2cWrite(14,this.REGISTER.OFFSETS,[n.offsets.x>>7,n.offsets.x<<1&255,n.offsets.y>>7,n.offsets.y<<1&255,n.offsets.z>>7,n.offsets.z<<1&255]),this.emit("calibrated",{x:[n.accum.x.low,n.accum.x.high],y:[n.accum.y.low,n.accum.y.high],z:[n.accum.z.low,n.accum.z.high]})),i=Math.floor(12.5),e(o)),setTimeout(s,i)}.bind(this)))}.bind(this))}.bind(this);s()}},calibrate:{value:function(t){var e=h.get(this);e.isCalibrated=!1,e.measurements=t}},toScaledHeading:{value:function(t){var e=h.get(this),i=1/(e.accum.x.high-e.accum.x.low),n=1/(e.accum.y.high-e.accum.y.low),r=Math.atan2(-t.y*n,t.x*i);return r<0&&(r+=u),Math.trunc(r*s.RAD_TO_DEG)}}},LSM303C:{initialize:{value:function(t,e){i(3).Drivers.get(this.board,"LSM303C",t).on("data",function(t){e(t.magnetometer)})}},toScaledHeading:{value:function(t){return f(t.x,t.y)}}}};function c(t){if(!(this instanceof c))return new c(t);n.Component.call(this,t=n.Options(t));var e=t.freq||25,i=null,r={x:null,y:null,z:null},o={x:0,y:0,z:0,scale:0,register:0,heading:0};if(null==(i=t.controller&&"string"==typeof t.controller?l[t.controller.toUpperCase()]:t.controller))throw new Error("Compass expects a valid controller");n.Controller.call(this,i,t),this.toScaledHeading||(this.toScaledHeading=t.toScaledHeading||function(t){return t}),h.set(this,o),"function"==typeof this.initialize&&this.initialize(t,function(t){r=t}),setInterval(function(){if(null!==r.x){var t=!1;o.x=r.x,o.y=r.y,o.z=r.z;var e=this.heading;e!==o.heading&&(o.heading=e,t=!0),this.emit("data",{heading:o.heading}),t&&this.emit("change",{heading:o.heading})}}.bind(this),e),Object.defineProperties(this,{bearing:{get:function(){for(var t,e=c.Points.length,i=this.heading,n=0;n<e;n++)if(i>=(t=c.Points[n]).low&&i<=t.high)return{name:t.name,abbr:t.abbr,low:t.low,high:t.high,heading:i}}},raw:{get:function(){return{x:r.x,y:r.y,z:r.z}}},heading:{get:function(){return this.toScaledHeading(r)}}})}function f(t,e){var i=Math.atan2(e,t);return i<0&&(i+=u),i>u&&(i-=u),i*s.RAD_TO_DEG}o.inherits(c,r),c.Scale=function(t){.88===t?(this.register=0,this.scale=.73):1.3===t?(this.register=1,this.scale=.92):1.9===t?(this.register=2,this.scale=1.22):2.5===t?(this.register=3,this.scale=1.52):4===t?(this.register=4,this.scale=2.27):4.7===t?(this.register=5,this.scale=2.56):5.6===t?(this.register=6,this.scale=3.03):8.1===t?(this.register=7,this.scale=4.35):(this.register=0,this.scale=1),this.register=this.register<<5},c.Points=[{name:"North",abbr:"N",low:354.38,high:360},{name:"North",abbr:"N",low:0,high:5.62},{name:"North by East",abbr:"NbE",low:5.63,high:16.87},{name:"North-NorthEast",abbr:"NNE",low:16.88,high:28.12},{name:"NorthEast by North",abbr:"NEbN",low:28.13,high:39.37},{name:"NorthEast",abbr:"NE",low:39.38,high:50.62},{name:"NorthEast by East",abbr:"NEbE",low:50.63,high:61.87},{name:"East-NorthEast",abbr:"ENE",low:61.88,high:73.12},{name:"East by North",abbr:"EbN",low:73.13,high:84.37},{name:"East",abbr:"E",low:84.38,high:95.62},{name:"East by South",abbr:"EbS",low:95.63,high:106.87},{name:"East-SouthEast",abbr:"ESE",low:106.88,high:118.12},{name:"SouthEast by East",abbr:"SEbE",low:118.13,high:129.37},{name:"SouthEast",abbr:"SE",low:129.38,high:140.62},{name:"SouthEast by South",abbr:"SEbS",low:140.63,high:151.87},{name:"South-SouthEast",abbr:"SSE",low:151.88,high:163.12},{name:"South by East",abbr:"SbE",low:163.13,high:174.37},{name:"South",abbr:"S",low:174.38,high:185.62},{name:"South by West",abbr:"SbW",low:185.63,high:196.87},{name:"South-SouthWest",abbr:"SSW",low:196.88,high:208.12},{name:"SouthWest by South",abbr:"SWbS",low:208.13,high:219.37},{name:"SouthWest",abbr:"SW",low:219.38,high:230.62},{name:"SouthWest by West",abbr:"SWbW",low:230.63,high:241.87},{name:"West-SouthWest",abbr:"WSW",low:241.88,high:253.12},{name:"West by South",abbr:"WbS",low:253.13,high:264.37},{name:"West",abbr:"W",low:264.38,high:275.62},{name:"West by North",abbr:"WbN",low:275.63,high:286.87},{name:"West-NorthWest",abbr:"WNW",low:286.88,high:298.12},{name:"NorthWest by West",abbr:"NWbW",low:298.13,high:309.37},{name:"NorthWest",abbr:"NW",low:309.38,high:320.62},{name:"NorthWest by North",abbr:"NWbN",low:320.63,high:331.87},{name:"North-NorthWest",abbr:"NNW",low:331.88,high:343.12},{name:"North by West",abbr:"NbW",low:343.13,high:354.37}],Object.freeze(c.Points),e.env.IS_TEST_MODE&&(c.Controllers=l,c.purge=function(){h.clear()}),t.exports=c}).call(this,i(0))},function(t,e,i){(function(e){var n=i(1).EventEmitter,r=i(2),o=i(4),s=new Map,a={BNO055:{initialize:{value:function(t,e){i(3).Drivers.get(this.board,"BNO055",t).on("data",function(t){e(t)})}},toScaledEuler:{value:function(t){return{heading:t.euler.heading/16,roll:t.euler.roll/16,pitch:t.euler.pitch/16}}},toScaledQuarternion:{value:function(t){return{w:t.quarternion.w*(1/16384),x:t.quarternion.x*(1/16384),y:t.quarternion.y*(1/16384),z:t.quarternion.z*(1/16384)}}},calibration:{get:function(){return s.get(this).calibration}},isCalibrated:{get:function(){return 3==(this.calibration>>6&3)}}}};function u(t){if(!(this instanceof u))return new u(t);o.Component.call(this,t=o.Options(t));var e=t.freq||25,i=null,n=null,r={euler:{heading:0,roll:0,pitch:0},quarternion:{w:0,x:0,y:0,z:0},calibration:0};if(null===(i=t.controller&&"string"==typeof t.controller?a[t.controller.toUpperCase()]:t.controller)||"object"!=typeof i)throw new Error("Missing valid Orientation controller");o.Controller.call(this,i,t),this.toScaledQuarternion||(this.toScaledQuarternion=t.toScaledQuarternion||function(t){return t}),this.toScaledEuler||(this.toScaledEuler=t.toScaledEuler||function(t){return t}),s.set(this,r),"function"==typeof this.initialize&&this.initialize(t,function(t){n=t}),setInterval(function(){if(null!==n){var t=!1,e=!1;["heading","roll","pitch"].forEach(function(e){r.euler[e]!==n.orientation.euler[e]&&(t=!0),r.euler[e]=n.orientation.euler[e]}),["w","x","y","z"].forEach(function(e){r.quarternion[e]!==n.orientation.quarternion[e]&&(t=!0),r.quarternion[e]=n.orientation.quarternion[e]}),n.calibration&&(r.calibration!==n.calibration&&(e=!0),r.calibration=n.calibration);var i={euler:this.euler,quarternion:this.quarternion,calibration:this.calibration};this.emit("data",i),t&&this.emit("change",i),e&&this.emit("calibration",this.calibration)}}.bind(this),e)}r.inherits(u,n),Object.defineProperties(u.prototype,{euler:{get:function(){var t=s.get(this);return this.toScaledEuler(t)}},quarternion:{get:function(){var t=s.get(this);return this.toScaledQuarternion(t)}}}),e.env.IS_TEST_MODE&&(u.Controllers=a,u.purge=function(){s.clear()}),t.exports=u}).call(this,i(0))},function(t,e,i){(function(e){var n=i(1).EventEmitter,r=i(2),o=i(4),s=i(5).toFixed,a=273.15;function u(t,e){var i=t.pin;this.io.pinMode(i,this.io.MODES.ANALOG),this.io.analogRead(i,function(t){e.call(this,t)}.bind(this))}var h=new Map,l={MAX31850K:{initialize:{value:function(t,e){var i,n,r,o,s,a=59,u=68,h=190,l=9,c=e.pin,f=e.freq||100;i=function(t){var e,i=0;for(e=6;e>0;e--)i=256*i+t[e];return i},t.io.sendOneWireConfig(c,!0),t.io.sendOneWireSearch(c,function(e,p){e?this.emit("error",e):(this.devices=p.filter(function(t){return t[0]===a},this),0!==p.length?(this.devices.forEach(function(t){this.emit("initialized",i(t))}.bind(this)),o=function(){return this.addresses?this.devices.filter(function(t){var e=i(t);return this.addresses.includes(e)},this):[this.devices[0]]}.bind(this),(n=function(){var e,a,p;e=o(),(a=o()).forEach(function(e){t.io.sendOneWireReset(c),t.io.sendOneWireWrite(c,e,u)}),r=function(i){var n;if(0===e.length)return i();n=e.pop(),t.io.sendOneWireReset(c),t.io.sendOneWireWriteAndRead(c,n,h,l,function(t,o){if(!o[0]&&(e.push(n),0!==o[1]))return i();r(i)})}.bind(this),s=function(){var e;0!==a.length?(e=a.pop(),t.io.sendOneWireReset(c),t.io.sendOneWireWriteAndRead(c,e,h,l,function(t,n){t?this.emit("error",t):(p=n[1]<<8|n[0],this.emit("data",i(e),p),s())}.bind(this))):setTimeout(n,f)}.bind(this),r(s)}.bind(this))()):this.emit("error",new Error("FAILED TO FIND TEMPERATURE DEVICE")))}.bind(this))}},register:{value:function(t){this.addresses||(this.addresses=[]),this.addresses.push(t)}}},DS18B20:{initialize:{value:function(t,e){var i,n,r,o=40,s=68,a=190,u=2,h=e.pin,l=e.freq||100;i=function(t){var e,i=0;for(e=6;e>0;e--)i=256*i+t[e];return i},t.io.sendOneWireConfig(h,!0),t.io.sendOneWireSearch(h,function(e,c){e?this.emit("error",e):(this.devices=c.filter(function(t){return t[0]===o},this),0!==c.length?(this.devices.forEach(function(t){this.emit("initialized",i(t))}.bind(this)),(n=function(){var e,o;(e=this.addresses?this.devices.filter(function(t){var e=i(t);return this.addresses.includes(e)},this):[this.devices[0]]).forEach(function(e){t.io.sendOneWireReset(h),t.io.sendOneWireWrite(h,e,s)}),t.io.sendOneWireDelay(h,1),(r=function(){var s;0!==e.length?(s=e.pop(),t.io.sendOneWireReset(h),t.io.sendOneWireWriteAndRead(h,s,a,u,function(t,e){t?this.emit("error",t):(o=e[1]<<8|e[0],this.emit("data",i(s),o),r())}.bind(this))):setTimeout(n,l)}.bind(this))()}.bind(this))()):this.emit("error",new Error("FAILED TO FIND TEMPERATURE DEVICE")))}.bind(this))}},register:{value:function(t){this.addresses||(this.addresses=[]),this.addresses.push(t)}}},get:function(t,e,i){var r,o;h.has(t)||h.set(t,{}),r=h.get(t);var s=e+"_"+i.pin;return r[s]||(o=new n,Object.defineProperties(o,l[e]),o.initialize(t,i),r[s]=o),r[s]},clear:function(){h.clear()}},c={ANALOG:{initialize:{value:u}},LM35:{initialize:{value:u},toCelsius:{value:function(t){var e=1e3*this.aref*t/1023;return Math.round(e/10)}}},LM335:{initialize:{value:u},toCelsius:{value:function(t){var e=1e3*this.aref*t/1023;return Math.round(e/10-a)}}},TMP36:{initialize:{value:u},toCelsius:{value:function(t){var e=1e3*this.aref*t/1023;return Math.round(e/10-50)}}},TMP102:{ADDRESSES:{value:[72]},initialize:{value:function(t,e){var i=t.address||this.ADDRESSES[0];t.address=i,this.io.i2cConfig(t),this.io.i2cRead(i,0,2,function(t){var i=(t[0]<<8|t[1])>>4;2048&i&&(i|=63488),e(i=i>>15?-1*(1+(65535^i)):i)})}},toCelsius:{value:function(t){return s(t/16,1)}}},MAX31850K:{initialize:{value:function(t,e){var i=f.get(this),n=t.address,r=l.get(this.board,"MAX31850K",t);n?(i.address=n,r.register(n)):(r.addressless&&this.emit("error","You cannot have more than one MAX31850K without an address"),r.addressless=!0),r.once("initialized",function(t){i.address||(i.address=t)}),r.on("data",function(t,i){n&&t!==n||e(i)}.bind(this))}},toCelsius:{value:function(t){return s(t/16,2)}},address:{get:function(){return f.get(this).address||0}}},DS18B20:{initialize:{value:function(t,e){var i=f.get(this),n=t.address,r=l.get(this.board,"DS18B20",t);n?(i.address=n,r.register(n)):(r.addressless&&this.emit("error","You cannot have more than one DS18B20 without an address"),r.addressless=!0),r.once("initialized",function(t){i.address||(i.address=t)}),r.on("data",function(t,i){n&&t!==n||e(i)})}},toCelsius:{value:function(t){return s(t/16,4)}},address:{get:function(){return f.get(this).address||0}}},SHT31D:{initialize:{value:function(t,e){i(3).Drivers.get(this.board,"SHT31D",t).on("data",function(t){e(t.temperature)})}},toCelsius:{value:function(t){return s(175*t/65535-45,3)}}},HTU21D:{initialize:{value:function(t,e){i(3).Drivers.get(this.board,"HTU21D",t).on("data",function(t){e(t.temperature)})}},toCelsius:{value:function(t){return s(175.72*t/65536-46.85,2)}}},HIH6130:{initialize:{value:function(t,e){i(3).Drivers.get(this.board,"HIH6130",t).on("data",function(t){e(t.temperature)})}},toCelsius:{value:function(t){return Math.round(t/1e3)}}},DHT_I2C_NANO_BACKPACK:{initialize:{value:function(t,e){i(3).Drivers.get(this.board,"DHT_I2C_NANO_BACKPACK",t).on("data",function(t){e(t.temperature)})}},toCelsius:{value:function(t){return Math.round(t/100)}}},TH02:{initialize:{value:function(t,e){i(3).Drivers.get(this.board,"TH02",t).on("data",function(t){e(t.temperature)})}},toCelsius:{value:function(t){return s(t,1)}}},MPU6050:{initialize:{value:function(t,e){i(3).Drivers.get(this.board,"MPU6050",t).on("data",function(t){e(t.temperature)})}},toCelsius:{value:function(t){return Math.round(t/340+36.53)}}},BNO055:{initialize:{value:function(t,e){i(3).Drivers.get(this.board,"BNO055",t).on("data",function(t){e(t.temperature)})}},toCelsius:{value:function(t){return Math.trunc(t)}}},MPL115A2:{initialize:{value:function(t,e){i(3).Drivers.get(this.board,"MPL115A2",t).on("data",function(t){e(t.temperature)})}},toCelsius:{value:function(t){return Math.trunc((t-498)/-5.35+25)}}},MPL3115A2:{initialize:{value:function(t,e){i(3).Drivers.get(this.board,"MPL3115A2",t).on("data",function(t){e(t.temperature)})}},toCelsius:{value:function(t){return Math.round(t/16)}}},MS5611:{initialize:{value:function(t,e){i(3).Drivers.get(this.board,"MS5611",t).on("data",function(t){e(t.temperature)})}},toCelsius:{value:function(t){return s(t,2)}}},GROVE:{initialize:{value:u},toCelsius:{value:function(t){var e=1e4*(1023-t)/t,i=1/(Math.log(e/1e4)/3975+1/298.15)-a;return Math.round(i)}}},TINKERKIT:{initialize:{value:u},toCelsius:{value:function(t){var e=1e4*(1023/t-1),i=3950/Math.log(120.6685*e);return Math.round(i-a)}}},BMP180:{initialize:{value:function(t,e){i(3).Drivers.get(this.board,"BMP180",t).on("data",function(t){e(t.temperature)})}},toCelsius:{value:function(t){return s(t,1)}}},BMP280:{initialize:{value:function(t,e){i(3).Drivers.get(this.board,"BMP280",t).on("data",function(t){e(t.temperature)})}},toCelsius:{value:function(t){return s(t,2)}}},BME280:{initialize:{value:function(t,e){i(3).Drivers.get(this.board,"BME280",t).on("data",function(t){e(t.temperature)})}},toCelsius:{value:function(t){return s(t,2)}}},SI7020:{initialize:{value:function(t,e){i(3).Drivers.get(this.board,"SI7020",t).on("data",function(t){e(t.temperature)})}},toCelsius:{value:function(t){return s(175.72*t/65536-46.85,1)}}},MCP9808:{ADDRESSES:{value:[24]},initialize:{value:function(t,e){var i=t.address||this.ADDRESSES[0];t.address=i,this.io.i2cConfig(t),this.io.i2cRead(i,5,2,function(t){var i=t[0]<<8|t[1];4096&(i=(4095&i)/16)&&(i-=256),e(i)})}},toCelsius:{value:function(t){return s(t,2)}}},LSM303C:{initialize:{value:function(t,e){i(3).Drivers.get(this.board,"LSM303C",t).on("data",function(t){e(t.temperature)})}},toCelsius:{value:function(t){return s(t/8+25,1)}}}};c.BMP085=c.BMP180,c.GY521=c.MPU6050,c.SI7021=c.SI7020,c.DHT11_I2C_NANO_BACKPACK=c.DHT_I2C_NANO_BACKPACK,c.DHT21_I2C_NANO_BACKPACK=c.DHT_I2C_NANO_BACKPACK,c.DHT22_I2C_NANO_BACKPACK=c.DHT_I2C_NANO_BACKPACK;var f=new Map;function p(t){if(!(this instanceof p))return new p(t);var e=null,i=null,n=null;o.Component.call(this,t=o.Options(t)),this.aref=t.aref||this.io.aref||5,null==(e=t.controller&&"string"==typeof t.controller?c[t.controller.toUpperCase()]:t.controller)&&(e=c.ANALOG);var r={enabled:void 0===t.enabled||t.enabled,intervalId:null,freq:t.freq||25,previousFreq:t.freq||25};f.set(this,r),o.Controller.call(this,e,t),this.toCelsius||(this.toCelsius=t.toCelsius||function(t){return t});var u=function(){if(null!=n){var t={};t.C=t.celsius=this.celsius,t.F=t.fahrenheit=this.fahrenheit,t.K=t.kelvin=this.kelvin,this.emit("data",t),this.celsius!==i&&(i=this.celsius,this.emit("change",t))}}.bind(this),h={celsius:{get:function(){return this.toCelsius(n)}},fahrenheit:{get:function(){return s(9*this.celsius/5+32,2)}},kelvin:{get:function(){return s(this.celsius+a,2)}},freq:{get:function(){return r.freq},set:function(t){r.freq=t,r.intervalId&&clearInterval(r.intervalId),null!==r.freq&&(r.intervalId=setInterval(u,t))}}};h.C=h.celsius,h.F=h.fahrenheit,h.K=h.kelvin,Object.defineProperties(this,h),"function"==typeof this.initialize&&this.initialize(t,function(t){n=t}),r.enabled&&(this.freq=r.freq)}r.inherits(p,n),p.prototype.enable=function(){var t=f.get(this);return t.enabled||(this.freq=t.freq||t.previousFreq),this},p.prototype.disable=function(){var t=f.get(this);return t.enabled&&(t.enabled=!1,t.previousFreq=t.freq,this.freq=null),this},p.Drivers=l,e.env.IS_TEST_MODE&&(p.Controllers=c,p.purge=function(){f.clear()}),t.exports=p}).call(this,i(0))},function(t,e,i){(function(e){var n=i(4),r=n.Pins,o=i(9),s=i(1).EventEmitter,a=i(2),u=i(6),h=i(5),l=i(12),c=new Map,f={PCA9685:{initialize:{value:function(t){var e=c.get(this);this.address=t.address||64,this.pwmRange=t.pwmRange||[450,1850],this.frequency=t.frequency||50,e.expander=o.get({address:this.address,controller:this.controller,bus:this.bus,pwmRange:this.pwmRange,frequency:this.frequency}),this.pin=e.expander.normalize(t.pin)}},update:{writable:!0,value:function(t){c.get(this).expander.servoWrite(this.pin,t)}}},Standard:{initialize:{value:function(t){t.debug&&!this.board.pins.isServo(this.pin)&&n.Pins.Error({pin:this.pin,type:"PWM",via:"Servo"}),Array.isArray(t.pwmRange)?this.io.servoConfig(this.pin,t.pwmRange[0],t.pwmRange[1]):this.io.pinMode(this.pin,this.mode)}},update:{writable:!0,value:function(t){if(this.last&&this.last.degrees===t)return this;var e=h.map(t,this.degreeRange[0],this.degreeRange[1],this.pwmRange[0],this.pwmRange[1]);e|=0,this.io.servoWrite(this.pin,e)}}}};function p(t){if(!(this instanceof p))return new p(t);var e=[],i="object"==typeof t?t.pin:t,o=null;n.Component.call(this,t=n.Options(t)),this.degreeRange=t.degreeRange||[0,180],this.pwmRange=t.pwmRange||[600,2400],this.range=t.range||this.degreeRange,this.deadband=t.deadband||[90,90],this.fps=t.fps||100,this.offset=t.offset||0,this.range=t.range||[0-this.offset,180-this.offset],this.mode=this.io.MODES.SERVO,this.interval=null,this.value=null,void 0===t.controller&&r.isFirmata(this)&&("string"==typeof i&&"A"===i[0]&&(i=this.io.analogPins[+i.slice(1)]),i=+i,Number.isNaN(i)||this.pin===i||(this.pin=i)),this.type=t.type||"standard",t.isInverted&&console.warn("The 'isInverted' property has been renamed 'invert'"),this.invert=t.isInverted||t.invert||!1,null==(o=t.controller&&"string"==typeof t.controller?f[t.controller.toUpperCase()]:t.controller)&&(o=f.Standard),c.set(this,{history:e}),n.Controller.call(this,o,t),Object.defineProperties(this,{history:{get:function(){return e.slice(-5)}},last:{get:function(){return e[e.length-1]}},position:{get:function(){return e.length?e[e.length-1].degrees:-1}}}),this.initialize(t),void 0!==t.startAt?(this.startAt=t.startAt,this.to(t.startAt)):this.startAt=(this.degreeRange[1]-this.degreeRange[0])/2+this.degreeRange[0],t.center&&this.center(),"continuous"===t.type&&this.stop()}function d(t){return t.map(function(t){return{value:t}})}function v(t){if(!(this instanceof v))return new v(t);Object.defineProperty(this,"type",{value:p}),u.call(this,t)}a.inherits(p,s),p.prototype.to=function(t,i,n){var r=c.get(this),o={};if("object"==typeof t)Object.assign(o,t),o.duration=t.duration||t.interval||1e3,o.cuePoints=t.cuePoints||[0,1],o.keyFrames=t.keyFrames||[null,{value:"number"==typeof t.degrees?t.degrees:this.startAt}],o.oncomplete=function(){e.nextTick(function(){"function"==typeof t.oncomplete&&t.oncomplete(),this.emit("move:complete")}.bind(this))}.bind(this),r.isRunning=!0,r.animation=r.animation||new l(this),r.animation.enqueue(o);else{var s=t;t=h.constrain(t,this.range[0],this.range[1]),void 0!==i?(o.duration=i,o.keyFrames=[null,{degrees:t}],o.fps=n||this.fps,this.to(o)):(this.value=t,t+=this.offset,this.invert&&(t=h.map(t,this.degreeRange[0],this.degreeRange[1],this.degreeRange[1],this.degreeRange[0])),this.update(t),r.history.length>5&&r.history.shift(),r.history.push({timestamp:Date.now(),degrees:t,target:s}))}return this},p.prototype[l.normalize]=function(t){var e=this.last?this.last.target:this.startAt;return null===t[0]&&(t[0]={value:e}),"number"==typeof t[0]&&(t[0]={value:e+t[0]}),t.map(function(t){return null!==t&&("number"==typeof t?t={step:t}:("number"==typeof t.degrees&&(t.value=t.degrees,delete t.degrees),"number"==typeof t.copyDegrees&&(t.copyValue=t.copyDegrees,delete t.copyDegrees)),t.easing||(t.easing="linear")),t})},p.prototype[l.render]=function(t){return this.to(t[0])},p.prototype.step=function(t,e){return this.to(this.last.target+t,e)},p.prototype.move=function(t,e){return console.warn("Servo.prototype.move has been renamed to Servo.prototype.to"),this.to(t,e)},p.prototype.min=function(t,e){return this.to(this.range[0],t,e)},p.prototype.max=function(t,e){return this.to(this.range[1],t,e)},p.prototype.center=function(t,e){return this.to(Math.abs((this.range[0]+this.range[1])/2),t,e)},p.prototype.home=function(){return this.to(this.startAt)},p.prototype.sweep=function(t){var e={keyFrames:[{value:this.range[0]},{value:this.range[1]}],metronomic:!0,loop:!0,easing:"inOutSine"};return Array.isArray(t)?e.keyFrames=d(t):"object"==typeof t&&null!==t&&(Object.assign(e,t),Array.isArray(e.range)&&(e.keyFrames=d(e.range))),this.to(e)},p.prototype.stop=function(){var t=c.get(this);return t.animation&&t.animation.stop(),"continuous"===this.type?this.to(this.deadband.reduce(function(t,e){return Math.round((t+e)/2)})):clearInterval(this.interval),this},["clockWise","cw","counterClockwise","ccw"].forEach(function(t){p.prototype[t]=function(e){var i;return e=void 0===e?1:e,"continuous"!==this.type&&this.board.error("Servo","Servo.prototype."+t+" is only available for continuous servos"),i="cw"===t||"clockWise"===t?[e,0,1,this.deadband[1]+1,this.range[1]]:[e,0,1,this.deadband[0]-1,this.range[0]],this.to(0|h.scale.apply(null,i))}}),p.Continuous=function(t){var e={};return"object"==typeof t?Object.assign(e,t):e.pin=t,e.type="continuous",new p(e)},p.Continuous.speeds={"@4.8V":.23,"@5.0V":.17,"@6.0V":.18},a.inherits(v,u),u.installMethodForwarding(v.prototype,p.prototype),v.prototype[l.normalize]=function(t){return t.map(function(e,i){if(null!==e){var n=this[i];n instanceof v&&(n=n[0]);var r=n.last?n.last.target:n.startAt;return null===e[0]&&(e[0]={value:r}),Array.isArray(e)&&null===e[0]&&(t[i][0]={value:r}),this[i][l.normalize](e)}return e},this)},v.prototype[l.render]=function(t){return this.each(function(e,i){e.to(t[i])})},p.Array=v,p.Collection=v,p.prototype.write=p.prototype.move,e.env.IS_TEST_MODE&&(p.Controllers=f,p.purge=function(){c.clear()}),t.exports=p}).call(this,i(0))},function(t,e,i){var n=i(87),r={};for(var o in n)n.hasOwnProperty(o)&&(r[n[o].join()]=o);var s=t.exports={rgb:{channels:3},hsl:{channels:3},hsv:{channels:3},hwb:{channels:3},cmyk:{channels:4},xyz:{channels:3},lab:{channels:3},lch:{channels:3},hex:{channels:1},keyword:{channels:1},ansi16:{channels:1},ansi256:{channels:1},hcg:{channels:3}};for(var a in s)if(s.hasOwnProperty(a)){if(!("channels"in s[a]))throw new Error("missing channels property: "+a);var u=s[a].channels;delete s[a].channels,Object.defineProperty(s[a],"channels",{value:u})}s.rgb.hsl=function(t){var e,i,n=t[0]/255,r=t[1]/255,o=t[2]/255,s=Math.min(n,r,o),a=Math.max(n,r,o),u=a-s;return a===s?e=0:n===a?e=(r-o)/u:r===a?e=2+(o-n)/u:o===a&&(e=4+(n-r)/u),(e=Math.min(60*e,360))<0&&(e+=360),i=(s+a)/2,[e,100*(a===s?0:i<=.5?u/(a+s):u/(2-a-s)),100*i]},s.rgb.hsv=function(t){var e,i,n=t[0],r=t[1],o=t[2],s=Math.min(n,r,o),a=Math.max(n,r,o),u=a-s;return i=0===a?0:u/a*1e3/10,a===s?e=0:n===a?e=(r-o)/u:r===a?e=2+(o-n)/u:o===a&&(e=4+(n-r)/u),(e=Math.min(60*e,360))<0&&(e+=360),[e,i,a/255*1e3/10]},s.rgb.hwb=function(t){var e=t[0],i=t[1],n=t[2];return[s.rgb.hsl(t)[0],100*(1/255*Math.min(e,Math.min(i,n))),100*(n=1-1/255*Math.max(e,Math.max(i,n)))]},s.rgb.cmyk=function(t){var e,i=t[0]/255,n=t[1]/255,r=t[2]/255;return[100*((1-i-(e=Math.min(1-i,1-n,1-r)))/(1-e)||0),100*((1-n-e)/(1-e)||0),100*((1-r-e)/(1-e)||0),100*e]},s.rgb.keyword=function(t){return r[t.join()]},s.keyword.rgb=function(t){return n[t]},s.rgb.xyz=function(t){var e=t[0]/255,i=t[1]/255,n=t[2]/255;return[100*(.4124*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3576*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)+.1805*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)),100*(.2126*e+.7152*i+.0722*n),100*(.0193*e+.1192*i+.9505*n)]},s.rgb.lab=function(t){var e=s.rgb.xyz(t),i=e[0],n=e[1],r=e[2];return n/=100,r/=108.883,i=(i/=95.047)>.008856?Math.pow(i,1/3):7.787*i+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(i-n),200*(n-(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116))]},s.hsl.rgb=function(t){var e,i,n,r,o,s=t[0]/360,a=t[1]/100,u=t[2]/100;if(0===a)return[o=255*u,o,o];e=2*u-(i=u<.5?u*(1+a):u+a-u*a),r=[0,0,0];for(var h=0;h<3;h++)(n=s+1/3*-(h-1))<0&&n++,n>1&&n--,o=6*n<1?e+6*(i-e)*n:2*n<1?i:3*n<2?e+(i-e)*(2/3-n)*6:e,r[h]=255*o;return r},s.hsl.hsv=function(t){var e=t[0],i=t[1]/100,n=t[2]/100;return 0===n?[0,0,0]:[e,100*(2*(i*=(n*=2)<=1?n:2-n)/(n+i)),100*((n+i)/2)]},s.hsv.rgb=function(t){var e=t[0]/60,i=t[1]/100,n=t[2]/100,r=Math.floor(e)%6,o=e-Math.floor(e),s=255*n*(1-i),a=255*n*(1-i*o),u=255*n*(1-i*(1-o));switch(n*=255,r){case 0:return[n,u,s];case 1:return[a,n,s];case 2:return[s,n,u];case 3:return[s,a,n];case 4:return[u,s,n];case 5:return[n,s,a]}},s.hsv.hsl=function(t){var e,i,n=t[0],r=t[1]/100,o=t[2]/100;return e=r*o,[n,100*(e=(e/=(i=(2-r)*o)<=1?i:2-i)||0),100*(i/=2)]},s.hwb.rgb=function(t){var e,i,n,r,o,s,a,u=t[0]/360,h=t[1]/100,l=t[2]/100,c=h+l;switch(c>1&&(h/=c,l/=c),n=6*u-(e=Math.floor(6*u)),0!=(1&e)&&(n=1-n),r=h+n*((i=1-l)-h),e){default:case 6:case 0:o=i,s=r,a=h;break;case 1:o=r,s=i,a=h;break;case 2:o=h,s=i,a=r;break;case 3:o=h,s=r,a=i;break;case 4:o=r,s=h,a=i;break;case 5:o=i,s=h,a=r}return[255*o,255*s,255*a]},s.cmyk.rgb=function(t){var e=t[0]/100,i=t[1]/100,n=t[2]/100,r=t[3]/100;return[255*(1-Math.min(1,e*(1-r)+r)),255*(1-Math.min(1,i*(1-r)+r)),255*(1-Math.min(1,n*(1-r)+r))]},s.xyz.rgb=function(t){var e,i,n,r=t[0]/100,o=t[1]/100,s=t[2]/100;return i=-.9689*r+1.8758*o+.0415*s,n=.0557*r+-.204*o+1.057*s,e=(e=3.2406*r+-1.5372*o+-.4986*s)>.0031308?1.055*Math.pow(e,1/2.4)-.055:e*=12.92,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*=12.92,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:n*=12.92,[255*(e=Math.min(Math.max(0,e),1)),255*(i=Math.min(Math.max(0,i),1)),255*(n=Math.min(Math.max(0,n),1))]},s.xyz.lab=function(t){var e=t[0],i=t[1],n=t[2];return i/=100,n/=108.883,e=(e/=95.047)>.008856?Math.pow(e,1/3):7.787*e+16/116,[116*(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116)-16,500*(e-i),200*(i-(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116))]},s.lab.xyz=function(t){var e,i,n,r,o=t[0],s=t[1],a=t[2];return o<=8?r=(i=100*o/903.3)/100*7.787+16/116:(i=100*Math.pow((o+16)/116,3),r=Math.pow(i/100,1/3)),[e=e/95.047<=.008856?e=95.047*(s/500+r-16/116)/7.787:95.047*Math.pow(s/500+r,3),i,n=n/108.883<=.008859?n=108.883*(r-a/200-16/116)/7.787:108.883*Math.pow(r-a/200,3)]},s.lab.lch=function(t){var e,i=t[0],n=t[1],r=t[2];return(e=360*Math.atan2(r,n)/2/Math.PI)<0&&(e+=360),[i,Math.sqrt(n*n+r*r),e]},s.lch.lab=function(t){var e,i=t[0],n=t[1];return e=t[2]/360*2*Math.PI,[i,n*Math.cos(e),n*Math.sin(e)]},s.rgb.ansi16=function(t){var e=t[0],i=t[1],n=t[2],r=1 in arguments?arguments[1]:s.rgb.hsv(t)[2];if(0===(r=Math.round(r/50)))return 30;var o=30+(Math.round(n/255)<<2|Math.round(i/255)<<1|Math.round(e/255));return 2===r&&(o+=60),o},s.hsv.ansi16=function(t){return s.rgb.ansi16(s.hsv.rgb(t),t[2])},s.rgb.ansi256=function(t){var e=t[0],i=t[1],n=t[2];return e===i&&i===n?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(i/255*5)+Math.round(n/255*5)},s.ansi16.rgb=function(t){var e=t%10;if(0===e||7===e)return t>50&&(e+=3.5),[e=e/10.5*255,e,e];var i=.5*(1+~~(t>50));return[(1&e)*i*255,(e>>1&1)*i*255,(e>>2&1)*i*255]},s.ansi256.rgb=function(t){if(t>=232){var e=10*(t-232)+8;return[e,e,e]}var i;return t-=16,[Math.floor(t/36)/5*255,Math.floor((i=t%36)/6)/5*255,i%6/5*255]},s.rgb.hex=function(t){var e=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase();return"000000".substring(e.length)+e},s.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}/i);if(!e)return[0,0,0];var i=parseInt(e[0],16);return[i>>16&255,i>>8&255,255&i]},s.rgb.hcg=function(t){var e,i=t[0]/255,n=t[1]/255,r=t[2]/255,o=Math.max(Math.max(i,n),r),s=Math.min(Math.min(i,n),r),a=o-s;return e=a<=0?0:o===i?(n-r)/a%6:o===n?2+(r-i)/a:4+(i-n)/a+4,e/=6,[360*(e%=1),100*a,100*(a<1?s/(1-a):0)]},s.hsl.hcg=function(t){var e=t[1]/100,i=t[2]/100,n=1,r=0;return(n=i<.5?2*e*i:2*e*(1-i))<1&&(r=(i-.5*n)/(1-n)),[t[0],100*n,100*r]},s.hsv.hcg=function(t){var e=t[1]/100,i=t[2]/100,n=e*i,r=0;return n<1&&(r=(i-n)/(1-n)),[t[0],100*n,100*r]},s.hcg.rgb=function(t){var e=t[0]/360,i=t[1]/100,n=t[2]/100;if(0===i)return[255*n,255*n,255*n];var r,o=[0,0,0],s=e%1*6,a=s%1,u=1-a;switch(Math.floor(s)){case 0:o[0]=1,o[1]=a,o[2]=0;break;case 1:o[0]=u,o[1]=1,o[2]=0;break;case 2:o[0]=0,o[1]=1,o[2]=a;break;case 3:o[0]=0,o[1]=u,o[2]=1;break;case 4:o[0]=a,o[1]=0,o[2]=1;break;default:o[0]=1,o[1]=0,o[2]=u}return r=(1-i)*n,[255*(i*o[0]+r),255*(i*o[1]+r),255*(i*o[2]+r)]},s.hcg.hsv=function(t){var e=t[1]/100,i=e+t[2]/100*(1-e),n=0;return i>0&&(n=e/i),[t[0],100*n,100*i]},s.hcg.hsl=function(t){var e=t[1]/100,i=t[2]/100*(1-e)+.5*e,n=0;return i>0&&i<.5?n=e/(2*i):i>=.5&&i<1&&(n=e/(2*(1-i))),[t[0],100*n,100*i]}},function(t,e,i){var n=i(46);n.Collection=i(89),n.RGB=i(21),n.RGB.Collection=i(90),n.Matrix=i(91),n.Digits=i(93),n.Array=n.Collection,t.exports=n},function(t,e,i){(function(e){var n=i(4),r=i(12),o=i(9),s=i(5),a=n.Pins,u=new Map,h={PCA9685:{initialize:{value:function(t){var e=u.get(this);this.address=t.address||64,this.pwmRange=t.pwmRange||[0,4095],this.frequency=t.frequency||200,e.expander=o.get({address:this.address,controller:this.controller,bus:this.bus,pwmRange:this.pwmRange,frequency:this.frequency}),this.pin=e.expander.normalize(t.pin),e.mode=this.io.MODES.PWM}},update:{writable:!0,value:function(t){var e=u.get(this),i=void 0!==t?t:e.value,r=e.isAnode?255-n.constrain(i,0,255):i;this.write(r)}},write:{writable:!0,value:function(t){u.get(this).expander.analogWrite(this.pin,t)}}},DEFAULT:{initialize:{value:function(t,e){var i,n,r=u.get(this);(i=a.isFirmata(this))&&"string"==typeof e&&"A"===e[0]&&(e=this.io.analogPins[+e.slice(1)]),n=this.io.defaultLed||13,e=+e,i&&this.io.analogPins.includes(e)?(this.pin=e,r.mode=this.io.MODES.OUTPUT):(this.pin=void 0===t.pin?n:t.pin,r.mode=this.io.MODES[this.board.pins.isPwm(this.pin)?"PWM":"OUTPUT"]),this.io.pinMode(this.pin,r.mode)}},update:{writable:!0,value:function(t){var e=u.get(this),i=void 0!==t?t:e.value,r=e.isAnode?255-n.constrain(i,0,255):i;r!==this.io.LOW&&r!==this.io.HIGH&&this.mode!==this.io.MODES.PWM&&n.Pins.Error({pin:this.pin,type:"PWM",via:"Led"}),e.mode===this.io.MODES.OUTPUT&&(r=i),this.write(r)}},write:{writable:!0,value:function(t){var e=u.get(this);e.mode===this.io.MODES.OUTPUT&&this.io.digitalWrite(this.pin,t),e.mode===this.io.MODES.PWM&&this.io.analogWrite(this.pin,t)}}}};function l(t){if(!(this instanceof l))return new l(t);var e="object"==typeof t?t.pin:t,i=null;n.Component.call(this,t=n.Options(t)),null==(i=t.controller&&"string"==typeof t.controller?h[t.controller.toUpperCase()]:t.controller)&&(i=h.DEFAULT),Object.defineProperties(this,i);var r={isAnode:t.isAnode,isOn:!1,isRunning:!1,value:null,direction:1,mode:null,intensity:0,interval:null};u.set(this,r),Object.defineProperties(this,{value:{get:function(){return r.value}},mode:{get:function(){return r.mode}},isOn:{get:function(){return!!r.value}},isRunning:{get:function(){return r.isRunning}},animation:{get:function(){return r.animation}}}),"function"==typeof this.initialize&&this.initialize(t,e)}l.prototype.on=function(){var t=u.get(this);return t.mode===this.io.MODES.OUTPUT&&(t.value=this.io.HIGH),t.mode===this.io.MODES.PWM&&(null===t.value&&(t.value=255),t.interval||(t.value=255),0===t.value&&(t.value=255)),this.update(),this},l.prototype.off=function(){return u.get(this).value=0,this.update(),this},l.prototype.toggle=function(){return this[this.isOn?"off":"on"]()},l.prototype.brightness=function(t){return u.get(this).value=t,this.update(),this},l.prototype.intensity=function(t){var e=u.get(this);return 0===arguments.length?e.intensity:(e.intensity=s.constrain(t,0,100),this.brightness(s.scale(e.intensity,0,100,0,255)))},l.prototype[r.normalize]=function(t){var e=u.get(this);return null===t[0]&&(t[0]={value:e.value||0}),t.map(function(t){return null!==t&&("number"==typeof t?t={value:t}:("number"==typeof t.brightness&&(t.value=t.brightness,delete t.brightness),"number"==typeof t.intensity&&(t.value=s.scale(t.intensity,0,100,0,255),delete t.intensity)),t.easing||(t.easing="linear")),t})},l.prototype[r.render]=function(t){return u.get(this).value=t[0],this.update()},l.prototype.pulse=function(t,e){var i=u.get(this);this.stop();var n={duration:"number"==typeof t?t:1e3,keyFrames:[0,255],metronomic:!0,loop:!0,easing:"inOutSine",onloop:function(){"function"==typeof e&&e()}};return"object"==typeof t&&Object.assign(n,t),"function"==typeof t&&(e=t),i.isRunning=!0,i.animation=i.animation||new r(this),i.animation.enqueue(n),this},l.prototype.fade=function(t,e,i){var n=u.get(this);this.stop();var o={duration:"number"==typeof e?e:1e3,keyFrames:[null,"number"==typeof t?t:255],easing:"outSine",oncomplete:function(){n.isRunning=!1,"function"==typeof i&&i()}};return"object"==typeof t&&Object.assign(o,t),"function"==typeof t&&(i=t),"object"==typeof e&&Object.assign(o,e),"function"==typeof e&&(i=e),n.isRunning=!0,n.animation=n.animation||new r(this),n.animation.enqueue(o),this},l.prototype.fadeIn=function(t,e){return this.fade(255,t||1e3,e)},l.prototype.fadeOut=function(t,e){return this.fade(0,t||1e3,e)},l.prototype.blink=function(t,e){var i=u.get(this);return this.stop(),"function"==typeof t&&(e=t,t=null),i.isRunning=!0,i.interval=setInterval(function(){this.toggle(),"function"==typeof e&&e()}.bind(this),t||100),this},l.prototype.strobe=l.prototype.blink,l.prototype.stop=function(){var t=u.get(this);return t.interval&&clearInterval(t.interval),t.animation&&t.animation.stop(),t.interval=null,t.isRunning=!1,this},e.env.IS_TEST_MODE&&(l.Controllers=h,l.purge=function(){u.clear()}),t.exports=l}).call(this,i(0))},function(t,e){var i=function(){};t.exports=function(t,e){e.forEach(function(e){t.prototype[e]=function(t,n){var r,o=this.length,s=[];"function"==typeof t&&(n=t,t=1e3),"function"!=typeof n&&(n=i);for(var a=0;a<o;a++)r=this[a],s.push(new Promise(function(i){r[e](t,function(){i()})}));return Promise.all(s).then(n),this}})}},function(t,e,i){(function(e){var n=i(4),r=i(6),o=i(2),s=new Map;function a(t){if(!(this instanceof a))return new a(t);Array.isArray(t)?t={pins:{data:t[0],clock:t[1],latch:t[2],reset:4===t.length?t[3]:null}}:"object"==typeof t.pins&&Array.isArray(t.pins)&&(t.pins={data:t.pins[0],clock:t.pins[1],latch:t.pins[2],reset:4===t.pins.length?t.pins[3]:null}),n.Component.call(this,t=n.Options(t)),this.size=t.size||1,this.pins.reset=void 0!==t.pins.reset?t.pins.reset:null;var e=void 0!==t.isAnode&&t.isAnode,i=e?255:0,r={isAnode:e,value:new Array(this.size).fill(i),encoded:u[e?"anode":"cathode"],clear:i};s.set(this,r),Object.defineProperties(this,{isAnode:{get:function(){return e}},value:{get:function(){return r.value}}})}var u={cathode:[63,6,91,79,102,109,125,7,127,103],anode:[64,121,36,48,25,18,2,120,0,24]};function h(t){if(!(this instanceof h))return new h(t);Object.defineProperty(this,"type",{value:a}),r.call(this,t)}a.prototype.display=function(t){var e,i=s.get(this);if("number"==typeof t)return this.display(String(t));if("string"==typeof t){var n=t.match(/([0-9]{1}\.*)/g);n&&n.length&&(e=n.map(function(t){return 1===t.length?128|i.encoded[t]:i.encoded[t[0]]}))}return this.send(e),i.value=e,this},a.prototype.send=function(t){var e=s.get(this),i=Array.from(arguments);return 1===i.length&&(i=[t]),Array.isArray(t)&&(i=t),this.io.digitalWrite(this.pins.latch,this.io.LOW),i.forEach(function(t){if("string"==typeof t&&(t=t.charCodeAt(0)),this.isAnode&&255!==t&&!e.encoded.includes(t)&&!e.encoded.includes(-129&t)){var i=u.anode.findIndex(function(e){return e===t});-1!==i&&(t=u.cathode[i])}this.board.shiftOut(this.pins.data,this.pins.clock,!0,t)},this),this.io.digitalWrite(this.pins.latch,this.io.HIGH),e.value=i,this},a.prototype.clear=function(){var t=s.get(this);return this.send(Array(this.size).fill(t.clear))},a.prototype.reset=function(){if(null===this.pins.reset)throw new Error("ShiftRegister was not initialized with a reset pin");return this.io.digitalWrite(this.pins.clock,this.io.LOW),this.io.digitalWrite(this.pins.reset,this.io.LOW),this.io.digitalWrite(this.pins.clock,this.io.HIGH),this.io.digitalWrite(this.pins.reset,this.io.HIGH),this},o.inherits(h,r),r.installMethodForwarding(h.prototype,a.prototype),a.Collection=h,e.env.IS_TEST_MODE&&(a.purge=function(){s.clear()}),t.exports=a}).call(this,i(0))},function(t,e,i){"use strict";(function(e,n){var r=i(17);t.exports=y;var o,s=i(34);y.ReadableState=m;i(1).EventEmitter;var a=function(t,e){return t.listeners(e).length},u=i(50),h=i(18).Buffer,l=e.Uint8Array||function(){};var c=i(15);c.inherits=i(10);var f=i(111),p=void 0;p=f&&f.debuglog?f.debuglog("stream"):function(){};var d,v=i(112),g=i(51);c.inherits(y,u);var E=["error","close","destroy","pause","resume"];function m(t,e){t=t||{};var n=e instanceof(o=o||i(11));this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,s=t.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(s||0===s)?s:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new v,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(d||(d=i(52).StringDecoder),this.decoder=new d(t.encoding),this.encoding=t.encoding)}function y(t){if(o=o||i(11),!(this instanceof y))return new y(t);this._readableState=new m(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),u.call(this)}function b(t,e,i,n,r){var o,s=t._readableState;null===e?(s.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var i=e.decoder.end();i&&i.length&&(e.buffer.push(i),e.length+=e.objectMode?1:i.length)}e.ended=!0,O(t)}(t,s)):(r||(o=function(t,e){var i;n=e,h.isBuffer(n)||n instanceof l||"string"==typeof e||void 0===e||t.objectMode||(i=new TypeError("Invalid non-string/buffer chunk"));var n;return i}(s,e)),o?t.emit("error",o):s.objectMode||e&&e.length>0?("string"==typeof e||s.objectMode||Object.getPrototypeOf(e)===h.prototype||(e=function(t){return h.from(t)}(e)),n?s.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):R(t,s,e,!0):s.ended?t.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!i?(e=s.decoder.write(e),s.objectMode||0!==e.length?R(t,s,e,!1):_(t,s)):R(t,s,e,!1))):n||(s.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(s)}function R(t,e,i,n){e.flowing&&0===e.length&&!e.sync?(t.emit("data",i),t.read(0)):(e.length+=e.objectMode?1:i.length,n?e.buffer.unshift(i):e.buffer.push(i),e.needReadable&&O(t)),_(t,e)}Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),y.prototype.destroy=g.destroy,y.prototype._undestroy=g.undestroy,y.prototype._destroy=function(t,e){this.push(null),e(t)},y.prototype.push=function(t,e){var i,n=this._readableState;return n.objectMode?i=!0:"string"==typeof t&&((e=e||n.defaultEncoding)!==n.encoding&&(t=h.from(t,e),e=""),i=!0),b(this,t,e,!1,i)},y.prototype.unshift=function(t){return b(this,t,null,!0,!1)},y.prototype.isPaused=function(){return!1===this._readableState.flowing},y.prototype.setEncoding=function(t){return d||(d=i(52).StringDecoder),this._readableState.decoder=new d(t),this._readableState.encoding=t,this};var S=8388608;function T(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=S?t=S:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function O(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(p("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?r.nextTick(A,t):A(t))}function A(t){p("emit readable"),t.emit("readable"),C(t)}function _(t,e){e.readingMore||(e.readingMore=!0,r.nextTick(I,t,e))}function I(t,e){for(var i=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(p("maybeReadMore read 0"),t.read(0),i!==e.length);)i=e.length;e.readingMore=!1}function w(t){p("readable nexttick read 0"),t.read(0)}function M(t,e){e.reading||(p("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),C(t),e.flowing&&!e.reading&&t.read(0)}function C(t){var e=t._readableState;for(p("flow",e.flowing);e.flowing&&null!==t.read(););}function D(t,e){return 0===e.length?null:(e.objectMode?i=e.buffer.shift():!t||t>=e.length?(i=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):i=function(t,e,i){var n;t<e.head.data.length?(n=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):n=t===e.head.data.length?e.shift():i?function(t,e){var i=e.head,n=1,r=i.data;t-=r.length;for(;i=i.next;){var o=i.data,s=t>o.length?o.length:t;if(s===o.length?r+=o:r+=o.slice(0,t),0===(t-=s)){s===o.length?(++n,i.next?e.head=i.next:e.head=e.tail=null):(e.head=i,i.data=o.slice(s));break}++n}return e.length-=n,r}(t,e):function(t,e){var i=h.allocUnsafe(t),n=e.head,r=1;n.data.copy(i),t-=n.data.length;for(;n=n.next;){var o=n.data,s=t>o.length?o.length:t;if(o.copy(i,i.length-t,0,s),0===(t-=s)){s===o.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(s));break}++r}return e.length-=r,i}(t,e);return n}(t,e.buffer,e.decoder),i);var i}function P(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,r.nextTick(L,e,t))}function L(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function x(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1}y.prototype.read=function(t){p("read",t),t=parseInt(t,10);var e=this._readableState,i=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return p("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?P(this):O(this),null;if(0===(t=T(t,e))&&e.ended)return 0===e.length&&P(this),null;var n,r=e.needReadable;return p("need readable",r),(0===e.length||e.length-t<e.highWaterMark)&&p("length less than watermark",r=!0),e.ended||e.reading?p("reading or ended",r=!1):r&&(p("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=T(i,e))),null===(n=t>0?D(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),i!==t&&e.ended&&P(this)),null!==n&&this.emit("data",n),n},y.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},y.prototype.pipe=function(t,e){var i=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=t;break;case 1:o.pipes=[o.pipes,t];break;default:o.pipes.push(t)}o.pipesCount+=1,p("pipe count=%d opts=%j",o.pipesCount,e);var u=(!e||!1!==e.end)&&t!==n.stdout&&t!==n.stderr?l:y;function h(e,n){p("onunpipe"),e===i&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,p("cleanup"),t.removeListener("close",E),t.removeListener("finish",m),t.removeListener("drain",c),t.removeListener("error",g),t.removeListener("unpipe",h),i.removeListener("end",l),i.removeListener("end",y),i.removeListener("data",v),f=!0,!o.awaitDrain||t._writableState&&!t._writableState.needDrain||c())}function l(){p("onend"),t.end()}o.endEmitted?r.nextTick(u):i.once("end",u),t.on("unpipe",h);var c=function(t){return function(){var e=t._readableState;p("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&a(t,"data")&&(e.flowing=!0,C(t))}}(i);t.on("drain",c);var f=!1;var d=!1;function v(e){p("ondata"),d=!1,!1!==t.write(e)||d||((1===o.pipesCount&&o.pipes===t||o.pipesCount>1&&-1!==x(o.pipes,t))&&!f&&(p("false write response, pause",i._readableState.awaitDrain),i._readableState.awaitDrain++,d=!0),i.pause())}function g(e){p("onerror",e),y(),t.removeListener("error",g),0===a(t,"error")&&t.emit("error",e)}function E(){t.removeListener("finish",m),y()}function m(){p("onfinish"),t.removeListener("close",E),y()}function y(){p("unpipe"),i.unpipe(t)}return i.on("data",v),function(t,e,i){if("function"==typeof t.prependListener)return t.prependListener(e,i);t._events&&t._events[e]?s(t._events[e])?t._events[e].unshift(i):t._events[e]=[i,t._events[e]]:t.on(e,i)}(t,"error",g),t.once("close",E),t.once("finish",m),t.emit("pipe",i),o.flowing||(p("pipe resume"),i.resume()),t},y.prototype.unpipe=function(t){var e=this._readableState,i={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,i),this);if(!t){var n=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<r;o++)n[o].emit("unpipe",this,i);return this}var s=x(e.pipes,t);return-1===s?this:(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,i),this)},y.prototype.on=function(t,e){var i=u.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&O(this):r.nextTick(w,this))}return i},y.prototype.addListener=y.prototype.on,y.prototype.resume=function(){var t=this._readableState;return t.flowing||(p("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,r.nextTick(M,t,e))}(this,t)),this},y.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this},y.prototype.wrap=function(t){var e=this,i=this._readableState,n=!1;for(var r in t.on("end",function(){if(p("wrapped end"),i.decoder&&!i.ended){var t=i.decoder.end();t&&t.length&&e.push(t)}e.push(null)}),t.on("data",function(r){(p("wrapped data"),i.decoder&&(r=i.decoder.write(r)),i.objectMode&&null==r)||(i.objectMode||r&&r.length)&&(e.push(r)||(n=!0,t.pause()))}),t)void 0===this[r]&&"function"==typeof t[r]&&(this[r]=function(e){return function(){return t[e].apply(t,arguments)}}(r));for(var o=0;o<E.length;o++)t.on(E[o],this.emit.bind(this,E[o]));return this._read=function(e){p("wrapped _read",e),n&&(n=!1,t.resume())},this},Object.defineProperty(y.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),y._fromList=D}).call(this,i(7),i(0))},function(t,e,i){t.exports=i(1).EventEmitter},function(t,e,i){"use strict";var n=i(17);function r(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var i=this,o=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return o||s?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||n.nextTick(r,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(n.nextTick(r,i,t),i._writableState&&(i._writableState.errorEmitted=!0)):e&&e(t)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,i){"use strict";var n=i(18).Buffer,r=n.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(n.isEncoding===r||!r(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=u,this.end=h,e=4;break;case"utf8":this.fillLast=a,e=4;break;case"base64":this.text=l,this.end=c,e=3;break;default:return this.write=f,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(e)}function s(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function a(t){var e=this.lastTotal-this.lastNeed,i=function(t,e,i){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==i?i:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2==0){var i=t.toString("utf16le",e);if(i){var n=i.charCodeAt(i.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],i.slice(0,-1)}return i}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function h(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,i)}return e}function l(t,e){var i=(t.length-e)%3;return 0===i?t.toString("base64",e):(this.lastNeed=3-i,this.lastTotal=3,1===i?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-i))}function c(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(t){return t.toString(this.encoding)}function p(t){return t&&t.length?this.write(t):""}e.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,i;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<t.length?e?e+this.text(t,i):this.text(t,i):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},o.prototype.text=function(t,e){var i=function(t,e,i){var n=e.length-1;if(n<i)return 0;var r=s(e[n]);if(r>=0)return r>0&&(t.lastNeed=r-1),r;if(--n<i||-2===r)return 0;if((r=s(e[n]))>=0)return r>0&&(t.lastNeed=r-2),r;if(--n<i||-2===r)return 0;if((r=s(e[n]))>=0)return r>0&&(2===r?r=0:t.lastNeed=r-3),r;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=i;var n=t.length-(i-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,i){"use strict";t.exports=o;var n=i(11),r=i(15);function o(t){if(!(this instanceof o))return new o(t);n.call(this,t),this._transformState={afterTransform:function(t,e){var i=this._transformState;i.transforming=!1;var n=i.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));i.writechunk=null,i.writecb=null,null!=e&&this.push(e),n(t);var r=this._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",s)}function s(){var t=this;"function"==typeof this._flush?this._flush(function(e,i){a(t,e,i)}):a(this,null,null)}function a(t,e,i){if(e)return t.emit("error",e);if(null!=i&&t.push(i),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}r.inherits=i(10),r.inherits(o,n),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,n.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,i){throw new Error("_transform() is not implemented")},o.prototype._write=function(t,e,i){var n=this._transformState;if(n.writecb=i,n.writechunk=t,n.writeencoding=e,!n.transforming){var r=this._readableState;(n.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},o.prototype._destroy=function(t,e){var i=this;n.prototype._destroy.call(this,t,function(t){e(t),i.emit("close")})}},function(t,e,i){"use strict";t.exports={to7BitArray(t){let e=0,i=0;const n=[];return t.forEach(t=>{0===e?(n.push(127&t),e++,i=t>>7):(n.push(t<<e&127|i),6===e?(n.push(t>>1),e=0):i=t>>8-++e)}),e>0&&n.push(i),n},from7BitArray(t){const e=7*t.length>>3,i=[];for(let n=0;n<e;n++){const e=n<<3,r=parseInt(e/7,10),o=e%7;i[n]=t[r]>>o|t[r+1]<<7-o&255}return i}}},function(t,e,i){(function(e,n){e.hrtime=i(56);const r=i(57);r.usbSerial=i(109),r.firmata=i(120),r.nodeLed=i(123),r.nodePixel=i(127),r.oledJS=i(131);const{EventEmitter:o}=i(1);if(r.events=new o,r.handleElementInit=function(t){navigator.usb.getDevices().then(function(e){if(e.length){const i=e[0];t.style.display="none";const n=new p5.j5.usbSerial({device:i});r.events.emit("serial",n)}}).catch(t=>{console.log("err",t)}),t.addEventListener("click",function(e){console.log(e);const i=new p5.j5.usbSerial;console.log("serial device",i),r.events.emit("serial",i),t.style.display="none"},!1),r.events.once("boardReady",()=>{console.log("board ready")})},n.p5){const t=n.p5;t.j5=r,n.five=r,t.prototype.registerPreloadMethod("loadBoard",t.prototype),t.prototype.loadBoard=function(t={},e,i){let n;console.log("loading board",t),t.element?n=document.getElementById("authBtn"):((n=document.createElement("button")).innerText="Authorize USB Device",n.style.margin="25px",document.body.appendChild(n)),r.handleElementInit(n);const o={},s=this;return console.log("loadBoard starting",Date.now(),o,t,e,i),r.events.once("serial",t=>{console.log("port once",t);const i=new r.firmata.Board(t),n=new r.Board({io:i,repl:!1,timeout:15e3});n.on("ready",()=>{o.board=n,"function"==typeof e&&e({}),"function"==typeof s._decrementPreload&&s._decrementPreload(),r.events.emit("boardReady"),r.io=i,r.board=n})}),o}}t.exports=r}).call(this,i(0),i(7))},function(t,e,i){(function(e,i){t.exports=e.hrtime||function(t){var e=.001*r.call(n),i=Math.floor(e),o=Math.floor(e%1*1e9);t&&(i-=t[0],(o-=t[1])<0&&(i--,o+=1e9));return[i,o]};var n=i.performance||{},r=n.now||n.mozNow||n.msNow||n.oNow||n.webkitNow||function(){return(new Date).getTime()}}).call(this,i(0),i(7))},function(t,e,i){Array.prototype.includes||i(27),t.exports={Accelerometer:i(28),Animation:i(12),Altimeter:i(36),Barometer:i(37),Board:i(4),Button:i(77),Color:i(78),Collection:i(6),Compass:i(40),ESC:i(79),Expander:i(9),Fn:i(5),GPS:i(80),Gripper:i(81),Gyro:i(38),Hygrometer:i(39),IMU:i(3),Keypad:i(82),LCD:i(84),Led:i(45),LedControl:i(22),Light:i(94),Joystick:i(95),Motion:i(96),Motor:i(97),Orientation:i(41),Piezo:i(98),Ping:i(101),Pin:i(20),Proximity:i(102),Relay:i(103),Repl:i(32),Sensor:i(23),Servo:i(43),ShiftRegister:i(48),Sonar:i(104),Stepper:i(105),Switch:i(106),Thermometer:i(42),Wii:i(107)},t.exports.Board.Virtual=function(e){var i;return i=e instanceof t.exports.Expander?{io:e}:e,new t.exports.Board(Object.assign({},{repl:!1,debug:!1,sigint:!1},i))},t.exports.Multi=t.exports.IMU,t.exports.Analog=function(e){return new t.exports.Sensor(e)},t.exports.Digital=function(e){return"number"==typeof e||"string"==typeof e?e={type:"digital",pin:e}:e.type=e.type||"digital",new t.exports.Sensor(e)},t.exports.Sensor.Analog=t.exports.Analog,t.exports.Sensor.Digital=t.exports.Digital,t.exports.Temperature=t.exports.Thermometer,t.exports.IR=function(){throw new Error("IR has been removed. Use Motion or Proximity instead.")},t.exports.IR.Distance=function(){throw new Error("IR.Distance has been removed. Use Proximity instead.")},t.exports.IR.Proximity=function(){throw new Error("IR.Proximity has been removed. Use Proximity instead.")},t.exports.IR.Motion=function(){throw new Error("IR.Motion has been removed. Use Motion instead.")},t.exports.IR.Reflect={},t.exports.IR.Reflect.Array=i(108),t.exports.IR.Reflect.Collection=t.exports.IR.Reflect.Array,t.exports.Luxmeter=function(e){return new t.exports.Light(e)},t.exports.Magnetometer=function(e){return new t.exports.Compass(e)},t.exports.Boards=t.exports.Board.Collection,t.exports.Buttons=t.exports.Button.Collection,t.exports.ESCs=t.exports.ESC.Collection,t.exports.Leds=t.exports.Led.Collection,t.exports.Led.RGBs=t.exports.Led.RGB.Collection,t.exports.Motors=t.exports.Motor.Collection,t.exports.Pins=t.exports.Pin.Collection,t.exports.Relays=t.exports.Relay.Collection,t.exports.Sensors=t.exports.Sensor.Collection,t.exports.Servos=t.exports.Servo.Collection,t.exports.Switches=t.exports.Switch.Collection,t.exports.Touchpad=t.exports.Keypad,t.exports.Nunchuk=t.exports.Wii.Nunchuk},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e,i){"use strict";(function(e){const n=i(60),r=i(61),o=i(64),s=i(65),a="win32"===e.platform&&!(e.env.TERM||"").toLowerCase().startsWith("xterm"),u=["ansi","ansi","ansi256","ansi16m"],h=new Set(["gray"]),l=Object.create(null);function c(t,e){e=e||{};const i=o?o.level:0;t.level=void 0===e.level?i:e.level,t.enabled="enabled"in e?e.enabled:t.level>0}function f(t){if(!this||!(this instanceof f)||this.template){const e={};return c(e,t),e.template=function(){const t=[].slice.call(arguments);return function(t,e){if(!Array.isArray(e))return[].slice.call(arguments,1).join(" ");const i=[].slice.call(arguments,2),n=[e.raw[0]];for(let t=1;t<e.length;t++)n.push(String(i[t-1]).replace(/[{}\\]/g,"\\$&")),n.push(String(e.raw[t]));return s(t,n.join(""))}.apply(null,[e.template].concat(t))},Object.setPrototypeOf(e,f.prototype),Object.setPrototypeOf(e.template,e),e.template.constructor=f,e.template}c(this,t)}a&&(r.blue.open="[94m");for(const t of Object.keys(r))r[t].closeRe=new RegExp(n(r[t].close),"g"),l[t]={get(){const e=r[t];return d.call(this,this._styles?this._styles.concat(e):[e],t)}};r.color.closeRe=new RegExp(n(r.color.close),"g");for(const t of Object.keys(r.color.ansi))h.has(t)||(l[t]={get(){const e=this.level;return function(){const i={open:r.color[u[e]][t].apply(null,arguments),close:r.color.close,closeRe:r.color.closeRe};return d.call(this,this._styles?this._styles.concat(i):[i],t)}}});r.bgColor.closeRe=new RegExp(n(r.bgColor.close),"g");for(const t of Object.keys(r.bgColor.ansi)){if(h.has(t))continue;l["bg"+t[0].toUpperCase()+t.slice(1)]={get(){const e=this.level;return function(){const i={open:r.bgColor[u[e]][t].apply(null,arguments),close:r.bgColor.close,closeRe:r.bgColor.closeRe};return d.call(this,this._styles?this._styles.concat(i):[i],t)}}}}const p=Object.defineProperties(()=>{},l);function d(t,e){const i=function(){return function(){const t=arguments,e=t.length;let i=String(arguments[0]);if(0===e)return"";if(e>1)for(let n=1;n<e;n++)i+=" "+t[n];if(!this.enabled||this.level<=0||!i)return i;const n=r.dim.open;a&&this.hasGrey&&(r.dim.open="");for(const t of this._styles.slice().reverse())i=(i=t.open+i.replace(t.closeRe,t.open)+t.close).replace(/\r?\n/g,`${t.close}$&${t.open}`);return r.dim.open=n,i}.apply(i,arguments)};i._styles=t;const n=this;return Object.defineProperty(i,"level",{enumerable:!0,get:()=>n.level,set(t){n.level=t}}),Object.defineProperty(i,"enabled",{enumerable:!0,get:()=>n.enabled,set(t){n.enabled=t}}),i.hasGrey=this.hasGrey||"gray"===e||"grey"===e,i.__proto__=p,i}Object.defineProperties(f.prototype,l),t.exports=f(),t.exports.supportsColor=o}).call(this,i(0))},function(t,e,i){"use strict";var n=/[|\\{}()[\]^$+*?.]/g;t.exports=function(t){if("string"!=typeof t)throw new TypeError("Expected a string");return t.replace(n,"\\$&")}},function(t,e,i){"use strict";(function(t){const e=i(62),n=(t,i)=>(function(){return`[${t.apply(e,arguments)+i}m`}),r=(t,i)=>(function(){const n=t.apply(e,arguments);return`[${38+i};5;${n}m`}),o=(t,i)=>(function(){const n=t.apply(e,arguments);return`[${38+i};2;${n[0]};${n[1]};${n[2]}m`});Object.defineProperty(t,"exports",{enumerable:!0,get:function(){const t=new Map,i={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};i.color.grey=i.color.gray;for(const e of Object.keys(i)){const n=i[e];for(const e of Object.keys(n)){const r=n[e];i[e]={open:`[${r[0]}m`,close:`[${r[1]}m`},n[e]=i[e],t.set(r[0],r[1])}Object.defineProperty(i,e,{value:n,enumerable:!1}),Object.defineProperty(i,"codes",{value:t,enumerable:!1})}const s=t=>t,a=(t,e,i)=>[t,e,i];i.color.close="[39m",i.bgColor.close="[49m",i.color.ansi={ansi:n(s,0)},i.color.ansi256={ansi256:r(s,0)},i.color.ansi16m={rgb:o(a,0)},i.bgColor.ansi={ansi:n(s,10)},i.bgColor.ansi256={ansi256:r(s,10)},i.bgColor.ansi16m={rgb:o(a,10)};for(let t of Object.keys(e)){if("object"!=typeof e[t])continue;const s=e[t];"ansi16"===t&&(t="ansi"),"ansi16"in s&&(i.color.ansi[t]=n(s.ansi16,0),i.bgColor.ansi[t]=n(s.ansi16,10)),"ansi256"in s&&(i.color.ansi256[t]=r(s.ansi256,0),i.bgColor.ansi256[t]=r(s.ansi256,10)),"rgb"in s&&(i.color.ansi16m[t]=o(s.rgb,0),i.bgColor.ansi16m[t]=o(s.rgb,10))}return i}})}).call(this,i(29)(t))},function(t,e,i){var n=i(30),r=i(63),o={};Object.keys(n).forEach(function(t){o[t]={},Object.defineProperty(o[t],"channels",{value:n[t].channels}),Object.defineProperty(o[t],"labels",{value:n[t].labels});var e=r(t);Object.keys(e).forEach(function(i){var n=e[i];o[t][i]=function(t){var e=function(e){if(null==e)return e;arguments.length>1&&(e=Array.prototype.slice.call(arguments));var i=t(e);if("object"==typeof i)for(var n=i.length,r=0;r<n;r++)i[r]=Math.round(i[r]);return i};return"conversion"in t&&(e.conversion=t.conversion),e}(n),o[t][i].raw=function(t){var e=function(e){return null==e?e:(arguments.length>1&&(e=Array.prototype.slice.call(arguments)),t(e))};return"conversion"in t&&(e.conversion=t.conversion),e}(n)})}),t.exports=o},function(t,e,i){var n=i(30);function r(t){var e=function(){for(var t={},e=Object.keys(n),i=e.length,r=0;r<i;r++)t[e[r]]={distance:-1,parent:null};return t}(),i=[t];for(e[t].distance=0;i.length;)for(var r=i.pop(),o=Object.keys(n[r]),s=o.length,a=0;a<s;a++){var u=o[a],h=e[u];-1===h.distance&&(h.distance=e[r].distance+1,h.parent=r,i.unshift(u))}return e}function o(t,e){return function(i){return e(t(i))}}function s(t,e){for(var i=[e[t].parent,t],r=n[e[t].parent][t],s=e[t].parent;e[s].parent;)i.unshift(e[s].parent),r=o(n[e[s].parent][s],r),s=e[s].parent;return r.conversion=i,r}t.exports=function(t){for(var e=r(t),i={},n=Object.keys(e),o=n.length,a=0;a<o;a++){var u=n[a];null!==e[u].parent&&(i[u]=s(u,e))}return i}},function(t,e,i){"use strict";t.exports=!1},function(t,e,i){"use strict";const n=/(?:\\(u[a-f0-9]{4}|x[a-f0-9]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,r=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,o=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,s=/\\(u[0-9a-f]{4}|x[0-9a-f]{2}|.)|([^\\])/gi,a={n:"\n",r:"\r",t:"\t",b:"\b",f:"\f",v:"\v",0:"\0","\\":"\\",e:"",a:""};function u(t){return"u"===t[0]&&5===t.length||"x"===t[0]&&3===t.length?String.fromCharCode(parseInt(t.slice(1),16)):a[t]||t}function h(t,e){const i=[],n=e.trim().split(/\s*,\s*/g);let r;for(const e of n)if(isNaN(e)){if(!(r=e.match(o)))throw new Error(`Invalid Chalk template style argument: ${e} (in style '${t}')`);i.push(r[2].replace(s,(t,e,i)=>e?u(e):i))}else i.push(Number(e));return i}function l(t,e){const i={};for(const t of e)for(const e of t.styles)i[e[0]]=t.inverse?null:e.slice(1);let n=t;for(const t of Object.keys(i))if(Array.isArray(i[t])){if(!(t in n))throw new Error(`Unknown Chalk style: ${t}`);n=i[t].length>0?n[t].apply(n,i[t]):n[t]}return n}t.exports=((t,e)=>{const i=[],o=[];let s=[];if(e.replace(n,(e,n,a,c,f,p)=>{if(n)s.push(u(n));else if(c){const e=s.join("");s=[],o.push(0===i.length?e:l(t,i)(e)),i.push({inverse:a,styles:function(t){r.lastIndex=0;const e=[];let i;for(;null!==(i=r.exec(t));){const t=i[1];if(i[2]){const n=h(t,i[2]);e.push([t].concat(n))}else e.push([t])}return e}(c)})}else if(f){if(0===i.length)throw new Error("Found extraneous } in Chalk template literal");o.push(l(t,i)(s.join(""))),s=[],i.pop()}else s.push(p)}),o.push(s.join("")),i.length>0){const t=`Chalk template literal is missing ${i.length} closing bracket${1===i.length?"":"s"} (\`}\`)`;throw new Error(t)}return o.join("")})},function(t,e,i){(function(e){var i="Expected a function",n=NaN,r="[object Symbol]",o=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,u=/^0o[0-7]+$/i,h=parseInt,l="object"==typeof e&&e&&e.Object===Object&&e,c="object"==typeof self&&self&&self.Object===Object&&self,f=l||c||Function("return this")(),p=Object.prototype.toString,d=Math.max,v=Math.min,g=function(){return f.Date.now()};function E(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function m(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&p.call(t)==r}(t))return n;if(E(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=E(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var i=a.test(t);return i||u.test(t)?h(t.slice(2),i?2:8):s.test(t)?n:+t}t.exports=function(t,e,n){var r,o,s,a,u,h,l=0,c=!1,f=!1,p=!0;if("function"!=typeof t)throw new TypeError(i);function y(e){var i=r,n=o;return r=o=void 0,l=e,a=t.apply(n,i)}function b(t){var i=t-h;return void 0===h||i>=e||i<0||f&&t-l>=s}function R(){var t=g();if(b(t))return S(t);u=setTimeout(R,function(t){var i=e-(t-h);return f?v(i,s-(t-l)):i}(t))}function S(t){return u=void 0,p&&r?y(t):(r=o=void 0,a)}function T(){var t=g(),i=b(t);if(r=arguments,o=this,h=t,i){if(void 0===u)return function(t){return l=t,u=setTimeout(R,e),c?y(t):a}(h);if(f)return u=setTimeout(R,e),y(h)}return void 0===u&&(u=setTimeout(R,e)),a}return e=m(e)||0,E(n)&&(c=!!n.leading,s=(f="maxWait"in n)?d(m(n.maxWait)||0,e):s,p="trailing"in n?!!n.trailing:p),T.cancel=function(){void 0!==u&&clearTimeout(u),l=0,r=h=o=u=void 0},T.flush=function(){return void 0===u?a:S(g())},T}}).call(this,i(7))},function(t,e,i){(function(t,i){var n=200,r="__lodash_hash_undefined__",o=9007199254740991,s="[object Arguments]",a="[object Boolean]",u="[object Date]",h="[object Function]",l="[object GeneratorFunction]",c="[object Map]",f="[object Number]",p="[object Object]",d="[object RegExp]",v="[object Set]",g="[object String]",E="[object Symbol]",m="[object ArrayBuffer]",y="[object DataView]",b="[object Float32Array]",R="[object Float64Array]",S="[object Int8Array]",T="[object Int16Array]",O="[object Int32Array]",A="[object Uint8Array]",_="[object Uint8ClampedArray]",I="[object Uint16Array]",w="[object Uint32Array]",M=/\w*$/,C=/^\[object .+?Constructor\]$/,D=/^(?:0|[1-9]\d*)$/,P={};P[s]=P["[object Array]"]=P[m]=P[y]=P[a]=P[u]=P[b]=P[R]=P[S]=P[T]=P[O]=P[c]=P[f]=P[p]=P[d]=P[v]=P[g]=P[E]=P[A]=P[_]=P[I]=P[w]=!0,P["[object Error]"]=P[h]=P["[object WeakMap]"]=!1;var L="object"==typeof t&&t&&t.Object===Object&&t,x="object"==typeof self&&self&&self.Object===Object&&self,N=L||x||Function("return this")(),G=e&&!e.nodeType&&e,W=G&&"object"==typeof i&&i&&!i.nodeType&&i,B=W&&W.exports===G;function U(t,e){return t.set(e[0],e[1]),t}function k(t,e){return t.add(e),t}function H(t,e,i,n){var r=-1,o=t?t.length:0;for(n&&o&&(i=t[++r]);++r<o;)i=e(i,t[r],r,t);return i}function F(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function z(t){var e=-1,i=Array(t.size);return t.forEach(function(t,n){i[++e]=[n,t]}),i}function j(t,e){return function(i){return t(e(i))}}function q(t){var e=-1,i=Array(t.size);return t.forEach(function(t){i[++e]=t}),i}var Y,V=Array.prototype,K=Function.prototype,X=Object.prototype,$=N["__core-js_shared__"],Z=(Y=/[^.]+$/.exec($&&$.keys&&$.keys.IE_PROTO||""))?"Symbol(src)_1."+Y:"",Q=K.toString,J=X.hasOwnProperty,tt=X.toString,et=RegExp("^"+Q.call(J).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),it=B?N.Buffer:void 0,nt=N.Symbol,rt=N.Uint8Array,ot=j(Object.getPrototypeOf,Object),st=Object.create,at=X.propertyIsEnumerable,ut=V.splice,ht=Object.getOwnPropertySymbols,lt=it?it.isBuffer:void 0,ct=j(Object.keys,Object),ft=Wt(N,"DataView"),pt=Wt(N,"Map"),dt=Wt(N,"Promise"),vt=Wt(N,"Set"),gt=Wt(N,"WeakMap"),Et=Wt(Object,"create"),mt=Ft(ft),yt=Ft(pt),bt=Ft(dt),Rt=Ft(vt),St=Ft(gt),Tt=nt?nt.prototype:void 0,Ot=Tt?Tt.valueOf:void 0;function At(t){var e=-1,i=t?t.length:0;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function _t(t){var e=-1,i=t?t.length:0;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function It(t){var e=-1,i=t?t.length:0;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function wt(t){this.__data__=new _t(t)}function Mt(t,e){var i=jt(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&qt(t)}(t)&&J.call(t,"callee")&&(!at.call(t,"callee")||tt.call(t)==s)}(t)?function(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}(t.length,String):[],n=i.length,r=!!n;for(var o in t)!e&&!J.call(t,o)||r&&("length"==o||kt(o,n))||i.push(o);return i}function Ct(t,e,i){var n=t[e];J.call(t,e)&&zt(n,i)&&(void 0!==i||e in t)||(t[e]=i)}function Dt(t,e){for(var i=t.length;i--;)if(zt(t[i][0],e))return i;return-1}function Pt(t,e,i,n,r,o,C){var D;if(n&&(D=o?n(t,r,o,C):n(t)),void 0!==D)return D;if(!Kt(t))return t;var L=jt(t);if(L){if(D=function(t){var e=t.length,i=t.constructor(e);e&&"string"==typeof t[0]&&J.call(t,"index")&&(i.index=t.index,i.input=t.input);return i}(t),!e)return function(t,e){var i=-1,n=t.length;e||(e=Array(n));for(;++i<n;)e[i]=t[i];return e}(t,D)}else{var x=Ut(t),N=x==h||x==l;if(Yt(t))return function(t,e){if(e)return t.slice();var i=new t.constructor(t.length);return t.copy(i),i}(t,e);if(x==p||x==s||N&&!o){if(F(t))return o?t:{};if(D=function(t){return"function"!=typeof t.constructor||Ht(t)?{}:(e=ot(t),Kt(e)?st(e):{});var e}(N?{}:t),!e)return function(t,e){return Nt(t,Bt(t),e)}(t,function(t,e){return t&&Nt(e,Xt(e),t)}(D,t))}else{if(!P[x])return o?t:{};D=function(t,e,i,n){var r=t.constructor;switch(e){case m:return xt(t);case a:case u:return new r(+t);case y:return function(t,e){var i=e?xt(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}(t,n);case b:case R:case S:case T:case O:case A:case _:case I:case w:return function(t,e){var i=e?xt(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}(t,n);case c:return function(t,e,i){return H(e?i(z(t),!0):z(t),U,new t.constructor)}(t,n,i);case f:case g:return new r(t);case d:return(h=new(s=t).constructor(s.source,M.exec(s))).lastIndex=s.lastIndex,h;case v:return function(t,e,i){return H(e?i(q(t),!0):q(t),k,new t.constructor)}(t,n,i);case E:return o=t,Ot?Object(Ot.call(o)):{}}var o;var s,h}(t,x,Pt,e)}}C||(C=new wt);var G=C.get(t);if(G)return G;if(C.set(t,D),!L)var W=i?function(t){return function(t,e,i){var n=e(t);return jt(t)?n:function(t,e){for(var i=-1,n=e.length,r=t.length;++i<n;)t[r+i]=e[i];return t}(n,i(t))}(t,Xt,Bt)}(t):Xt(t);return function(t,e){for(var i=-1,n=t?t.length:0;++i<n&&!1!==e(t[i],i,t););}(W||t,function(r,o){W&&(r=t[o=r]),Ct(D,o,Pt(r,e,i,n,o,t,C))}),D}function Lt(t){return!(!Kt(t)||(e=t,Z&&Z in e))&&(Vt(t)||F(t)?et:C).test(Ft(t));var e}function xt(t){var e=new t.constructor(t.byteLength);return new rt(e).set(new rt(t)),e}function Nt(t,e,i,n){i||(i={});for(var r=-1,o=e.length;++r<o;){var s=e[r],a=n?n(i[s],t[s],s,i,t):void 0;Ct(i,s,void 0===a?t[s]:a)}return i}function Gt(t,e){var i,n,r=t.__data__;return("string"==(n=typeof(i=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==i:null===i)?r["string"==typeof e?"string":"hash"]:r.map}function Wt(t,e){var i=function(t,e){return null==t?void 0:t[e]}(t,e);return Lt(i)?i:void 0}At.prototype.clear=function(){this.__data__=Et?Et(null):{}},At.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},At.prototype.get=function(t){var e=this.__data__;if(Et){var i=e[t];return i===r?void 0:i}return J.call(e,t)?e[t]:void 0},At.prototype.has=function(t){var e=this.__data__;return Et?void 0!==e[t]:J.call(e,t)},At.prototype.set=function(t,e){return this.__data__[t]=Et&&void 0===e?r:e,this},_t.prototype.clear=function(){this.__data__=[]},_t.prototype.delete=function(t){var e=this.__data__,i=Dt(e,t);return!(i<0||(i==e.length-1?e.pop():ut.call(e,i,1),0))},_t.prototype.get=function(t){var e=this.__data__,i=Dt(e,t);return i<0?void 0:e[i][1]},_t.prototype.has=function(t){return Dt(this.__data__,t)>-1},_t.prototype.set=function(t,e){var i=this.__data__,n=Dt(i,t);return n<0?i.push([t,e]):i[n][1]=e,this},It.prototype.clear=function(){this.__data__={hash:new At,map:new(pt||_t),string:new At}},It.prototype.delete=function(t){return Gt(this,t).delete(t)},It.prototype.get=function(t){return Gt(this,t).get(t)},It.prototype.has=function(t){return Gt(this,t).has(t)},It.prototype.set=function(t,e){return Gt(this,t).set(t,e),this},wt.prototype.clear=function(){this.__data__=new _t},wt.prototype.delete=function(t){return this.__data__.delete(t)},wt.prototype.get=function(t){return this.__data__.get(t)},wt.prototype.has=function(t){return this.__data__.has(t)},wt.prototype.set=function(t,e){var i=this.__data__;if(i instanceof _t){var r=i.__data__;if(!pt||r.length<n-1)return r.push([t,e]),this;i=this.__data__=new It(r)}return i.set(t,e),this};var Bt=ht?j(ht,Object):function(){return[]},Ut=function(t){return tt.call(t)};function kt(t,e){return!!(e=null==e?o:e)&&("number"==typeof t||D.test(t))&&t>-1&&t%1==0&&t<e}function Ht(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||X)}function Ft(t){if(null!=t){try{return Q.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function zt(t,e){return t===e||t!=t&&e!=e}(ft&&Ut(new ft(new ArrayBuffer(1)))!=y||pt&&Ut(new pt)!=c||dt&&"[object Promise]"!=Ut(dt.resolve())||vt&&Ut(new vt)!=v||gt&&"[object WeakMap]"!=Ut(new gt))&&(Ut=function(t){var e=tt.call(t),i=e==p?t.constructor:void 0,n=i?Ft(i):void 0;if(n)switch(n){case mt:return y;case yt:return c;case bt:return"[object Promise]";case Rt:return v;case St:return"[object WeakMap]"}return e});var jt=Array.isArray;function qt(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=o}(t.length)&&!Vt(t)}var Yt=lt||function(){return!1};function Vt(t){var e=Kt(t)?tt.call(t):"";return e==h||e==l}function Kt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Xt(t){return qt(t)?Mt(t):function(t){if(!Ht(t))return ct(t);var e=[];for(var i in Object(t))J.call(t,i)&&"constructor"!=i&&e.push(i);return e}(t)}i.exports=function(t){return Pt(t,!0,!0)}}).call(this,i(7),i(29)(t))},function(t,e,i){var n=i(33),r={INPUT:0,OUTPUT:1,ANALOG:2,PWM:3,SERVO:4},o={20:"UNO",25:"LEONARDO",70:"MEGA"};function s(t){if(!(this instanceof s))return new s(t);var e=t.io,i=e.pins.slice(),n=i.length,r=o[n]||"OTHER";t.type=r;for(var a=0;a<n;a++)this[a]=i[a];Object.defineProperties(this,{type:{value:r},length:{value:n}}),["isInput","isOutput","isAnalog","isPwm","isServo"].forEach(function(t){e[t]&&(this[t]=e[t])},this)}function a(t){return"Firmata"===t.io.name||"Mock"===t.io.name}Object.keys(r).forEach(function(t){Object.defineProperty(s,t,{value:r[t]})}),s.isFirmata=a,s.Error=function(t){throw new Error("Pin Error: "+t.pin+" is not a valid "+t.type+" pin ("+t.via+")")};var u=new Map;s.normalize=function(t,e){var i,r=e.pins.type,o=a(e),h=u.get(e);return("string"==typeof t||"number"==typeof t||Array.isArray(t))&&(t=new n(t)),h||(i=e.io&&"function"==typeof e.io.normalize,h=function(t){return o?s.fromAnalog(s.translate(t,r)):i?e.io.normalize(t):t},u.set(e,h)),function(t){return void 0!==t.pin||void 0!==t.pins&&t.pins.length}(t)&&(t.pins?t.pins=t.pins.map(h):t.pin=h(t.pin)),t},s.normalize.clear=function(){u.clear()},s.translations={UNO:{dtoa:{14:"A0",15:"A1",16:"A2",17:"A3",18:"A4",19:"A5"},tinker:{I0:"A0",I1:"A1",I2:"A2",I3:"A3",I4:"A4",I5:"A5",O0:11,O1:10,O2:9,O3:6,O4:5,O5:3,D13:13,D12:12,D8:8,D7:7,D4:4,D2:2}},MEGA:{dtoa:{54:"A0",55:"A1",56:"A2",57:"A3",58:"A4",59:"A5",60:"A6",61:"A7",62:"A8",63:"A9"},tinker:{I0:"A0",I1:"A1",I2:"A2",I3:"A3",I4:"A4",I5:"A5",I6:"A6",I7:"A7",I8:"A8",I9:"A9",O0:11,O1:10,O2:9,O3:6,O4:5,O5:3,D13:13,D12:12,D8:8,D7:7,D4:4,D2:2}}},s.translations.LEONARDO=s.translations.UNO,s.translate=function(t,e){var i=s.translations[e.toUpperCase()];return i?Object.keys(i).reduce(function(t,e){return i[e][t]||t},t):t},s.fromAnalog=function(t){return"string"==typeof t&&"A"===t[0]?parseInt(t.slice(1),10):t},s.identity=function(t,e){return[].findIndex.call(t,function(t){return t.name===e||t.id===e||t.port===e})},Object.keys(r).forEach(function(t){var e=t[0]+t.slice(1).toLowerCase();s.prototype["is"+e]=function(e){var i=this[e]||this[s.identity(this,e)];return!(!i||!i.supportedModes.includes(r[t]))}}),s.prototype.isDigital=function(t){var e=this[t]||this[s.identity(this,t)];return!(!e||!e.supportedModes.length)},t.exports=s},function(t,e,i){"use strict";e.byteLength=function(t){var e=h(t),i=e[0],n=e[1];return 3*(i+n)/4-n},e.toByteArray=function(t){for(var e,i=h(t),n=i[0],s=i[1],a=new o(function(t,e,i){return 3*(e+i)/4-i}(0,n,s)),u=0,l=s>0?n-4:n,c=0;c<l;c+=4)e=r[t.charCodeAt(c)]<<18|r[t.charCodeAt(c+1)]<<12|r[t.charCodeAt(c+2)]<<6|r[t.charCodeAt(c+3)],a[u++]=e>>16&255,a[u++]=e>>8&255,a[u++]=255&e;2===s&&(e=r[t.charCodeAt(c)]<<2|r[t.charCodeAt(c+1)]>>4,a[u++]=255&e);1===s&&(e=r[t.charCodeAt(c)]<<10|r[t.charCodeAt(c+1)]<<4|r[t.charCodeAt(c+2)]>>2,a[u++]=e>>8&255,a[u++]=255&e);return a},e.fromByteArray=function(t){for(var e,i=t.length,r=i%3,o=[],s=0,a=i-r;s<a;s+=16383)o.push(l(t,s,s+16383>a?a:s+16383));1===r?(e=t[i-1],o.push(n[e>>2]+n[e<<4&63]+"==")):2===r&&(e=(t[i-2]<<8)+t[i-1],o.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return o.join("")};for(var n=[],r=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)n[a]=s[a],r[s.charCodeAt(a)]=a;function h(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");return-1===i&&(i=e),[i,i===e?0:4-i%4]}function l(t,e,i){for(var r,o,s=[],a=e;a<i;a+=3)r=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(n[(o=r)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,i,n,r){var o,s,a=8*r-n-1,u=(1<<a)-1,h=u>>1,l=-7,c=i?r-1:0,f=i?-1:1,p=t[e+c];for(c+=f,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+t[e+c],c+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;l>0;s=256*s+t[e+c],c+=f,l-=8);if(0===o)o=1-h;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),o-=h}return(p?-1:1)*s*Math.pow(2,o-n)},e.write=function(t,e,i,n,r,o){var s,a,u,h=8*o-r-1,l=(1<<h)-1,c=l>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+c>=1?f/u:f*Math.pow(2,1-c))*u>=2&&(s++,u/=2),s+c>=l?(a=0,s=l):s+c>=1?(a=(e*u-1)*Math.pow(2,r),s+=c):(a=e*Math.pow(2,c-1)*Math.pow(2,r),s=0));r>=8;t[i+p]=255&a,p+=d,a/=256,r-=8);for(s=s<<r|a,h+=r;h>0;t[i+p]=255&s,p+=d,s/=256,h-=8);t[i+p-d]|=128*v}},function(t,e,i){"use strict";(function(e,n){const r=i(1);var o=i(35),s=i(72),a=i(73),u=new Map,h=224,l=144,c=247,f=118,p=24,d=249,v=240,g=128,E={};E[d]=function(t){t.version.major=t.currentBuffer[1],t.version.minor=t.currentBuffer[2],t.emit("reportversion")},E[h]=function(t){var e=15&t.currentBuffer[0],i=t.currentBuffer[1]|t.currentBuffer[2]<<7;t.pins[t.analogPins[e]]&&(t.pins[t.analogPins[e]].value=i),t.emit("analog-read-"+e,i),t.emit("analog-read",{pin:e,value:i})},E[l]=function(t){for(var e=15&t.currentBuffer[0],i=t.currentBuffer[1]|t.currentBuffer[2]<<7,n=0;n<8;n++){var r=8*e+n,o=t.pins[r],s=1<<n;!o||o.mode!==t.MODES.INPUT&&o.mode!==t.MODES.PULLUP||(o.value=i>>(7&n)&1,o.value?t.ports[e]|=s:t.ports[e]&=~s,t.emit("digital-read-"+r,o.value),t.emit("digital-read",{pin:r,value:o.value}))}};var m={};function y(t,e,i){if("function"!=typeof e&&void 0!==e||(i=e,e={}),!(this instanceof y))return new y(t,e,i);r.call(this);var n=this;e.bufferSize&&(e.highWaterMark=e.bufferSize);var o=Object.assign({},{reportVersionTimeout:5e3,samplingInterval:19,serialport:{baudRate:57600,highWaterMark:256}},e);function s(){n.isReady=!0,n.emit("ready"),"function"==typeof i&&i()}this.isReady=!1,this.MODES={INPUT:0,OUTPUT:1,ANALOG:2,PWM:3,SERVO:4,SHIFT:5,I2C:6,ONEWIRE:7,STEPPER:8,SERIAL:10,PULLUP:11,IGNORE:127,PING_READ:117,UNKOWN:16},this.I2C_MODES={WRITE:0,READ:1,CONTINUOUS_READ:2,STOP_READING:3},this.STEPPER={TYPE:{DRIVER:1,TWO_WIRE:2,THREE_WIRE:3,FOUR_WIRE:4},STEP_SIZE:{WHOLE:0,HALF:1},RUN_STATE:{STOP:0,ACCEL:1,DECEL:2,RUN:3},DIRECTION:{CCW:0,CW:1}},this.SERIAL_MODES={CONTINUOUS_READ:0,STOP_READING:1},this.SERIAL_PORT_IDs={HW_SERIAL0:0,HW_SERIAL1:1,HW_SERIAL2:2,HW_SERIAL3:3,SW_SERIAL0:8,SW_SERIAL1:9,SW_SERIAL2:16,SW_SERIAL3:17,DEFAULT:8},this.SERIAL_PIN_TYPES={RES_RX0:0,RES_TX0:1,RES_RX1:2,RES_TX1:3,RES_RX2:4,RES_TX2:5,RES_RX3:6,RES_TX3:7},this.RESOLUTION={ADC:null,DAC:null,PWM:null},this.HIGH=1,this.LOW=0,this.pins=[],this.ports=Array(16).fill(0),this.analogPins=[],this.version={},this.firmware={},this.currentBuffer=[],this.versionReceived=!1,this.name="Firmata",this.settings=o,this.pending=0,this.transport="object"==typeof t?t:new a.SerialPort(t,o.serialport),this.sp=this.transport,this.transport.on("close",function(t){t&&t.disconnect&&t.disconnected?this.emit("disconnect"):this.emit("close")}.bind(this)),this.transport.on("open",function(t){this.emit("open",t),this.emit("connect",t)}.bind(this)),this.transport.on("error",function(t){this.isReady||"function"!=typeof i?this.emit("error",t):i(t)}.bind(this)),this.transport.on("data",function(t){for(var e,i,n,r,o,s,a=0;a<t.length;a++)e=t[a],0===this.currentBuffer.length&&0===e||(this.currentBuffer.push(e),r=this.currentBuffer[0],o=this.currentBuffer[this.currentBuffer.length-1],r===v&&o===c?((s=m[this.currentBuffer[1]])&&this.versionReceived&&s(this),this.currentBuffer.length=0):r===v&&this.currentBuffer.length>0?(i=t[a])>127&&(this.currentBuffer.length=0,this.currentBuffer.push(i)):r!==v&&(n=r<v?r&v:r)!==d&&n!==h&&n!==l&&(this.currentBuffer.length=0),3===this.currentBuffer.length&&r!==v&&(E[n=r<v?r&v:r]?((this.versionReceived||r===d)&&(this.versionReceived=!0,E[n](this)),this.currentBuffer.length=0):this.currentBuffer.length=0))}.bind(this)),this.reportVersionTimeoutId=setTimeout(function(){!1===this.versionReceived&&(this.reportVersion(function(){}),this.queryFirmware(function(){}))}.bind(this),o.reportVersionTimeout),this.once("reportversion",function(){clearTimeout(this.reportVersionTimeoutId),this.versionReceived=!0,this.once("queryfirmware",function(){if(void 0!==e.samplingInterval&&this.setSamplingInterval(e.samplingInterval),o.skipCapabilities){if(this.analogPins=o.analogPins||this.analogPins,this.pins=o.pins||this.pins,!this.pins.length)for(var t=0;t<(o.pinCount||g);t++){var i=this.analogPins.indexOf(t);i<0&&(i=127),this.pins.push({supportedModes:[],analogChannel:i})}this.RESOLUTION.ADC=1023,this.RESOLUTION.PWM=255,s()}else this.queryCapabilities(function(){this.queryAnalogMapping(s)})})})}function b(t,i){t.pending++,t.transport.write(new e(i),function(){t.pending--})}function R(t,e){var i=u.get(t);if(!i)throw new Error("I2C is not enabled for this board. To enable, call the i2cConfig() method.");if(e[1]===f){var n=e[2];i[n]||(i[n]={stopTX:!0}),e[3]&p&&(e[3]|=Number(!i[n].stopTX)<<6)}b(t,e)}function S(t){var e=[],i=t<0;return t=Math.abs(t),e.push(127&t,t>>7&127,t>>14&127,t>>21&127,t>>28&7),i&&(e[e.length-1]|=8),e}function T(t){var e=127&t[0]|(127&t[1])<<7|(127&t[2])<<14|(127&t[3])<<21|(7&t[4])<<28;return t[4]>>3&&(e*=-1),e}m[121]=function(t){for(var i=t.currentBuffer.length-2,n=new e(Math.round((i-4)/2)),r=0,o=0,s=4;s<i;s+=2)r=255&(127&t.currentBuffer[s]|(127&t.currentBuffer[s+1])<<7),n.writeUInt8(r,o++);t.firmware={name:n.toString(),version:{major:t.currentBuffer[2],minor:t.currentBuffer[3]}},t.emit("queryfirmware")},m[108]=function(t){var e,i,n=Object.keys(t.MODES).map(function(e){return t.MODES[e]}),r=0;function o(t){return n.reduce(function(e,i,n){return t&1<<i&&e.push(i),e},[])}if(!t.pins.length)for(var s=2,a=0;s<t.currentBuffer.length-1;s++)127!==t.currentBuffer[s]?(0===a&&(e=t.currentBuffer[s],i=(1<<t.currentBuffer[s+1])-1,r|=1<<e,e===t.MODES.ANALOG&&null===t.RESOLUTION.ADC&&(t.RESOLUTION.ADC=i),e===t.MODES.PWM&&null===t.RESOLUTION.PWM&&(t.RESOLUTION.PWM=i)),a^=1):(t.pins.push({supportedModes:o(r),mode:void 0,value:0,report:1}),r=0,a=0);t.emit("capability-query")},m[110]=function(t){var e=t.currentBuffer[2];t.pins[e].mode=t.currentBuffer[3],t.pins[e].state=t.currentBuffer[4],t.currentBuffer.length>6&&(t.pins[e].state|=t.currentBuffer[5]<<7),t.currentBuffer.length>7&&(t.pins[e].state|=t.currentBuffer[6]<<14),t.emit("pin-state-"+e)},m[106]=function(t){for(var e,i=0,n=2;n<t.currentBuffer.length-1;n++)e=t.currentBuffer[n],t.pins[i].analogChannel=e,127!==e&&t.analogPins.push(i),i++;t.emit("analog-mapping-query")},m[119]=function(t){for(var e=[],i=127&t.currentBuffer[2]|(127&t.currentBuffer[3])<<7,n=127&t.currentBuffer[4]|(127&t.currentBuffer[5])<<7,r=6,o=t.currentBuffer.length-1;r<o;r+=2)e.push(t.currentBuffer[r]|t.currentBuffer[r+1]<<7);t.emit("I2C-reply-"+i+"-"+n,e)},m[115]=function(t){var e=t.currentBuffer[2];m[e]&&m[e](t)},m[66]=function(t){var e=t.currentBuffer[3],i=t.currentBuffer.slice(4,t.currentBuffer.length-1);t.emit("1-wire-search-reply-"+e,s.readDevices(i))},m[69]=function(t){var e=t.currentBuffer[3],i=t.currentBuffer.slice(4,t.currentBuffer.length-1);t.emit("1-wire-search-alarms-reply-"+e,s.readDevices(i))},m[67]=function(t){var e=t.currentBuffer.slice(4,t.currentBuffer.length-1),i=o.from7BitArray(e),n=i[1]<<8|i[0];t.emit("1-wire-read-reply-"+n,i.slice(2))},m[113]=function(t){var i=new e(t.currentBuffer.slice(2,-1)).toString("utf8").replace(/\0/g,"");t.emit("string",i)},m[117]=function(t){var e=127&t.currentBuffer[2]|(127&t.currentBuffer[3])<<7,i=[127&t.currentBuffer[4]|(127&t.currentBuffer[5])<<7,127&t.currentBuffer[6]|(127&t.currentBuffer[7])<<7,127&t.currentBuffer[8]|(127&t.currentBuffer[9])<<7,127&t.currentBuffer[10]|(127&t.currentBuffer[11])<<7],n=(i[0]<<24)+(i[1]<<16)+(i[2]<<8)+i[3];t.emit("ping-read-"+e,n)},m[114]=function(t){var e=t.currentBuffer[2];t.emit("stepper-done-"+e,!0)},m[98]=function(t){var e,i=t.currentBuffer[2],n=t.currentBuffer[3];6===i&&(e=T(t.currentBuffer.slice(4,9)),t.emit("stepper-position-"+n,e)),10===i&&(e=T(t.currentBuffer.slice(4,9)),t.emit("stepper-done-"+n,e)),36===i&&t.emit("multi-stepper-done-"+n)},m[96]=function(t){var e=240&t.currentBuffer[2],i=15&t.currentBuffer[2],n=[];if(64===e){for(var r=3,o=t.currentBuffer.length;r<o-1;r+=2)n.push(t.currentBuffer[r+1]<<7|t.currentBuffer[r]);t.emit("serial-data-"+i,n)}},y.prototype=Object.create(r.prototype,{constructor:{value:y}}),y.prototype.reportVersion=function(t){this.once("reportversion",t),b(this,[d])},y.prototype.queryFirmware=function(t){this.once("queryfirmware",t),b(this,[v,121,c])},y.prototype.analogRead=function(t,e){this.reportAnalogPin(t,1),this.addListener("analog-read-"+t,e)},y.prototype.pwmWrite=function(t,e){var i=[];this.pins[t].value=e,t>15?(i[0]=v,i[1]=111,i[2]=t,i[3]=127&e,i[4]=e>>7&127,e>16384&&(i[i.length]=e>>14&127),e>2097152&&(i[i.length]=e>>21&127),e>268435456&&(i[i.length]=e>>28&127),i[i.length]=c):i.push(h|t,127&e,e>>7&127),b(this,i)},y.prototype.analogWrite=y.prototype.pwmWrite,y.prototype.servoConfig=function(t,e,i){var n;if("object"==typeof t&&null!==t&&(t=(n=t).pin,e=n.min,i=n.max),void 0===t)throw new Error("servoConfig: pin must be specified");if(void 0===e)throw new Error("servoConfig: min must be specified");if(void 0===i)throw new Error("servoConfig: max must be specified");this.pins[t].mode=this.MODES.SERVO,b(this,[v,112,t,127&e,e>>7&127,127&i,i>>7&127,c])},y.prototype.servoWrite=function(t,e){this.analogWrite.apply(this,arguments)},y.prototype.pinMode=function(t,e){this.pins[t].mode=e,b(this,[244,t,e])},y.prototype.digitalWrite=function(t,e){var i=t>>3,n=1<<(7&t);this.pins[t].value=e,e?this.ports[i]|=n:this.ports[i]&=~n,b(this,[l|i,127&this.ports[i],this.ports[i]>>7&127])},y.prototype.digitalRead=function(t,e){this.reportDigitalPin(t,1),this.addListener("digital-read-"+t,e)},y.prototype.queryCapabilities=function(t){this.once("capability-query",t),b(this,[v,107,c])},y.prototype.queryAnalogMapping=function(t){this.once("analog-mapping-query",t),b(this,[v,105,c])},y.prototype.queryPinState=function(t,e){this.once("pin-state-"+t,e),b(this,[v,109,t,c])},y.prototype.sendString=function(t){var i=new e(t+"\0","utf8"),n=[];n.push(v),n.push(113);for(var r=0,o=i.length;r<o;r++)n.push(127&i[r]),n.push(i[r]>>7&127);n.push(c),b(this,n)},y.prototype.sendI2CConfig=function(t){return this.i2cConfig(t)},y.prototype.i2cConfig=function(t){var e,i=u.get(this);return i||(i={},u.set(this,i)),"number"==typeof t?e=t:"object"==typeof t&&null!==t&&(e=Number(t.delay),void 0!==t.address&&(i[t.address]||(i[t.address]={stopTX:!0})),void 0!==t.settings&&Object.assign(i[t.address],t.settings)),i.delay=e=e||0,R(this,[v,120,255&e,e>>8&255,c]),this},y.prototype.sendI2CWriteRequest=function(t,e){var i=[];e=e||[],i.push(v,f,t,this.I2C_MODES.WRITE<<3);for(var n=0,r=e.length;n<r;n++)i.push(127&e[n],e[n]>>7&127);i.push(c),R(this,i)},y.prototype.i2cWrite=function(t,i,n){var r,o=[v,f,t,this.I2C_MODES.WRITE<<3];if(3===arguments.length&&!Array.isArray(i)&&!Array.isArray(n))return this.i2cWriteReg(t,i,n);2===arguments.length&&(Array.isArray(i)?(n=i.slice(),i=n.shift()):n=[]);for(var s=0,a=(r=new e([i].concat(n))).length;s<a;s++)o.push(127&r[s],r[s]>>7&127);return o.push(c),R(this,o),this},y.prototype.i2cWriteReg=function(t,e,i){return R(this,[v,f,t,this.I2C_MODES.WRITE<<3,127&e,e>>7&127,127&i,i>>7&127,c]),this},y.prototype.sendI2CReadRequest=function(t,e,i){R(this,[v,f,t,this.I2C_MODES.READ<<3,127&e,e>>7&127,c]),this.once("I2C-reply-"+t+"-0",i)},y.prototype.i2cRead=function(t,e,i,n){3===arguments.length&&"number"==typeof e&&"function"==typeof i&&(n=i,i=e,e=null);var r="I2C-reply-"+t+"-",o=[v,f,t,this.I2C_MODES.CONTINUOUS_READ<<3];return null!==e?o.push(127&e,e>>7&127):e=0,r+=e,o.push(127&i,i>>7&127,c),this.on(r,n),R(this,o),this},y.prototype.i2cStop=function(t){null!=t&&("number"==typeof t&&(t={address:t}),b(this,[v,f,t.address,this.I2C_MODES.STOP_READING<<3,c]),Object.keys(this._events).forEach(function(e){e.startsWith("I2C-reply-"+t.address)&&this.removeAllListeners(e)},this))},y.prototype.i2cReadOnce=function(t,e,i,n){3===arguments.length&&"number"==typeof e&&"function"==typeof i&&(n=i,i=e,e=null);var r="I2C-reply-"+t+"-",o=[v,f,t,this.I2C_MODES.READ<<3];return null!==e?o.push(127&e,e>>7&127):e=0,r+=e,o.push(127&i,i>>7&127,c),this.once(r,n),R(this,o),this},y.prototype.sendOneWireConfig=function(t,e){b(this,[v,115,65,t,e?1:0,c])},y.prototype.sendOneWireSearch=function(t,e){this._sendOneWireSearch(64,"1-wire-search-reply-"+t,t,e)},y.prototype.sendOneWireAlarmsSearch=function(t,e){this._sendOneWireSearch(68,"1-wire-search-alarms-reply-"+t,t,e)},y.prototype._sendOneWireSearch=function(t,e,i,n){b(this,[v,115,t,i,c]);var r=setTimeout(function(){n(new Error("1-Wire device search timeout - are you running ConfigurableFirmata?"))},5e3);this.once(e,function(t){clearTimeout(r),n(null,t)})},y.prototype.sendOneWireRead=function(t,e,i,n){var r=Math.floor(255*Math.random()),o=setTimeout(function(){n(new Error("1-Wire device read timeout - are you running ConfigurableFirmata?"))},5e3);this._sendOneWireRequest(t,8,e,i,r,null,null,"1-wire-read-reply-"+r,function(t){clearTimeout(o),n(null,t)})},y.prototype.sendOneWireReset=function(t){this._sendOneWireRequest(t,1)},y.prototype.sendOneWireWrite=function(t,e,i){this._sendOneWireRequest(t,32,e,null,null,null,Array.isArray(i)?i:[i])},y.prototype.sendOneWireDelay=function(t,e){this._sendOneWireRequest(t,16,null,null,null,e)},y.prototype.sendOneWireWriteAndRead=function(t,e,i,n,r){var o=Math.floor(255*Math.random()),s=setTimeout(function(){r(new Error("1-Wire device read timeout - are you running ConfigurableFirmata?"))},5e3);this._sendOneWireRequest(t,40,e,n,o,null,Array.isArray(i)?i:[i],"1-wire-read-reply-"+o,function(t){clearTimeout(s),r(null,t)})},y.prototype._sendOneWireRequest=function(t,e,i,n,r,s,a,u,h){var l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];(i||n||r||s||a)&&(e|=60),i&&l.splice.apply(l,[0,8].concat(i)),n&&(l[8]=255&n,l[9]=n>>8&255),r&&(l[10]=255&r,l[11]=r>>8&255),s&&(l[12]=255&s,l[13]=s>>8&255,l[14]=s>>16&255,l[15]=s>>24&255),a&&a.forEach(function(t){l.push(t)});var f=[v,115,e,t];(f=f.concat(o.to7BitArray(l))).push(c),b(this,f),u&&h&&this.once(u,h)},y.prototype.setSamplingInterval=function(t){var e=t<10?10:t>65535?65535:t;this.settings.samplingInterval=e,b(this,[v,122,127&e,e>>7&127,c])},y.prototype.getSamplingInterval=function(){return this.settings.samplingInterval},y.prototype.reportAnalogPin=function(t,e){0!==e&&1!==e||(this.pins[this.analogPins[t]].report=e,b(this,[192|t,e]))},y.prototype.reportDigitalPin=function(t,e){var i=t>>3;0!==e&&1!==e||(this.pins[t].report=e,b(this,[208|i,e]))},y.prototype.pingRead=function(t,e){if(-1===this.pins[t.pin].supportedModes.indexOf(117))throw new Error("Please upload PingFirmata to the board");var i=t.pin,n=t.value,r=t.pulseOut||0,o=t.timeout||1e6,s=[r>>24&255,r>>16&255,r>>8&255,255&r],a=[o>>24&255,o>>16&255,o>>8&255,255&o];b(this,[v,117,i,n,127&s[0],s[0]>>7&127,127&s[1],s[1]>>7&127,127&s[2],s[2]>>7&127,127&s[3],s[3]>>7&127,127&a[0],a[0]>>7&127,127&a[1],a[1]>>7&127,127&a[2],a[2]>>7&127,127&a[3],a[3]>>7&127,c]),this.once("ping-read-"+i,e)},y.prototype.accelStepperConfig=function(t){var e,i=0,n=[v,98,0,t.deviceNum];void 0===t.type&&(t.type=this.STEPPER.TYPE.FOUR_WIRE),void 0===t.stepSize&&(t.stepSize=this.STEPPER.STEP_SIZE.WHOLE),e=(7&t.type)<<4|(7&t.stepSize)<<1,void 0!==t.enablePin&&(e|=1),n.push(e),["stepPin","motorPin1","directionPin","motorPin2","motorPin3","motorPin4","enablePin"].forEach(function(e){void 0!==t[e]&&n.push(t[e])}),Array.isArray(t.invertPins)&&(-1!==t.invertPins.indexOf(t.motorPin1)&&(i|=1),-1!==t.invertPins.indexOf(t.motorPin2)&&(i|=2),-1!==t.invertPins.indexOf(t.motorPin3)&&(i|=4),-1!==t.invertPins.indexOf(t.motorPin4)&&(i|=8),-1!==t.invertPins.indexOf(t.enablePin)&&(i|=16)),n.push(i,c),b(this,n)},y.prototype.accelStepperZero=function(t){b(this,[v,98,1,t,c])},y.prototype.accelStepperStep=function(t,e,i){var n=[v,98,2,t];Array.prototype.push.apply(n,S(e)),n.push(c),b(this,n),i&&this.once("stepper-done-"+t,i)},y.prototype.accelStepperTo=function(t,e,i){var n=[v,98,3,t];Array.prototype.push.apply(n,S(e)),n.push(c),b(this,n),i&&this.once("stepper-done-"+t,i)},y.prototype.accelStepperEnable=function(t,e){void 0===e&&(e=!0),b(this,[v,98,4,t,1&e,c])},y.prototype.accelStepperStop=function(t){b(this,[v,98,5,t,c])},y.prototype.accelStepperReportPosition=function(t,e){b(this,[v,98,6,t,c]),e&&this.once("stepper-position-"+t,e)},y.prototype.accelStepperAcceleration=function(t,e){var i=[v,98,8,t];Array.prototype.push.apply(i,A(e)),i.push(c),b(this,i)},y.prototype.accelStepperSpeed=function(t,e){var i=[v,98,9,t];Array.prototype.push.apply(i,A(e)),i.push(c),b(this,i)},y.prototype.multiStepperConfig=function(t){var e=[v,98,32,t.groupNum];Array.prototype.push.apply(e,t.devices),e.push(c),b(this,e)},y.prototype.multiStepperTo=function(t,e,i){var n=[v,98,33,t];e.forEach(function(t){Array.prototype.push.apply(n,S(t))}),n.push(c),b(this,n),i&&this.once("multi-stepper-done-"+t,i)},y.prototype.multiStepperStop=function(t){b(this,[v,98,35,t,c])},y.prototype.stepperConfig=function(t,e,i,n,r,o,s){var a=[v,114,0,t,e,127&i,i>>7&127,n,r];e===this.STEPPER.TYPE.FOUR_WIRE&&a.push(o,s),a.push(c),b(this,a)},y.prototype.stepperStep=function(t,e,i,n,r,o,s){"function"==typeof r&&(s=r,r=0,o=0);var a=[v,114,1,t,e,127&i,i>>7&127,i>>14&127,127&n,n>>7&127];(r>0||o>0)&&a.push(127&r,r>>7&127,127&o,o>>7&127),a.push(c),b(this,a),this.once("stepper-done-"+t,s)},y.prototype.serialConfig=function(t){var e,i,n,r;if("object"==typeof t&&null!==t&&(e=t.portId,i=t.baud,n=t.rxPin,r=t.txPin),void 0===e)throw new Error("portId must be specified, see SERIAL_PORT_IDs for options.");var o=[v,96,16|e,127&(i=i||57600),i>>7&127,i>>14&127];if(e>7&&void 0!==n&&void 0!==r)o.push(n),o.push(r);else if(e>7)throw new Error("Both RX and TX pins must be defined when using Software Serial.");o.push(c),b(this,o)},y.prototype.serialWrite=function(t,e){for(var i=[v,96,32|t],n=0,r=e.length;n<r;n++)i.push(127&e[n]),i.push(e[n]>>7&127);i.push(c),e.length>0&&b(this,i)},y.prototype.serialRead=function(t,e,i){var n=[v,96,48|t,this.SERIAL_MODES.CONTINUOUS_READ];2===arguments.length&&"function"==typeof e?i=e:(n.push(127&e),n.push(e>>7&127)),n.push(c),b(this,n),this.on("serial-data-"+t,i)},y.prototype.serialStop=function(t){b(this,[v,96,48|t,this.SERIAL_MODES.STOP_READING,c]),this.removeAllListeners("serial-data-"+t)},y.prototype.serialClose=function(t){b(this,[v,96,80|t,c])},y.prototype.serialFlush=function(t){b(this,[v,96,96|t,c])},y.prototype.serialListen=function(t){t<8||b(this,[v,96,112|t,c])},y.prototype.sysexResponse=function(t,e){if(y.SYSEX_RESPONSE[t])throw new Error(t+" is not an available SYSEX_RESPONSE byte");return y.SYSEX_RESPONSE[t]=function(t){e.call(t,t.currentBuffer.slice(2,-1))},this},y.prototype.sysexCommand=function(t){if(!t||!t.length)throw new Error("Sysex Command cannot be empty");var e=t.slice();return e.unshift(v),e.push(c),b(this,e),this},y.prototype.reset=function(){b(this,[255])},y.isAcceptablePort=function(t){return!!/usb|acm|^com/i.test(t.comName)},y.requestPort=function(t){a.list(function(e,i){var n=i.find(function(t){if(y.isAcceptablePort(t))return t});n?t(null,n):t(new Error("No Acceptable Port Found"),null)})},y.Board=y,y.SYSEX_RESPONSE=m,y.MIDI_RESPONSE=E,y.encode=function(t){for(var e=[],i=t.length,n=0;n<i;n++)e.push(127&t[n],t[n]>>7&127);return e},y.decode=function(t){var e=[];if(t.length%2!=0)throw new Error("Board.decode(data) called with odd number of data bytes");for(;t.length;){var i=t.shift(),n=t.shift();e.push(i|n<<7)}return e};const O=Math.pow(2,23);function A(t){var e=0,i=t<0?1:0;t=Math.abs(t);var n=Math.floor(Math.log10(t));for(e+=n,t/=Math.pow(10,n);!Number.isInteger(t)&&t<O;)e-=1,t*=10;for(;t>O;)e+=1,t/=10;return[127&(t=Math.trunc(t)),t>>7&127,t>>14&127,t>>21&3|(15&(e+=11))<<2|(1&i)<<6]}n.env.IS_TEST_MODE&&(y.test={writeToTransport:b,i2cPeripheralSettings:function(t){return u.get(t)},get i2cActive(){return u},encode32BitSignedInteger:S,decode32BitSignedInteger:T,encodeCustomFloat:A,decodeCustomFloat:function(t){var e=t[0]|t[1]<<7|t[2]<<14|(3&t[3])<<21,i=(t[3]>>2&15)-11;return t[3]>>6&1&&(e*=-1),e*Math.pow(10,i)}}),t.exports=y}).call(this,i(8).Buffer,i(0))},function(t,e,i){"use strict";const n=i(35),r={crc8(t){let e=0;for(let i of t)for(let t=8;t;t--){const t=1&(e^i);e>>=1,t&&(e^=140),i>>=1}return e},readDevices(t){const e=n.from7BitArray(t),i=[];for(let t=0;t<e.length;t+=8){const n=e.slice(t,t+8);8===n.length&&(r.crc8(n.slice(0,7))!==n[7]&&console.error("ROM invalid!"),i.push(n))}return i}};t.exports=r},function(t,e,i){"use strict";(function(e,n){const r=i(1);function o(t,e,i){this.isOpen=!0,this.baudRate=0,this.path=t}let s,a;o.prototype=Object.create(r.prototype,{constructor:{value:o}}),o.prototype.write=function(t){e.isBuffer(t)&&(t=Array.from(t)),this.lastWrite=t,this.emit("write",t)};let u={SerialPort:o,list:()=>Promise.resolve([])};try{s=n.browser||parseFloat(n.versions.nw)>=.13?i(19):n.env.IS_TEST_MODE?u:{SerialPort:a=i(16),list:a.list}}catch(t){}if(null==s){if(!n.env.IS_TEST_MODE)throw console.log("It looks like serialport didn't compile properly. This is a common problem and its fix is well documented here https://github.com/voodootikigod/node-serialport#to-install"),console.log("The result of requiring the package is: ",a),"Missing serialport dependency";s=u}t.exports=s}).call(this,i(8).Buffer,i(0))},function(t,e,i){(function(e){t.exports={nano:function(t){for(var i=e.hrtime();e.hrtime()<i+t;);}}}).call(this,i(0))},function(t,e){e.linear=function(t){return t},e.inQuad=function(t){return t*t},e.outQuad=function(t){return t*(2-t)},e.inOutQuad=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},e.inCube=function(t){return t*t*t},e.outCube=function(t){return--t*t*t+1},e.inOutCube=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},e.inQuart=function(t){return t*t*t*t},e.outQuart=function(t){return 1- --t*t*t*t},e.inOutQuart=function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},e.inQuint=function(t){return t*t*t*t*t},e.outQuint=function(t){return--t*t*t*t*t+1},e.inOutQuint=function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},e.inSine=function(t){return 1-Math.cos(t*Math.PI/2)},e.outSine=function(t){return Math.sin(t*Math.PI/2)},e.inOutSine=function(t){return.5*(1-Math.cos(Math.PI*t))},e.inExpo=function(t){return 0==t?0:Math.pow(1024,t-1)},e.outExpo=function(t){return 1==t?t:1-Math.pow(2,-10*t)},e.inOutExpo=function(t){return 0==t?0:1==t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},e.inCirc=function(t){return 1-Math.sqrt(1-t*t)},e.outCirc=function(t){return Math.sqrt(1- --t*t)},e.inOutCirc=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},e.inBack=function(t){var e=1.70158;return t*t*((e+1)*t-e)},e.outBack=function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},e.inOutBack=function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)},e.inBounce=function(t){return 1-e.outBounce(1-t)},e.outBounce=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},e.inOutBounce=function(t){return t<.5?.5*e.inBounce(2*t):.5*e.outBounce(2*t-1)+.5},e["in-quad"]=e.inQuad,e["out-quad"]=e.outQuad,e["in-out-quad"]=e.inOutQuad,e["in-cube"]=e.inCube,e["out-cube"]=e.outCube,e["in-out-cube"]=e.inOutCube,e["in-quart"]=e.inQuart,e["out-quart"]=e.outQuart,e["in-out-quart"]=e.inOutQuart,e["in-quint"]=e.inQuint,e["out-quint"]=e.outQuint,e["in-out-quint"]=e.inOutQuint,e["in-sine"]=e.inSine,e["out-sine"]=e.outSine,e["in-out-sine"]=e.inOutSine,e["in-expo"]=e.inExpo,e["out-expo"]=e.outExpo,e["in-out-expo"]=e.inOutExpo,e["in-circ"]=e.inCirc,e["out-circ"]=e.outCirc,e["in-out-circ"]=e.inOutCirc,e["in-back"]=e.inBack,e["out-back"]=e.outBack,e["in-out-back"]=e.inOutBack,e["in-bounce"]=e.inBounce,e["out-bounce"]=e.outBounce,e["in-out-bounce"]=e.inOutBounce},function(t,e,i){(function(e,n){var r=i(1).EventEmitter,o=i(2),s=1e6,a=new r,u={},h=Date.now(),l=!1,c=e.setImmediate||n.nextTick,f=function(){var t=n.hrtime();return Math.floor((1e9*t[0]+t[1])/s)},p=function(){return Date.now()},d=p;function v(t){if(!(this instanceof v))return new v(t);this.called=0,this.now=this.calledAt=d(),1e6!==s&&(t.time=~~(t.time*(1e6/s))),this.isRunnable=!0,this.later=this.now+t.time,this.task=t.task,this.type=t.type,this.time=t.time,this.later>h&&(h=this.later),u[this.later]||(u[this.later]=[]),u[this.later].push(this)}function g(t){this.refs=[],this.add(t)}o.inherits(v,r),v.deriveOp=function(t,e){return"task"!==e?e:t},v.prototype.stop=function(){this.isRunnable=!1,this.emit("stop")},o.inherits(g,r),g.prototype.stop=function(){this.refs.forEach(function(t){t.stop()}),this.emit("stop")},g.prototype.add=function(t){var e,i,n,r;for(this.cumulative=this.cumulative||0;t.length;)i=t.shift(),e=Object.keys(i).reduce(v.deriveOp,""),this.cumulative+=i[e],0===t.length&&(n=i.task,i.task=(t=>{n.call(this,t),this.emit("end",t),this.cumulative=0})),r="loop"===e&&0===t.length?a.delay(this.cumulative-i[e],()=>{r=a.loop(i[e],i.task),this.refs.push(r)}):a[e](this.cumulative,i.task),this.refs.push(r)},a.queue=function(t){var e=new g(t);return m(),e};var E=d();function m(){l||(l=!0,a.emit("busy"));var t,e,i=d(),n=[],r=!0;for(h<=i&&(r=!1),e=E;e<=i;e++)[].push.apply(n,u[e]||[]);if(n.length){for(;n.length;)(t=n.shift()).isRunnable&&(t.called++,t.calledAt=i,t.task.call(t,t)),"loop"===t.type&&t.isRunnable&&(r=!0,t.later=i+t.time,t.later>h&&(h=t.later),u[t.later]||(u[t.later]=[]),t.isRunnable&&u[t.later].push(t));for(e=E;e<=i;e++)delete u[e];n.length=0}E=i,r?c(m):(l=!1,a.emit("idle"))}["loop","delay"].forEach(function(t){a[t]=function(e,i){"function"==typeof e&&(i=e,e=10);var n=new v({time:e,type:t,task:i});return l||m(),n}}),a.wait=a.defer=a.delay,a.repeat=function(t,e,i){return a.loop(e,function(e){i(e),e.called===t&&this.stop()})},a.clear=function(){l=!1,a.removeAllListeners(),u={}},a.resolution=function(t){.1===t||.01===t?(s=1e6*t,d=f):(s=1e6,d=p),E=d()},t.exports=a}).call(this,i(7),i(0))},function(t,e,i){(function(e){var n=i(4),r=i(6),o=i(13),s=n.Pins,a=i(5),u=i(1).EventEmitter,h=i(2),l=new Map,c={down:["down","press"],up:["up","release"]},f={DEFAULT:{initialize:{value:function(t,e){var i=l.get(this);s.isFirmata(this)&&"string"==typeof t.pinValue&&"A"===t.pinValue[0]&&(t.pinValue=this.io.analogPins[+t.pinValue.slice(1)]),this.pin=Number.isNaN(+t.pinValue)?t.pinValue:+t.pinValue,this.io.pinMode(this.pin,this.io.MODES.INPUT),this.pullup&&this.io.digitalWrite(this.pin,this.io.HIGH),this.pulldown&&this.io.digitalWrite(this.pin,this.io.LOW),this.io.digitalRead(this.pin,function(t){t!==i.last&&e(t)})}},toBoolean:{value:function(t){return t===this.downValue}}},TINKERKIT:{initialize:{value:function(t,e){var i=l.get(this),n=0;this.io.pinMode(this.pin,this.io.MODES.ANALOG),this.io.analogRead(this.pin,function(t){(t=t>512?1:0)!==n&&t!==i.last&&e(t),n=t})}},toBoolean:{value:function(t){return t===this.downValue}}},EVS_EV3:{initialize:{value:function(t,e){var i=l.get(this);i.previous=0,i.shield=o.shieldPort(t.pin),i.register=o.Touch,i.ev3=new o(Object.assign(t,{io:this.io})),i.ev3.setup(i.shield,o.Type_EV3_TOUCH),i.ev3.read(i.shield,o.Touch,o.Touch_Bytes,function(t){var n=t[0];i.previous!==n&&e(n),i.previous=n})}},toBoolean:{value:function(t){return t===this.downValue}}},EVS_NXT:{initialize:{value:function(t,e){var i=l.get(this);i.previous=0,i.shield=o.shieldPort(t.pin),i.ev3=new o(Object.assign(t,{io:this.io})),i.ev3.setup(i.shield,o.Type_ANALOG),i.ev3.read(i.shield,i.shield.analog,o.Analog_Bytes,function(t){var n=t[0]|t[1]<<8;n=n<300?1:0,i.previous!==n&&e(n),i.previous=n})}},toBoolean:{value:function(t){return t===this.downValue}}}};function p(t){if(!(this instanceof p))return new p(t);var e,i,r=!1,o=1,s=0,u=null,h={interval:null,last:null},d=a.debounce(function(t){c[t].forEach(function(t){this.emit(t)},this)},7);e="object"==typeof t?t.pin:t,n.Component.call(this,t=n.Options(t)),t.pinValue=e,null==(u=t.controller&&"string"==typeof t.controller?f[t.controller.toUpperCase()]:t.controller)&&(u=f.DEFAULT),n.Controller.call(this,u,t),this.holdtime=t.holdtime||500,this.pullup=t.pullup||t.isPullup||!1,this.pulldown=t.pulldown||t.isPulldown||!1,(r=void 0!==t.invert?t.invert:this.pullup||!1)&&(o^=1,s^=1),h.last=s,l.set(this,h),Object.defineProperties(this,{value:{get:function(){return Number(this.isDown)}},invert:{get:function(){return r},set:function(t){o=(r=t)?0:1,s=r?1:0,h.last=s}},downValue:{get:function(){return o},set:function(t){o=t,s=1^t,r=!!t,h.last=s}},upValue:{get:function(){return s},set:function(t){s=t,o=1^t,r=!!t,h.last=o}},isDown:{get:function(){return this.toBoolean(i)}}}),"function"==typeof this.initialize&&this.initialize(t,function(t){i=t,this.isDown||(h.interval&&clearInterval(h.interval),d.call(this,"up")),this.isDown&&(d.call(this,"down"),h.interval=setInterval(function(){this.isDown&&this.emit("hold")}.bind(this),this.holdtime)),h.last=t}.bind(this))}function d(t){if(!(this instanceof d))return new d(t);Object.defineProperty(this,"type",{value:p}),r.Emitter.call(this,t)}h.inherits(p,u),h.inherits(d,r.Emitter),r.installMethodForwarding(d.prototype,p.prototype),p.Collection=d,e.env.IS_TEST_MODE&&(p.Controllers=f,p.purge=function(){l.clear()}),t.exports=p}).call(this,i(0))},function(t,e,i){(function(e){var n=i(4),r=i(13),o=i(1).EventEmitter,s=i(2),a=i(5),u=new Map;function h(t,e){return Array(e-String(t).length+1).join("0")+t}var l={EVS_EV3:{initialize:{value:function(t,e){var i=u.get(this);t.mode&&(t.mode=t.mode.toUpperCase()),i.mode="RAW"===t.mode?r.Type_EV3_COLOR_RGBRAW:r.Type_EV3_COLOR,i.bytes=i.mode===r.Type_EV3_COLOR_RGBRAW?6:2,i.colors=[[],[0,0,0],[0,0,255],[0,128,0],[255,255,0],[255,0,0],[255,255,255],[139,69,19]],i.shield=r.shieldPort(t.pin),i.ev3=new r(Object.assign(t,{io:this.io})),i.ev3.setup(i.shield,r.Type_EV3),i.ev3.write(i.shield,129+i.shield.offset,i.mode),i.ev3.read(i.shield,r.ColorMeasure,i.bytes,function(t){var n="";if(2===i.bytes)n+=String(t[0]|t[1]<<8||1);else for(var r=0;r<3;r++)n+=h(t[2*r].toString(16),2);e(n)})}},toRGB:{value:function(t){var e=u.get(this);return e.mode===r.Type_EV3_COLOR?t>0&&t<8?e.colors[t]:e.colors[0]:(t=String(t),[0,0,0].map(function(e,i){return parseInt(t.slice(2*i,2*i+2),16)}))}}},EVS_NXT:{initialize:{value:function(t,e){var i=u.get(this);if(t.mode&&(t.mode=t.mode.toUpperCase()),i.mode="RAW"===t.mode?r.Type_NXT_COLOR_RGBRAW:r.Type_NXT_COLOR,i.bytes=i.mode===r.Type_NXT_COLOR_RGBRAW?10:1,i.mode===r.Type_NXT_COLOR_RGBRAW)throw new Error("Raw RGB is not currently supported for the NXT.");i.colors=[[],[0,0,0],[0,0,255],[0,128,0],[255,255,0],[255,0,0],[255,255,255]],i.shield=r.shieldPort(t.pin),i.ev3=new r(Object.assign(t,{io:this.io})),i.ev3.setup(i.shield,r.Type_NXT_COLOR),i.ev3.read(i.shield,112+i.shield.offset,i.bytes,function(t){var n="";1===i.bytes&&(n+=String(t[0])),e(n)})}},toRGB:{value:function(t){var e=u.get(this);return e.mode===r.Type_NXT_COLOR?t>0&&t<7?e.colors[t]:e.colors[0]:(t=String(t),[0,0,0].map(function(e,i){return parseInt(t.slice(2*i,2*i+2),16)}))}}},ISL29125:{REGISTER:{value:{RESET:0,CONFIG1:1,CONFIG2:2,CONFIG3:3,READ:9}},initialize:{value:function(t,e){var i=t.address||68;t.address=i,this.io.i2cConfig(),this.io.i2cWriteReg(i,this.REGISTER.RESET,70),this.io.i2cWriteReg(i,this.REGISTER.CONFIG1,13),this.io.i2cWriteReg(i,this.REGISTER.CONFIG2,63),this.io.i2cWriteReg(i,this.REGISTER.CONFIG3,0),this.io.i2cRead(i,this.REGISTER.READ,6,function(t){for(var i="",n=t[1]<<8|t[0],r=[(t[3]<<8|t[2])>>2,n>>2,(t[5]<<8|t[4])>>2].map(function(t){return a.constrain(t,0,255)}),o=0;o<3;o++)i+=h(r[o].toString(16),2);e(i)})}},toRGB:{value:function(t){return t=String(t),[0,0,0].map(function(e,i){return parseInt(t.slice(2*i,2*i+2),16)})}}}},c=["red","green","blue"];function f(t){if(!(this instanceof f))return new f(t);var e=null,i=t.freq||25,r=0,o=null;if(n.Component.call(this,t=n.Options(t)),null==(e="string"==typeof t.controller?l[t.controller]:t.controller))throw new Error("Color expects a valid controller");u.set(this,{}),n.Controller.call(this,e,t),this.toRGB||(this.toRGB=t.toRGB||function(t){return t}),Object.defineProperties(this,{value:{get:function(){return r}},rgb:{get:function(){return this.toRGB(r).reduce(function(t,e,i){return t[c[i]]=e,t},{})}}}),"function"==typeof this.initialize&&this.initialize(t,function(t){r=t}),setInterval(function(){if(void 0!==r){var t={rgb:this.rgb};this.emit("data",t),r!==o&&(o=r,this.emit("change",t))}}.bind(this),i)}s.inherits(f,o),f.hexCode=function(t){return void 0===t.red||void 0===t.green||void 0===t.blue?null:0===t.length?"unknown":c.reduce(function(e,i){return e+h(t[i].toString(16),2)},"")},e.env.IS_TEST_MODE&&(f.Controllers=l,f.purge=function(){u.clear()}),t.exports=f}).call(this,i(0))},function(t,e,i){(function(e){var n=i(4),r=i(9),o=n.Pins,s=i(6),a=i(5),u=i(1).EventEmitter,h=i(2),l=new Map,c={PCA9685:{initialize:{value:function(t){var e=l.get(this);this.address=t.address||64,this.pwmRange=t.pwmRange||[544,2400],this.frequency=t.frequency||50,e.expander=r.get({address:this.address,controller:this.controller,bus:this.bus,pwmRange:this.pwmRange,frequency:this.frequency}),this.pin=e.expander.normalize(t.pin)}},write:{writable:!0,value:function(t,e){l.get(this).expander.servoWrite(t,e)}}},DEFAULT:{initialize:{value:function(t){t.debug&&!this.board.pins.isServo(this.pin)&&n.Pins.Error({pin:this.pin,type:"PWM",via:"Servo"}),this.io.servoConfig(this.pin,this.pwmRange[0],this.pwmRange[1])}},write:{writable:!0,value:function(t,e){e|=0,this.io.servoWrite(t,e)}}}},f={FORWARD:{deviceName:{get:function(){return"FORWARD"}},dir:{value:function(t,e){if("forward"===e.name)return this.speed(t)}}},FORWARD_REVERSE:{deviceName:{get:function(){return"FORWARD_REVERSE"}},dir:{value:function(t,e){return"forward"===e.name?this.speed(a.fscale(t,0,100,this.neutral,this.range[1])):this.speed(a.fscale(t,0,100,this.neutral,this.range[0]))}}},FORWARD_BRAKE_REVERSE:{deviceName:{get:function(){return"FORWARD_BRAKE_REVERSE"}},dir:{value:function(t,e){"forward"===e.name?this.speed(a.fscale(t,0,100,this.neutral,this.range[1])):this.speed(a.fscale(t,0,100,this.neutral,this.range[0]))}}}};function p(t){if(!(this instanceof p))return new p(t);var e,i,r=null,s={history:[],value:0};if(n.Component.call(this,t=n.Options(t)),l.set(this,s),this.startAt=void 0!==t.startAt?t.startAt:null,this.neutral=t.neutral,this.range=t.range||[0,100],this.pwmRange=t.pwmRange||[544,2400],this.interval=null,void 0===t.controller&&o.isFirmata(this)&&("string"==typeof e&&"A"===e[0]&&(e=this.io.analogPins[+e.slice(1)]),e=+e,Number.isNaN(e)||this.pin===e||(this.pin=e)),(i="string"==typeof t.device?f[t.device]:t.device)||(i=f.FORWARD),(r=t.controller&&"string"==typeof t.controller?c[t.controller.toUpperCase()]:t.controller)||(r=c.DEFAULT),Object.defineProperties(this,Object.assign({},i,r,{value:{get:function(){return s.value}},history:{get:function(){return s.history.slice(-5)}},last:{get:function(){return s.history[s.history.length-1]||{last:null}}}})),this.initialize(t),"FORWARD"!==this.deviceName){if(Number.isNaN(+this.neutral))throw new Error("Directional speed controllers require a neutral point from 0-100 (number)");this.startAt=this.neutral}null!==this.startAt&&void 0!==this.startAt&&this.speed(this.startAt)}function d(t){if(!(this instanceof d))return new d(t);Object.defineProperty(this,"type",{value:p}),s.call(this,t)}h.inherits(p,u),p.prototype.speed=function(t){var e,i,n=l.get(this),r=n.history,o=!1,s=0;if(t=a.constrain(t,this.range[0],this.range[1]),this.interval){if(this.value===t)return this;clearInterval(this.interval),this.interval=null}if(n.value=t,0===r.length&&(o=!0),this.last.speed===t)return this;if(e=this.last.speed,i=t,(s=Math.ceil(Math.abs(e-i)))&&1!==s||(o=!0),o)return this.write(this.pin,a.fscale(t,0,100,this.pwmRange[0],this.pwmRange[1])),r.push({timestamp:Date.now(),speed:t}),this;var u=e;return this.interval=setInterval(function(){i>u?u++:u--,this.write(this.pin,a.fscale(u,0,100,this.pwmRange[0],this.pwmRange[1])),r.push({timestamp:Date.now(),speed:u}),s&&(--s||(clearInterval(this.interval),this.interval=null))}.bind(this),1),this},p.prototype.brake=function(){var t=l.get(this),e=this.neutral||0;return this.speed(e),t.history.push({timestamp:Date.now(),speed:e}),this},[{name:"forward",abbr:"fwd",value:1},{name:"reverse",abbr:"rev",value:0}].forEach(function(t){p.prototype[t.name]=p.prototype[t.abbr]=function(e){return this.dir(e,t),this}}),p.prototype.stop=function(){var t=l.get(this).history,e="bidirectional"===this.type?this.neutral:0;return this.write(this.pin,a.fscale(e,0,100,this.pwmRange[0],this.pwmRange[1])),t.push({timestamp:Date.now(),speed:e}),this},h.inherits(d,s),s.installMethodForwarding(d.prototype,p.prototype),p.Array=d,p.Collection=d,e.env.IS_TEST_MODE&&(p.Controllers=c,p.purge=function(){l.clear()}),t.exports=p}).call(this,i(0))},function(t,e,i){(function(e,n){var r=i(1),o=i(2),s=i(4),a=i(5),u=i(20),h=a.toFixed,l=new Map,c={ADAFRUIT_ULTIMATE_GPS:{receiver:{value:"FGPMMOPA6H"}}},f={FGPMMOPA6H:{chip:{value:"MT3339"}}},p={DEFAULT:{baud:{value:9600,writable:!0},configure:{value:function(t){e.nextTick(t)}}},MT3339:{baud:{value:9600,writable:!0},configure:{value:function(t){e.nextTick(t)}},frequency:{get:function(){return l.get(this).frequency},set:function(t){var e=l.get(this);t<10&&(t=10),e.frequency=t,this.sendCommand("$PMTK220,"+String(1e3/e.frequency))}},restart:{value:function(t){!0===t?this.sendCommand("$PMTK103"):(this.sendCommand("$PMTK101"),setTimeout(function(){this.sendCommand("")}.bind(this),1e3))}}}};function d(t){var e,i,n,r;if(!(this instanceof d))return new d(t);Array.isArray(t)&&(t={pins:{rx:t[0],tx:t[1],onOff:t[2]}}),void 0===t.pins&&(t.pins={}),s.Component.call(this,t=s.Options(t)),e=t.breakout||{},i=t.receiver,n=t.chip,c[e]&&(!i&&c[e].receiver&&(i=c[e].receiver.value),!n&&c[e].chip&&(n=c[e].chip.value)),n||(n=i&&f[i].chip?f[i].chip.value:"DEFAULT"),n="string"==typeof n?p[n]:t.chip,i="string"==typeof i?f[i]:t.receiver,Object.defineProperties(this,n),i&&Object.defineProperties(this,i),t.breakout&&(e="string"==typeof t.breakout?c[t.breakout]:t.breakout,s.Controller.call(this,e,t)),this.fixed=t.fixed||6,this.baud=t.baud||this.baud,r={sat:{},latitude:0,longitude:0,altitude:0,speed:0,course:0,frequency:1,lowPowerMode:!1},l.set(this,r),Object.defineProperties(this,{latitude:{get:function(){return r.latitude}},longitude:{get:function(){return r.longitude}},altitude:{get:function(){return r.altitude}},sat:{get:function(){return r.sat}},speed:{get:function(){return r.speed}},course:{get:function(){return r.course}},time:{get:function(){return r.time}}}),this.initialize&&this.initialize(t)}function v(t,e,i,n){if(t){var r=Number(t.substring(0,e))+Number(t.substring(e))/60;return"S"!==i&&"W"!==i||(r*=-1),Number(r.toFixed(n))}return 0}function g(t){for(var e=0,i=0;i<t.length;++i)e^=t.charCodeAt(i);return(e=e.toString(16).toUpperCase()).length<2&&(e=("00"+e).slice(-2)),e}o.inherits(d,r.EventEmitter),d.prototype.initialize=function(t){var e=l.get(this);e.portId=t.serialPort||t.portId||t.port||t.bus||this.io.SERIAL_PORT_IDs.DEFAULT,["tx","rx"].forEach(function(t){this.pins[t]&&this.io.pinMode(this.pins[t],this.io.MODES.SERIAL)},this),this.pins.onOff&&(this.io.pinMode(this.pins.onOff,this.io.MODES.OUTPUT),this.onOff=new u(this.pins.onOff)),this.io.serialConfig({portId:e.portId,baud:this.baud,rxPin:this.pins.rx,txPin:this.pins.tx}),this.configure&&this.configure(function(){this.listen(),t.frequency&&(this.frequency=t.frequency)}.bind(this))},d.prototype.sendCommand=function(t){for(var e=l.get(this),i=[],n=0;n<t.length;++n)i[n]=t.charCodeAt(n);var r=g(t.substring(1));i.push(42,r.charCodeAt(0),r.charCodeAt(1),13,10),this.io.serialWrite(e.portId,i)},d.prototype.listen=function(){var t=l.get(this),e="";this.io.serialRead(t.portId,function(t){var i=(e+=new n(t).toString("ascii")).split("\r\n");if(i.length>1){for(var r=0;r<i.length-1;r++)this.parseNmeaSentence(i[r]);e=i[i.length-1]}}.bind(this))},d.prototype.parseNmeaSentence=function(t){var e=l.get(this),i=t.split("*");if(i[1]===g(i[0].substring(1))){this.emit("sentence",t);var n=i[0].split(","),r=e.latitude,o=e.longitude,s=e.altitude,a=e.speed,u=e.course;switch(n[0]){case"$GPGGA":e.time=n[1],e.latitude=v(n[2],2,n[3],this.fixed),e.longitude=v(n[4],3,n[5],this.fixed),e.altitude=Number(n[9]);break;case"$GPGSA":e.sat.satellites=n.slice(3,15),e.sat.pdop=Number(n[15]),e.sat.hdop=Number(n[16]),e.sat.vdop=Number(n[17]),this.emit("operations",t);break;case"$GPRMC":e.time=n[1],e.latitude=v(n[3],2,n[4],this.fixed),e.longitude=v(n[5],3,n[6],this.fixed),e.course=Number(n[8]),e.speed=h(.514444*n[7],this.fixed);break;case"$GPVTG":e.course=Number(n[1]),e.speed=h(.514444*n[5],this.fixed);break;case"$GPGSV":break;case"$PGACK":this.emit("acknowledge",t);break;default:this.emit("unknown",t)}this.emit("data",{latitude:e.latitude,longitude:e.longitude,altitude:e.altitude,speed:e.speed,course:e.course,sat:e.sat,time:e.time}),r===e.latitude&&o===e.longitude&&s===e.altitude||this.emit("change",{latitude:e.latitude,longitude:e.longitude,altitude:e.altitude}),a===e.speed&&u===e.course||this.emit("navigation",{speed:e.speed,course:e.course})}},e.env.IS_TEST_MODE&&(d.Breakouts=c,d.Chips=p,d.Receivers=f,d.purge=function(){l.clear()}),t.exports=d}).call(this,i(0),i(8).Buffer)},function(t,e,i){var n=i(43),r=i(5);function o(t){if(!(this instanceof o))return new o(t);"number"==typeof t&&(t={servo:{pin:t,range:[0,180]},scale:[0,10]}),this.scale=t.scale||[0,10],this.servo=t.servo instanceof n?t.servo:new n(t.servo)}[{name:"open",args:function(){return this.servo.range[0]}},{name:"close",args:function(){return this.servo.range[1]}},{name:"set",args:function(t){return Math.floor(r.map(t,this.scale[0],this.scale[1],this.servo.range[1],this.servo.range[0]))}}].forEach(function(t){o.prototype[t.name]=function(){return this.servo.to(t.args.apply(this,[].slice.call(arguments)))}}),t.exports=o},function(t,e,i){(function(e){var n=i(1).EventEmitter,r=i(2),o=i(4),s=i(5),a=s.scale,u=s.toFixed,h=s.uint16,l=new Map,c={down:["down","press","tap","impact","hit","touch"],up:["up","release"],hold:["hold"]};function f(t){var e=[];return t.keys&&Array.isArray(t.keys)&&(e=t.keys.slice()).every(Array.isArray)&&(e=e.reduce(function(t,e){return t.concat(e)},[])),e}var p={MPR121:{ADDRESSES:{value:[90,91,92,93]},REGISTER:{value:i(83)},initialize:{value:function(t,e){var i=l.get(this),n=t.address||this.ADDRESSES[0],r=f(t),o=this.REGISTER.MAPS[t.controller].KEYS,s=this.REGISTER.MAPS[t.controller].TARGETS,c=Object.keys(o).reduce(function(t,e){return t[e]=o[e],t},[]),p=c.length;t.address=n,this.io.i2cConfig(t),this.io.i2cWrite(n,this.REGISTER.MPR121_SOFTRESET,99),this.io.i2cWrite(n,this.REGISTER.MHD_RISING,1),this.io.i2cWrite(n,this.REGISTER.NHD_AMOUNT_RISING,1),this.io.i2cWrite(n,this.REGISTER.NCL_RISING,0),this.io.i2cWrite(n,this.REGISTER.FDL_RISING,0),this.io.i2cWrite(n,this.REGISTER.MHD_FALLING,1),this.io.i2cWrite(n,this.REGISTER.NHD_AMOUNT_FALLING,1),this.io.i2cWrite(n,this.REGISTER.NCL_FALLING,255),this.io.i2cWrite(n,this.REGISTER.FDL_FALLING,2),this.sensitivity={press:Array(12).fill(.95),release:Array(12).fill(.975)},t.keys&&"MPR121_SHIELD"===t.controller&&(r=r.reverse()),t.sensitivity&&(Array.isArray(t.sensitivity)?t.sensitivity.forEach(function(t,e){void 0!==t.press&&(this.sensitivity.press[e]=t.press),void 0!==t.release&&(this.sensitivity.release[e]=t.release)},this):(void 0!==t.sensitivity.press&&this.sensitivity.press.fill(t.sensitivity.press),void 0!==t.sensitivity.release&&this.sensitivity.release.fill(t.sensitivity.release)));for(var v=0;v<12;v++)this.io.i2cWrite(n,this.REGISTER.ELE0_TOUCH_THRESHOLD+(v<<1),a(u(1-this.sensitivity.press[v],3),0,1,0,255)),this.io.i2cWrite(n,this.REGISTER.ELE0_RELEASE_THRESHOLD+(v<<1),a(u(1-this.sensitivity.release[v],3),0,1,0,255));this.io.i2cWrite(n,this.REGISTER.FILTER_CONFIG,19),this.io.i2cWrite(n,this.REGISTER.AFE_CONFIGURATION,128),this.io.i2cWrite(n,this.REGISTER.AUTO_CONFIG_CONTROL_0,143),this.io.i2cWrite(n,this.REGISTER.AUTO_CONFIG_USL,228),this.io.i2cWrite(n,this.REGISTER.AUTO_CONFIG_LSL,148),this.io.i2cWrite(n,this.REGISTER.AUTO_CONFIG_TARGET_LEVEL,205),this.io.i2cWrite(n,this.REGISTER.ELECTRODE_CONFIG,204),r.length||(r=Array.from(Object.assign({},o,{length:p}))),i.length=p,i.touches=d(p),i.keys=r,i.mapping=c,i.targets=s,i.isMultitouch=!0,this.io.i2cRead(n,0,2,function(t){e(h(t[1],t[0]))})}},toAlias:{value:function(t){return l.get(this).keys[t]}},toIndices:{value:function(t){for(var e=l.get(this),i=[],n=0;n<12;n++)t&1<<n&&i.push(e.targets[t&1<<n]);return i}}},VKEY:{initialize:{value:function(t,e){var i,n=l.get(this),r=t.aref||this.io.aref||5,o=s.inRange(r,4.5,5.5),a=f(t),u=[1,2,3,4,5,6,7,8,9,10,11,12];a.length||(a=u),n.scale=[o?17:26,o?40:58,o?496:721],i=u.length,n.length=i,n.touches=d(i),n.mapping=u,n.keys=a,n.isMultitouch=!1,this.io.pinMode(this.pin,this.io.MODES.ANALOG),this.io.analogRead(this.pin,function(t){e(t)}.bind(this))}},toAlias:{value:function(t){return l.get(this).keys[t]}},toIndices:{value:function(t){var e=l.get(this),i=e.length,n=e.scale[0],r=e.scale[1],o=e.scale[2];return t<n||t>o?[]:[i-(t-n)/r|0]}}},ANALOG:{initialize:{value:function(t,e){var i,n,r=f(t);if(t.length&&!r.length&&(r=Array.from({length:t.length},function(t,e){return e})),!r.length)throw new Error("Missing `keys`. Analog Keypad requires either a numeric `length` or a `keys` array.");n=(i=r).length;var o=l.get(this),s=n+1,a=Math.round(1023/s),u=Array.from({length:s},function(t,e){var i=a*e;return Array.from({length:a-1},function(t,e){return i+e})});o.length=n,o.ranges=u,o.touches=d(n),o.mapping=i,o.keys=r,o.isMultitouch=!0,this.io.pinMode(this.pin,this.io.MODES.ANALOG),this.io.analogRead(this.pin,function(t){e(t)})}},toAlias:{value:function(t){return l.get(this).keys[t]}},toIndices:{value:function(t){var e=l.get(this),i=e.ranges.findIndex(function(e){return e.includes(t)});return i===e.length&&i--,i<0?[]:[i]}}},AT42QT1070:{ADDRESSES:{value:[27]},REGISTER:{value:{READ:3}},initialize:{value:function(t,e){var i,n=l.get(this),r=t.address||this.ADDRESSES[0],o=f(t),s=[0,1,2,3,4,5,6];o.length||(o=s),i=s.length,n.length=i,n.touches=d(i),n.mapping=s,n.keys=o,n.isMultitouch=!0,this.io.i2cConfig(t),this.io.i2cRead(r,this.REGISTER.READ,1,function(t){e(t[0])})}},toAlias:{value:function(t){return l.get(this).keys[t]}},toIndices:{value:function(t){for(var e=[],i=0;i<7;i++)t&1<<i&&e.push(i);return e}}},"3X4_I2C_NANO_BACKPACK":{ADDRESSES:{value:[10,11,12,13]},initialize:{value:function(t,e){var i,n=l.get(this),r=t.address||this.ADDRESSES[0],o=f(t),s=[1,2,3,4,5,6,7,8,9,"*",0,"#"];o.length||(o=s),i=s.length,n.length=i,n.touches=d(i),n.mapping=s,n.keys=o,n.isMultitouch=!0,t.address=r,this.io.i2cConfig(t),this.io.i2cRead(r,2,function(t){e(h(t[0],t[1]))})}},toAlias:{value:function(t){return l.get(this).keys[t]}},toIndices:{value:function(t){for(var e=l.get(this),i=[],n=0;n<e.length;n++)t&1<<n&&i.push(n);return i}}},"4X4_I2C_NANO_BACKPACK":{ADDRESSES:{value:[10,11,12,13]},initialize:{value:function(t,e){var i,n=l.get(this),r=t.address||this.ADDRESSES[0],o=f(t),s=[1,2,3,"A",4,5,6,"B",7,8,9,"C","*",0,"#","D"];o.length||(o=s),i=s.length,n.length=i,n.touches=d(i),n.mapping=s,n.keys=o,n.isMultitouch=!0,t.address=r,this.io.i2cConfig(t),this.io.i2cRead(r,2,function(t){e(h(t[0],t[1]))})}},toAlias:{value:function(t){return l.get(this).keys[t]}},toIndices:{value:function(t){for(var e=l.get(this),i=[],n=0;n<e.length;n++)t&1<<n&&i.push(n);return i}}},SX1509:{ADDRESSES:{value:[10,11,12,13]},REGISTER:{value:{PULLUP:3,OPEN_DRAIN:5,DIR:7,DIR_B:14,DIR_A:15}},initialize:{value:function(t,e){var i,n=l.get(this),r=t.address||this.ADDRESSES[0],o=f(t),s=[1,2,3,4,5,6,7,8,9,"*",0,"#"];o.length||(o=s),i=s.length,n.length=i,n.touches=d(i),n.mapping=s,n.keys=o,n.isMultitouch=!0,t.address=r,this.io.i2cConfig(t),this.io.i2cWriteReg(r,this.REGISTER.DIR,240),this.io.i2cWriteReg(r,this.REGISTER.OPEN_DRAIN,15),this.io.i2cWriteReg(r,this.REGISTER.PULLUP,240),this.io.i2cRead(r,2,function(t){e(h(t[0],t[1]))})}},toAlias:{value:function(t){return l.get(this).keys[t]}},toIndices:{value:function(t){for(var e=l.get(this),i=[],n=0;n<e.length;n++)t&1<<n&&i.push(n);return i}}}};function d(t){return Array.from({length:t},function(){return{timeout:null,value:0}})}function v(t){if(!(this instanceof v))return new v(t);o.Component.call(this,t=o.Options(t));var e=null,i=null,n={touches:null,timeout:null,length:null,keys:null,mapping:null,holdtime:null},r=s.debounce(function(t,e){var i={type:t,which:e,timestamp:Date.now()};c[t].forEach(function(t){this.emit(t,i)},this),this.emit("change",Object.assign({},i))},5);null==(i=t.controller&&"string"==typeof t.controller?p[t.controller.toUpperCase()]:t.controller)&&(i=p.ANALOG),o.Controller.call(this,i,t),n.holdtime=t.holdtime?t.holdtime:500,l.set(this,n),"function"==typeof this.initialize&&this.initialize(t,function(t){e=t;for(var i=Date.now(),o=this.toIndices(t),s=n.length,a={down:[],hold:[],up:[]},u=null,h=0;h<s;h++)u=this.toAlias(h),o.includes(h)?(0===n.touches[h].value?(n.touches[h].timeout=i+n.holdtime,a.down.push(u)):1===n.touches[h].value&&null!==n.touches[h].timeout&&i>n.touches[h].timeout&&(n.touches[h].timeout=i+n.holdtime,a.hold.push(u)),n.touches[h].value=1):(1===n.touches[h].value&&(n.touches[h].timeout=null,a.up.push(u)),n.touches[h].value=0),null,u=null;Object.keys(a).forEach(function(t){var e=a[t];e.length&&r.call(this,t,e)},this)}.bind(this)),Object.defineProperties(this,{isMultitouch:{get:function(){return n.isMultitouch}},value:{get:function(){return e}}})}p.MPR121QR2=p.MPR121,p.MPR121QR2_SHIELD=p.MPR121,p.MPR121_KEYPAD=p.MPR121,p.MPR121_SHIELD=p.MPR121,p.QTOUCH=p.AT42QT1070,r.inherits(v,n),e.env.IS_TEST_MODE&&(v.Controllers=p,v.purge=function(){l.clear()}),t.exports=v}).call(this,i(0))},function(t,e){t.exports={MAPS:{MPR121QR2_SHIELD:{KEYS:{0:1,1:2,2:3,3:4,4:5,5:6,6:7,7:8,8:9},TARGETS:{256:0,32:1,4:2,128:3,16:4,2:5,64:6,8:7,1:8}},MPR121:{KEYS:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,11:11},TARGETS:{1:0,2:1,4:2,8:3,16:4,32:5,64:6,128:7,256:8,512:9,1024:10,2048:11}},MPR121_KEYPAD:{KEYS:{0:1,1:2,2:3,3:4,4:5,5:6,6:7,7:8,8:9,9:10,10:11,11:12},TARGETS:{8:0,128:1,2048:2,4:3,64:4,1024:5,2:6,32:7,512:8,1:9,16:10,256:11}},MPR121_SHIELD:{KEYS:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,11:11},TARGETS:{1:0,2:1,4:2,8:3,16:4,32:5,64:6,128:7,256:8,512:9,1024:10,2048:11}}},MPR121_DEFAULT_ADDRESS:90,MPR121_SOFTRESET:128,ELE0_ELE7_TOUCH_STATUS:0,ELE8_ELE11_ELEPROX_TOUCH_STATUS:1,ELE0_7_OOR_STATUS:2,ELE8_11_ELEPROX_OOR_STATUS:3,ELE0_FILTERED_DATA_LSB:4,ELE0_FILTERED_DATA_MSB:5,ELE1_FILTERED_DATA_LSB:6,ELE1_FILTERED_DATA_MSB:7,ELE2_FILTERED_DATA_LSB:8,ELE2_FILTERED_DATA_MSB:9,ELE3_FILTERED_DATA_LSB:10,ELE3_FILTERED_DATA_MSB:11,ELE4_FILTERED_DATA_LSB:12,ELE4_FILTERED_DATA_MSB:13,ELE5_FILTERED_DATA_LSB:14,ELE5_FILTERED_DATA_MSB:15,ELE6_FILTERED_DATA_LSB:16,ELE6_FILTERED_DATA_MSB:17,ELE7_FILTERED_DATA_LSB:18,ELE7_FILTERED_DATA_MSB:19,ELE8_FILTERED_DATA_LSB:20,ELE8_FILTERED_DATA_MSB:21,ELE9_FILTERED_DATA_LSB:22,ELE9_FILTERED_DATA_MSB:23,ELE10_FILTERED_DATA_LSB:24,ELE10_FILTERED_DATA_MSB:25,ELE11_FILTERED_DATA_LSB:26,ELE11_FILTERED_DATA_MSB:27,ELEPROX_FILTERED_DATA_LSB:28,ELEPROX_FILTERED_DATA_MSB:29,ELE0_BASELINE_VALUE:30,ELE1_BASELINE_VALUE:31,ELE2_BASELINE_VALUE:32,ELE3_BASELINE_VALUE:33,ELE4_BASELINE_VALUE:34,ELE5_BASELINE_VALUE:35,ELE6_BASELINE_VALUE:36,ELE7_BASELINE_VALUE:37,ELE8_BASELINE_VALUE:38,ELE9_BASELINE_VALUE:39,ELE10_BASELINE_VALUE:40,ELE11_BASELINE_VALUE:41,ELEPROX_BASELINE_VALUE:42,MHD_RISING:43,NHD_AMOUNT_RISING:44,NCL_RISING:45,FDL_RISING:46,MHD_FALLING:47,NHD_AMOUNT_FALLING:48,NCL_FALLING:49,FDL_FALLING:50,NHD_AMOUNT_TOUCHED:51,NCL_TOUCHED:52,FDL_TOUCHED:53,ELEPROX_MHD_RISING:54,ELEPROX_NHD_AMOUNT_RISING:55,ELEPROX_NCL_RISING:56,ELEPROX_FDL_RISING:57,ELEPROX_MHD_FALLING:58,ELEPROX_NHD_AMOUNT_FALLING:59,ELEPROX_FDL_FALLING:60,ELEPROX_NHD_AMOUNT_TOUCHED:62,ELEPROX_NCL_TOUCHED:63,ELEPROX_FDL_TOUCHED:64,ELE0_TOUCH_THRESHOLD:65,ELE0_RELEASE_THRESHOLD:66,ELE1_TOUCH_THRESHOLD:67,ELE1_RELEASE_THRESHOLD:68,ELE2_TOUCH_THRESHOLD:69,ELE2_RELEASE_THRESHOLD:70,ELE3_TOUCH_THRESHOLD:71,ELE3_RELEASE_THRESHOLD:72,ELE4_TOUCH_THRESHOLD:73,ELE4_RELEASE_THRESHOLD:74,ELE5_TOUCH_THRESHOLD:75,ELE5_RELEASE_THRESHOLD:76,ELE6_TOUCH_THRESHOLD:77,ELE6_RELEASE_THRESHOLD:78,ELE7_TOUCH_THRESHOLD:79,ELE7_RELEASE_THRESHOLD:80,ELE8_TOUCH_THRESHOLD:81,ELE8_RELEASE_THRESHOLD:82,ELE9_TOUCH_THRESHOLD:83,ELE9_RELEASE_THRESHOLD:84,ELE10_TOUCH_THRESHOLD:85,ELE10_RELEASE_THRESHOLD:86,ELE11_TOUCH_THRESHOLD:87,ELE11_RELEASE_THRESHOLD:88,ELEPROX_TOUCH_THRESHOLD:89,ELEPROX_RELEASE_THRESHOLD:90,DEBOUNCE_TOUCH_AND_RELEASE:91,AFE_CONFIGURATION:92,FILTER_CONFIG:93,ELECTRODE_CONFIG:94,ELE0_CURRENT:95,ELE1_CURRENT:96,ELE2_CURRENT:97,ELE3_CURRENT:98,ELE4_CURRENT:99,ELE5_CURRENT:100,ELE6_CURRENT:101,ELE7_CURRENT:102,ELE8_CURRENT:103,ELE9_CURRENT:104,ELE10_CURRENT:105,ELE11_CURRENT:106,ELEPROX_CURRENT:107,ELE0_ELE1_CHARGE_TIME:108,ELE2_ELE3_CHARGE_TIME:109,ELE4_ELE5_CHARGE_TIME:110,ELE6_ELE7_CHARGE_TIME:111,ELE8_ELE9_CHARGE_TIME:112,ELE10_ELE11_CHARGE_TIME:113,ELEPROX_CHARGE_TIME:114,GPIO_CONTROL_0:115,GPIO_CONTROL_1:116,GPIO_DATA:117,GPIO_DIRECTION:118,GPIO_ENABLE:119,GPIO_SET:120,GPIO_CLEAR:121,GPIO_TOGGLE:122,AUTO_CONFIG_CONTROL_0:123,AUTO_CONFIG_CONTROL_1:124,AUTO_CONFIG_USL:125,AUTO_CONFIG_LSL:126,AUTO_CONFIG_TARGET_LEVEL:127,TOUCH_THRESHOLD:15,RELEASE_THRESHOLD:10,NUM_CHANNELS:12}},function(t,e,i){(function(e){var n=i(4),r=i(20),o=i(85),s=i(21),a=new Map;function u(t){for(var i,n=e.hrtime(),r=0;t>r;)r=(1e9*(i=e.hrtime(n))[0]+i[1])/1e3}function h(t){u(1e3*t)}function l(t,e){this.address=t,this.mask=255,this.memory=0,this.io=e}l.prototype.pinMode=function(t,e){1===e?this.mask&=~(1<<t):this.mask|=1<<t},l.prototype.portMode=function(t){this.mask=0===t?255:0},l.prototype.portWrite=function(t){this.memory=t&~this.mask,this.io.i2cWrite(this.address,this.memory)};var c={DEFAULT:{SHIFT_LEFT:4,CLEAR:1,HOME:2,ENTRY:4,DISPLAY:8,DIMENSIONS:32,CURSORSHIFT:16,SETCGRAMADDR:64,SETDDRAMADDR:128,DATA:64,COMMAND:128,ENTRYRIGHT:0,ENTRYLEFT:2,ENTRYSHIFTINCREMENT:1,ENTRYSHIFTDECREMENT:0,DISPLAYON:4,DISPLAYOFF:0,CURSORON:2,CURSOROFF:0,BLINKON:1,BLINKOFF:0,DISPLAYMOVE:8,CURSORMOVE:0,MOVERIGHT:4,MOVELEFT:0,BITMODE:{4:0,8:16},LINE:{1:0,2:8},DOTS:{"5x10":4,"5x8":0},BACKLIGHT_ON:8,BACKLIGHT_OFF:0,MEMORYLIMIT:8,EN:4,RW:2,RS:1,D4:4,D5:5,D6:6,D7:7}},f={JHD1313M1:{REGISTER:{value:c.DEFAULT},CHARS:{value:o.DEFAULT},initialize:{value:function(t){this.address={lcd:t.address||62,rgb:98},t.address=this.address,this.io.i2cConfig(t),this.lines=t.lines||2,this.rows=t.rows||2,this.cols=t.cols||16,this.dots=t.dots||"5x8";var e={display:this.REGISTER.DISPLAY|this.REGISTER.DISPLAYON|this.REGISTER.CURSOROFF|this.REGISTER.BLINKOFF,characters:{},index:this.REGISTER.MEMORYLIMIT-1,backlight:{polarity:1,pin:null,value:null}};a.set(this,e);var i=this.REGISTER.DIMENSIONS|this.REGISTER.LINE[2];h(50),this.command(i),h(5),this.command(i),this.command(i),this.command(i),h(5),this.command(this.REGISTER.ENTRY|this.REGISTER.ENTRYLEFT|this.REGISTER.ENTRYSHIFTDECREMENT),this.on(),this.clear(),this.home(),this.bgOn(),t.color?this.bgColor(t.color):this.bgColor("black")}},clear:{value:function(){return this.command(this.REGISTER.CLEAR)}},setCursor:{value:function(t,e){return this.command(0===e?128|t:192|t)}},autoscroll:{value:function(){var t=a.get(this);return t.display=this.REGISTER.ENTRYLEFT|this.REGISTER.ENTRYSHIFTINCREMENT,this.command(this.REGISTER.ENTRY|t.display),this}},bgColor:{value:function(t,e,i){var n=s.ToRGB(t,e,i),r=this.address.rgb;return this.io.i2cWrite(r,[0,0]),this.io.i2cWrite(r,[1,0]),this.io.i2cWrite(r,[4,n.red]),this.io.i2cWrite(r,[3,n.green]),this.io.i2cWrite(r,[2,n.blue]),this}},bgOn:{value:function(){return this.io.i2cWrite(this.address.rgb,[this.REGISTER.BACKLIGHT_ON,170]),this}},bgOff:{value:function(){return this.io.i2cWrite(this.address.rgb,[this.REGISTER.BACKLIGHT_ON,0]),this}},command:{value:function(t,e){return 1===arguments.length&&(e=t,t=this.REGISTER.COMMAND),t===this.REGISTER.DATA?this.send(e):this.writeBits(this.REGISTER.COMMAND,e)}},send:{value:function(t){return this.writeBits(this.REGISTER.DATA,t)}},writeBits:{value:function(t,e){return this.io.i2cWrite(this.address.lcd,[t,e]),this}},hilo:{value:function(t){t.call(this)}}},PCF8574:{REGISTER:{value:Object.assign({},c.DEFAULT,{COMMAND:0,DATA:1,BACKLIGHT_ON:255,BACKLIGHT_OFF:0})},CHARS:{value:o.DEFAULT},initialize:{value:function(t){this.bitMode=t.bitMode||4,this.lines=t.lines||2,this.rows=t.rows||2,this.cols=t.cols||16,this.dots=t.dots||"5x8",t.address||(t.address=["PCF8574A","PCF8574AT"].includes(t.controller)?63:39),this.io.i2cConfig(t),this.address={lcd:t.address},this.expander=new l(this.address.lcd,this.io),this.expander.portMode(this.io.MODES.OUTPUT),this.expander.portWrite(0);var e=t.backlight||{polarity:0,pin:3};e.pin=void 0===e.pin?3:e.pin,e.polarity=void 0===e.polarity?0:e.polarity;var i=this.REGISTER.BITMODE[this.bitMode]|this.REGISTER.LINE[this.lines]|this.REGISTER.DOTS[this.dots],n=this.REGISTER.DISPLAY|this.REGISTER.DISPLAYON|this.REGISTER.CURSOROFF|this.REGISTER.BLINKOFF,r=this.REGISTER.ENTRYLEFT|this.REGISTER.ENTRYSHIFTDECREMENT,o={display:n,characters:{},index:this.REGISTER.MEMORYLIMIT-1,backlight:{polarity:e.polarity,pinMask:1<<e.pin,statusMask:0},data:[1<<this.REGISTER.D4,1<<this.REGISTER.D5,1<<this.REGISTER.D6,1<<this.REGISTER.D7]};a.set(this,o);var s=3<<this.REGISTER.SHIFT_LEFT;this.expander.portWrite(s),this.pulse(s),h(4),this.expander.portWrite(s),this.pulse(s),h(4),this.expander.portWrite(s),this.pulse(s),s=2<<this.REGISTER.SHIFT_LEFT,this.expander.portWrite(s),this.pulse(s),this.command(this.REGISTER.DIMENSIONS|i),this.command(o.display),o.display=r,this.command(this.REGISTER.ENTRY|o.display),this.on(),this.clear(),this.backlight()}},clear:{value:function(){return this.command(this.REGISTER.CLEAR),h(2),this}},backlight:{value:function(t){var e,i=a.get(this);return t=void 0===t?255:t,0!==i.backlight.pinMask&&(e=0===i.backlight.polarity&&t>0||1===i.backlight.polarity&&0===t?255:0,i.backlight.statusMask=i.backlight.pinMask&e,this.expander.portWrite(i.backlight.statusMask)),this}},createChar:{value:function(t,e){var i,n=a.get(this);"number"==typeof t?i=7&t:(i=n.index,n.index--,-1===n.index&&(n.index=this.REGISTER.MEMORYLIMIT-1)),this.command(this.REGISTER.SETCGRAMADDR|i<<3),h(1);for(var r=0;r<8;r++)this.command(this.REGISTER.DATA,e[r]),h(1);return n.characters[t]=i,i}},noBacklight:{value:function(){this.backlight(0)}},on:{value:function(){var t=a.get(this);return t.display|=this.REGISTER.DISPLAYON,this.command(this.REGISTER.DISPLAY|t.display),this}},off:{value:function(){var t=a.get(this);return t.display&=~this.REGISTER.DISPLAYON,this.command(this.REGISTER.DISPLAY|t.display),this}},hilo:{value:function(t){t.call(this)}},command:{value:function(t,e){return 1===arguments.length&&(e=t,t=this.REGISTER.COMMAND),this.send(t,e),this}},send:{writable:!0,value:function(t,e){return this.writeBits(t,e>>4),this.writeBits(t,15&e),this}},writeBits:{writable:!0,value:function(t,e){for(var i=a.get(this),n=0,r=0;r<4;r++)1==(1&e)&&(n|=i.data[r]),e>>=1;return t===this.REGISTER.DATA&&(t=this.REGISTER.RS),n|=t|i.backlight.statusMask,this.pulse(n),this}},pulse:{writable:!0,value:function(t){this.expander.portWrite(t|this.REGISTER.EN),this.expander.portWrite(t&~this.REGISTER.EN)}}},PARALLEL:{REGISTER:{value:c.DEFAULT},CHARS:{value:o.DEFAULT},initialize:{value:function(t){this.bitMode=t.bitMode||4,this.lines=t.lines||2,this.rows=t.rows||2,this.cols=t.cols||16,this.dots=t.dots||"5x8",Array.isArray(t.pins)?this.pins={rs:t.pins[0],en:t.pins[1],data:[t.pins[5],t.pins[4],t.pins[3],t.pins[2]]}:this.pins=t.pins;var e=this.REGISTER.DISPLAY|this.REGISTER.DISPLAYON,i={display:e,characters:{},index:this.REGISTER.MEMORYLIMIT-1,backlight:{polarity:1,pin:null,value:null}};if(a.set(this,i),t.pins.forEach(function(t){this.io.pinMode(t,1)},this),this.io.digitalWrite(this.pins.rs,this.io.LOW),this.io.digitalWrite(this.pins.en,this.io.LOW),t.backlight){if("number"==typeof t.backlight){var n=t.backlight;t.backlight={pin:n}}t.backlight.pin&&(i.backlight.pin=new r({pin:t.backlight.pin,board:this.board}),i.backlight.pin.high())}this.command(3),h(4),this.command(3),h(4),this.command(3),4===this.bitMode&&this.command(2),this.command(this.REGISTER.LINE[this.lines]|this.REGISTER.DOTS[this.dots]),this.command(e),this.clear(),this.home()}}}};function p(t){if(!(this instanceof p))return new p(t);n.Component.call(this,t=n.Options(t));var e=null;null==(e=t.controller&&"string"==typeof t.controller?f[t.controller.toUpperCase()]:t.controller)&&(e=f.PARALLEL),n.Controller.call(this,e,t),this.ctype=t.controller,this.initialize&&this.initialize(t),Object.defineProperties(this,{characters:{get:function(){return Object.assign({},a.get(this).characters)}}})}f.LCM1602=f.LCD1602=f.LCM1602IIC=f.LCD2004=f.PCF8574A=f.PCF8574AT=f.PCF8574T=f.PCF8574,f.MJKDZ=Object.assign({},f.PCF8574,{REGISTER:{value:Object.assign({},c.DEFAULT,{SHIFT_LEFT:0,COMMAND:0,DATA:6,EN:16,RW:5,RS:6,D4:0,D5:1,D6:2,D7:3})},writeBits:{writable:!0,value:function(t,e){for(var i=a.get(this),n=0,r=0;r<4;r++)1==(1&e)&&(n|=i.data[r]),e>>=1;return t===this.REGISTER.DATA&&(t=1<<this.REGISTER.RS),n|=t|i.backlight.statusMask,this.pulse(n),this}}}),p.prototype.command=function(t,e){return void 0===e&&(e=t,t=128),4===this.bitMode&&this.send(e>>4),this.send(e),this},p.prototype.send=function(t){for(var e=0,i={4:8,8:128}[this.bitMode];i>0;i>>=1)this.io.digitalWrite(this.pins.data[e],this.io[t&i?"HIGH":"LOW"]),e++;return this.io.digitalWrite(this.pins.en,this.io.LOW),this.io.digitalWrite(this.pins.en,this.io.HIGH),u(1),this.io.digitalWrite(this.pins.en,this.io.LOW),u(37),this},p.prototype.hilo=function(t){this.io.digitalWrite(this.pins.rs,this.io.HIGH),t.call(this),this.io.digitalWrite(this.pins.rs,this.io.LOW)};var d=/:(\w+):/g;p.prototype.print=function(t,e){var i,n,r;return t+="",e=e||{},i=a.get(this),n=!(e.dontProcessSpecials||!1)&&d.test(t),1===t.length?this.hilo(function(){this.command(this.REGISTER.DATA,t.charCodeAt(0))}):n?(r=t.replace(d,function(t,e){var n=i.characters[e];return"number"==typeof n?String.fromCharCode(n):t}),this.print(r,{dontProcessSpecials:!0})):this.hilo(function(){Array.from(t).forEach(function(t){this.command(this.REGISTER.DATA,t.charCodeAt(0))},this)}),this},p.prototype.write=function(t){return this.hilo.call(this,function(){this.command(this.REGISTER.DATA,t)}),this},p.prototype.clear=function(){return this.command(this.REGISTER.CLEAR),h(2),this},p.prototype.home=function(){return this.command(this.REGISTER.HOME),h(2),this},p.prototype.setCursor=function(t,e){return this.command(this.REGISTER.SETDDRAMADDR|t+[0,64,20,84][e]),this},p.prototype.backlight=function(t){var e=a.get(this);return t=void 0===t,e.backlight.pin instanceof r&&(t?e.backlight.pin.high():e.backlight.pin.low()),t?e.display|=this.REGISTER.DISPLAYON:e.display&=~this.REGISTER.DISPLAYON,this.command(e.display),this},p.prototype.noBacklight=function(){var t=a.get(this);return t.backlight.pin instanceof r&&t.backlight.pin.high(),this.backlight(!1)},p.prototype.on=function(){var t=a.get(this);return t.display|=this.REGISTER.DISPLAYON,this.command(t.display),this},p.prototype.off=function(){var t=a.get(this);return t.display&=~this.REGISTER.DISPLAYON,this.command(t.display),this},p.prototype.cursor=function(t,e){if(void 0!==e&&void 0!==t)return this.setCursor(e,t);var i=a.get(this);return i.display|=this.REGISTER.CURSORON,this.command(i.display),this},p.prototype.noCursor=function(){var t=a.get(this);return t.display&=~this.REGISTER.CURSORON,this.command(t.display),this},p.prototype.blink=function(){var t=a.get(this);return t.display|=this.REGISTER.BLINKON,this.command(t.display),this},p.prototype.noBlink=function(){var t=a.get(this);return t.display&=~this.REGISTER.BLINKON,this.command(t.display),this},p.prototype.autoscroll=function(){var t=a.get(this);return t.display|=this.REGISTER.ENTRYSHIFTINCREMENT,this.command(this.REGISTER.ENTRY|t.display),this},p.prototype.noAutoscroll=function(){var t=a.get(this);return t.display&=~this.REGISTER.ENTRYSHIFTINCREMENT,this.command(this.REGISTER.ENTRY|t.display),this},p.prototype.createChar=function(t,e){var i,n=a.get(this);return"number"==typeof t?i=7&t:(i=n.index,n.index--,-1===n.index&&(n.index=this.REGISTER.MEMORYLIMIT-1)),this.command(this.REGISTER.SETCGRAMADDR|i<<3),this.hilo(function(){for(var t=0;t<8;t++)this.command(this.REGISTER.DATA,e[t])}),n.characters[t]=i,i},p.prototype.useChar=function(t){var e=a.get(this);if(void 0===e.characters[t]){var i=this.createChar(t,this.CHARS[t]);for(var n in e.characters)if(t!==n&&e.characters[n]===i){delete e.characters[n];break}e.characters[t]=i}return this},p.POSITIVE=0,p.NEGATIVE=1,p.Characters=o,t.exports=p}).call(this,i(0))},function(t,e){t.exports={DEFAULT:{0:[14,27,27,27,27,27,14],1:[2,6,14,6,6,6,6],2:[14,27,3,6,12,24,31],3:[14,27,3,14,3,27,14],4:[3,7,15,27,31,3,3],5:[31,24,30,3,3,27,14],6:[14,27,24,30,27,27,14],7:[31,3,6,12,12,12,12],8:[14,27,27,14,27,27,14],9:[14,27,27,15,3,27,14],10:[23,21,21,21,23,0,31],11:[10,10,10,10,10,0,31],12:[23,17,23,20,23,0,31],13:[23,17,19,17,23,0,31],14:[21,21,23,17,17,0,31],15:[23,20,23,17,23,0,31],16:[23,20,23,21,23,0,31],17:[23,17,18,18,18,0,31],18:[23,21,23,21,23,0,31],19:[23,21,23,17,23,0,31],circle:[0,14,17,17,17,14,0],cdot:[0,14,17,21,17,14,0],donut:[0,14,31,27,31,14,0],ball:[0,14,31,31,31,14,0],square:[0,31,17,17,17,31,0],sdot:[0,31,17,21,17,31,0],fbox:[0,31,31,31,31,31,0],sbox:[0,0,14,10,14,0,0],sfbox:[0,0,14,14,14,0,0],bigpointerright:[8,12,10,9,10,12,8],bigpointerleft:[2,6,10,18,10,6,2],arrowright:[8,12,10,9,10,12,8],arrowleft:[2,6,10,18,10,6,2],ascprogress1:[16,16,16,16,16,16,16,16],ascprogress2:[24,24,24,24,24,24,24,24],ascprogress3:[28,28,28,28,28,28,28,28],ascprogress4:[30,30,30,30,30,30,30,30],fullprogress:[31,31,31,31,31,31,31,31],descprogress1:[1,1,1,1,1,1,1,1],descprogress2:[3,3,3,3,3,3,3,3],descprogress3:[7,7,7,7,7,7,7,7],descprogress4:[15,15,15,15,15,15,15,15],ascchart1:[31,0,0,0,0,0,0,0],ascchart2:[31,31,0,0,0,0,0,0],ascchart3:[31,31,31,0,0,0,0,0],ascchart4:[31,31,31,31,0,0,0,0],ascchart5:[31,31,31,31,31,0,0,0],ascchart6:[31,31,31,31,31,31,0,0],ascchart7:[31,31,31,31,31,31,31,0],descchart1:[0,0,0,0,0,0,0,31],descchart2:[0,0,0,0,0,0,31,31],descchart3:[0,0,0,0,0,31,31,31],descchart4:[0,0,0,0,31,31,31,31],descchart5:[0,0,0,31,31,31,31,31],descchart6:[0,0,31,31,31,31,31,31],descchart7:[0,31,31,31,31,31,31,31],borderleft1:[1,1,1,1,1,1,1,1],borderleft2:[3,2,2,2,2,2,2,3],borderleft3:[7,4,4,4,4,4,4,7],borderleft4:[15,8,8,8,8,8,8,15],borderleft5:[31,16,16,16,16,16,16,31],bordertopbottom5:[31,0,0,0,0,0,0,31],borderright1:[16,16,16,16,16,16,16,16],borderright2:[24,8,8,8,8,8,8,24],borderright3:[28,4,4,4,4,4,4,28],borderright4:[30,2,2,2,2,2,2,30],borderright5:[31,1,1,1,1,1,1,31],box1:[3,3,3,0,0,0,0],box2:[24,24,24,0,0,0,0],box3:[27,27,27,0,0,0,0],box4:[0,0,0,0,3,3,3],box5:[3,3,3,0,3,3,3],box6:[24,24,24,0,3,3,3],box7:[27,27,27,0,3,3,3],box8:[0,0,0,0,24,24,24],box9:[3,3,3,0,24,24,24],box10:[24,24,24,0,24,24,24],box11:[27,27,27,0,24,24,24],box12:[0,0,0,0,27,27,27],box13:[3,3,3,0,27,27,27],box14:[24,24,24,0,27,27,27],box15:[27,27,27,0,27,27,27],euro:[3,4,30,8,30,8,7],cent:[0,0,14,17,16,21,14,8],speaker:[1,3,15,15,15,3,1],sound:[8,16,0,24,0,16,8],x:[0,27,14,4,14,27,0],target:[0,10,17,21,17,10,0],pointerright:[0,8,12,14,12,8,0],pointerup:[0,0,4,14,31,0,0],pointerleft:[0,2,6,14,6,2,0],pointerdown:[0,0,31,14,4,0,0],arrowne:[0,15,3,5,9,16,0],arrownw:[0,30,24,20,18,1,0],arrowsw:[0,1,18,20,24,30,0],arrowse:[0,16,9,5,3,15,0],dice1:[0,0,0,4,0,0,0],dice2:[0,16,0,0,0,1,0],dice3:[0,16,0,4,0,1,0],dice4:[0,17,0,0,0,17,0],dice5:[0,17,0,4,0,17,0],dice6:[0,17,0,17,0,17,0],bell:[4,14,14,14,31,0,4],smile:[0,10,0,17,14,0,0],note:[2,3,2,14,30,12,0],clock:[0,14,21,23,17,14,0],heart:[0,10,31,31,31,14,4,0],duck:[0,12,29,15,15,6,0],check:[0,1,3,22,28,8,0],retarrow:[1,1,5,9,31,8,4],runninga:[6,6,5,14,20,4,10,17],runningb:[6,6,4,14,14,4,10,10]}}},function(t,e,i){var n=i(44),r=i(88),o={};Object.keys(n).forEach(function(t){o[t]={},Object.defineProperty(o[t],"channels",{value:n[t].channels});var e=r(t);Object.keys(e).forEach(function(i){var n=e[i];o[t][i]=function(t){var e=function(e){if(null==e)return e;arguments.length>1&&(e=Array.prototype.slice.call(arguments));var i=t(e);if("object"==typeof i)for(var n=i.length,r=0;r<n;r++)i[r]=Math.round(i[r]);return i};return"conversion"in t&&(e.conversion=t.conversion),e}(n),o[t][i].raw=function(t){var e=function(e){return null==e?e:(arguments.length>1&&(e=Array.prototype.slice.call(arguments)),t(e))};return"conversion"in t&&(e.conversion=t.conversion),e}(n)})}),t.exports=o},function(t,e){t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(t,e,i){var n=i(44),r=Object.keys(n);function o(t){var e=function(){for(var t={},e=r.length,i=0;i<e;i++)t[r[i]]={distance:-1,parent:null};return t}(),i=[t];for(e[t].distance=0;i.length;)for(var o=i.pop(),s=Object.keys(n[o]),a=s.length,u=0;u<a;u++){var h=s[u],l=e[h];-1===l.distance&&(l.distance=e[o].distance+1,l.parent=o,i.unshift(h))}return e}function s(t,e){return function(i){return e(t(i))}}function a(t,e){for(var i=[e[t].parent,t],r=n[e[t].parent][t],o=e[t].parent;e[o].parent;)i.unshift(e[o].parent),r=s(n[e[o].parent][o],r),o=e[o].parent;return r.conversion=i,r}t.exports=function(t){for(var e=o(t),i={},n=Object.keys(e),r=n.length,s=0;s<r;s++){var u=n[s];null!==e[u].parent&&(i[u]=a(u,e))}return i}},function(t,e,i){var n=i(12),r=i(46),o=i(47),s=i(6);function a(t){if(!(this instanceof a))return new a(t);Object.defineProperty(this,"type",{value:r}),s.call(this,t)}i(2).inherits(a,s),s.installMethodForwarding(a.prototype,r.prototype),o(a,["pulse","fade","fadeIn","fadeOut","blink"]),a.prototype[n.normalize]=function(t){return t.map(function(t,e){return null!==t?this[e][n.normalize](t):t},this)},a.prototype[n.render]=function(t){return this.each(function(e,i){e[n.render]([t[i]])})},t.exports=a},function(t,e,i){var n=i(12),r=i(47),o=i(6),s=i(21);function a(t){if(!(this instanceof a))return new a(t);Object.defineProperty(this,"type",{value:s}),o.call(this,t)}i(2).inherits(a,o),o.installMethodForwarding(a.prototype,s.prototype),r(a,["blink"]),a.prototype[n.normalize]=function(t){return t.map(function(t,e){return null!==t?this[e][n.normalize](t):t},this)},a.prototype[n.render]=function(t){return this.each(function(e,i){e[n.render]([t[i]])})},a.prototype[n.keys]=s.colors,t.exports=a},function(t,e,i){var n=i(22);function r(t){return t.isMatrix=!0,new n(t)}Object.assign(r,n,{CHARS:n.MATRIX_CHARS}),t.exports=r},function(t,e){t.exports={MATRIX_CHARS:{" ":[0,0,0,0,0,0,0,0],"!":[4,4,4,4,0,0,4,0],'"':[10,10,10,0,0,0,0,0],"#":[10,10,31,10,31,10,10,0],$:[4,15,20,14,5,30,4,0],"%":[24,25,2,4,8,19,3,0],"&":[12,18,20,8,21,18,13,0],"'":[12,4,8,0,0,0,0,0],"(":[2,4,8,8,8,4,2,0],")":[8,4,2,2,2,4,8,0],"*":[0,4,21,14,21,4,0,0],"+":[0,4,4,31,4,4,0,0],",":[0,0,0,0,12,4,8,0],"-":[0,0,0,31,0,0,0,0],".":[0,0,0,0,0,12,12,0],"/":[0,1,2,4,8,16,0,0],"[":[14,8,8,8,8,8,14,0],"\\":[0,16,8,4,2,1,0,0],"]":[14,2,2,2,2,2,14,0],"^":[4,10,17,0,0,0,0,0],_:[0,0,0,0,0,0,31,0],"`":[16,8,4,0,0,0,0,0],":":[0,12,12,0,12,12,0,0],";":[0,12,12,0,12,4,8,0],"<":[2,4,8,16,8,4,2,0],"=":[0,0,31,0,31,0,0,0],">":[8,4,2,1,2,4,8,0],"?":[14,17,1,2,4,0,4,0],"@":[14,17,1,13,21,21,14,0],"{":[2,4,4,8,4,4,2,0],"|":[4,4,4,0,4,4,4,0],"}":[8,4,4,2,4,4,8,0],"~":[8,21,2,0,0,0,0,0],0:[14,17,19,21,25,17,14,0],1:[4,12,4,4,4,4,14,0],2:[14,17,1,2,4,8,31,0],3:[31,2,4,2,1,17,14,0],4:[2,6,10,18,31,2,2,0],5:[31,16,30,1,1,17,14,0],6:[6,8,16,30,17,17,14,0],7:[31,1,2,4,4,4,4,0],8:[30,17,17,14,17,17,14,0],9:[14,17,17,15,1,2,12,0],A:[8,20,34,62,34,34,34,34],B:[60,34,34,62,34,34,60,0],C:[60,64,64,64,64,64,60,0],D:[124,66,66,66,66,66,124,0],E:[124,64,64,124,64,64,64,124],F:[124,64,64,124,64,64,64,64],G:[60,64,64,64,64,68,68,60],H:[68,68,68,124,68,68,68,68],I:[124,16,16,16,16,16,16,124],J:[60,8,8,8,8,8,72,48],K:[0,36,40,48,32,48,40,36],L:[64,64,64,64,64,64,64,124],M:[129,195,165,153,129,129,129,129],N:[0,66,98,82,74,70,66,0],O:[60,66,66,66,66,66,66,60],P:[60,34,34,34,60,32,32,32],Q:[28,34,34,34,34,38,34,29],R:[60,34,34,34,60,36,34,33],S:[0,30,32,32,62,2,2,60],T:[0,62,8,8,8,8,8,8],U:[66,66,66,66,66,66,34,28],V:[66,66,66,66,66,66,36,24],W:[0,73,73,73,73,42,28,0],X:[0,65,34,20,8,20,34,65],Y:[65,34,20,8,8,8,8,8],Z:[0,127,2,4,8,16,32,127],a:[0,0,14,1,15,17,15,0],b:[16,16,22,25,17,17,30,0],c:[0,0,14,17,16,17,14,0],d:[1,1,13,19,17,17,15,0],e:[0,0,14,17,31,16,14,0],f:[2,5,4,14,4,4,4,0],g:[0,13,19,19,13,1,14,0],h:[16,16,22,25,17,17,17,0],i:[4,0,12,4,4,4,14,0],j:[2,0,6,2,2,18,12,0],k:[8,8,9,10,12,10,9,0],l:[12,4,4,4,4,4,14,0],m:[0,0,26,21,21,21,21,0],n:[0,0,22,25,17,17,17,0],o:[0,0,14,17,17,17,14,0],p:[0,22,25,25,22,16,16,0],q:[0,13,19,19,13,1,1,0],r:[0,0,22,25,16,16,16,0],s:[0,0,15,16,30,1,31,0],t:[8,8,28,8,8,9,6,0],u:[0,0,18,18,18,18,13,0],v:[0,0,17,17,17,10,4,0],w:[0,0,17,17,21,21,10,0],x:[0,0,17,10,4,10,17,0],y:[0,0,17,17,19,13,1,14],z:[0,0,31,2,4,8,31,0],euro:[14,16,124,32,124,32,16,14],cent:[0,60,66,64,64,82,60,32],angryface:[0,102,102,0,24,36,66,129],circle:[60,66,129,129,129,129,66,60],cdot:[60,66,129,153,153,129,66,60],donut:[60,126,255,231,231,255,126,60],equality:[0,255,255,0,0,255,255,0],ball:[60,126,255,255,255,255,126,60],thinsquare:[255,129,129,129,129,129,129,255],thicksquare:[255,255,195,195,195,195,255,255],centeredsquare1:[0,0,60,60,60,60,0,0],centeredsquare2:[0,0,60,60,60,60,0,0],arrowright:[0,4,6,255,255,6,4,0],arrowleft:[0,32,96,255,255,96,32,0],note:[4,6,7,4,60,124,124,56],clock:[60,82,145,145,143,129,66,60],heartoutline:[102,153,129,129,66,36,24,0],heartfull:[102,255,255,255,126,60,24,0],thincheck:[0,0,1,2,4,136,80,32],thickcheck:[0,1,3,6,140,216,112,32],speaker:[3,7,63,63,63,63,7,3],sound:[0,64,128,0,192,0,128,64],xbig:[195,231,126,60,60,126,231,195],target:[60,126,195,219,219,195,126,60],bell:[24,60,60,60,60,126,0,24],smile:[0,102,102,0,0,129,66,60],frown:[0,102,102,0,0,60,66,129],winkright:[0,96,102,0,0,129,66,60],winkleft:[0,6,102,0,0,129,66,60],blink:[0,0,102,0,0,129,66,60],laughing:[0,102,102,0,255,129,66,60],tongueout:[0,102,102,0,0,126,10,4],expressionless:[0,102,102,0,0,255,0,0],ascprogress1:[128,128,128,128,128,128,128,128],ascprogress2:[192,192,192,192,192,192,192,192],ascprogress3:[224,224,224,224,224,224,224,224],ascprogress4:[240,240,240,240,240,240,240,240],ascprogress5:[248,248,248,248,248,248,248,248],ascprogress6:[252,252,252,252,252,252,252,252],ascprogress7:[254,254,254,254,254,254,254,254],fullprogress:[255,255,255,255,255,255,255,255],descprogress1:[127,127,127,127,127,127,127,127],descprogress2:[63,63,63,63,63,63,63,63],descprogress3:[31,31,31,31,31,31,31,31],descprogress4:[15,15,15,15,15,15,15,15],descprogress5:[7,7,7,7,7,7,7,7],descprogress6:[3,3,3,3,3,3,3,3],descprogress7:[1,1,1,1,1,1,1,1],ascchart1:[255,0,0,0,0,0,0,0],ascchart2:[255,255,0,0,0,0,0,0],ascchart3:[255,255,255,0,0,0,0,0],ascchart4:[255,255,255,255,0,0,0,0],ascchart5:[255,255,255,255,255,0,0,0],ascchart6:[255,255,255,255,255,255,0,0],ascchart7:[255,255,255,255,255,255,255,0],ascchart8:[255,255,255,255,255,255,255,255],descchart1:[0,255,255,255,255,255,255,255],descchart2:[0,0,255,255,255,255,255,255],descchart3:[0,0,0,255,255,255,255,255],descchart4:[0,0,0,0,255,255,255,255],descchart5:[0,0,0,0,0,255,255,255],descchart6:[0,0,0,0,0,0,255,255],descchart7:[0,0,0,0,0,0,0,255],descchart8:[0,0,0,0,0,0,0,0],borderleft1:[1,1,1,1,1,1,1,1],borderleft2:[3,2,2,2,2,2,2,3],borderleft3:[7,4,4,4,4,4,4,7],borderleft4:[15,8,8,8,8,8,8,15],borderleft5:[31,16,16,16,16,16,16,31],borderleft6:[63,32,32,32,32,32,32,63],borderleft7:[127,64,64,64,64,64,64,127],borderleft8:[255,128,128,128,128,128,128,255],bordertopbottom5:[255,0,0,0,0,0,0,255],borderright1:[128,128,128,128,128,128,128,128],borderright2:[192,64,64,64,64,64,64,192],borderright3:[224,32,32,32,32,32,32,224],borderright4:[240,16,16,16,16,16,16,240],borderright5:[248,8,8,8,8,8,8,248],borderright6:[252,4,4,4,4,4,4,252],borderright7:[254,2,2,2,2,2,2,254],borderright8:[255,1,1,1,1,1,1,255],box1:[224,224,224,0,0,0,0,0],box2:[7,7,7,0,0,0,0,0],box3:[231,231,231,0,0,0,0,0],box4:[0,0,0,0,0,7,7,7],box5:[7,7,7,0,0,7,7,7],box6:[224,224,224,0,0,7,7,7],box7:[231,231,231,0,0,7,7,7],box8:[0,0,0,0,0,224,224,224],box9:[7,7,7,0,0,224,224,224],box10:[224,224,224,0,0,224,224,224],box11:[231,231,231,0,0,224,224,224],box12:[0,0,0,0,0,231,231,231],box13:[7,7,7,0,0,231,231,231],box14:[224,224,224,0,0,231,231,231],box15:[231,231,231,0,0,231,231,231],checkerboard1:[170,85,170,85,170,85,170,85],checkerboard2:[85,170,85,170,85,170,85,170],checkerboard3:[93,234,87,186,85,238,85,187],checkerboard4:[204,51,51,204,204,51,51,204],checkerboard5:[204,204,51,51,204,204,51,51],checkerboard6:[51,204,204,51,51,204,204,51],checkerboard7:[51,51,204,204,51,51,204,204],pointerright:[32,48,56,60,60,56,48,32],pointerup:[0,0,24,60,126,255,0,0],pointerleft:[4,12,28,60,60,28,12,4],pointerdown:[0,0,255,126,60,24,0,0],arrowne:[0,62,6,10,18,34,64,128],arrownw:[0,124,96,80,72,68,2,1],arrowsw:[1,2,68,72,80,96,124,0],arrowse:[128,64,34,18,10,6,62,0],dice1:[0,0,0,24,24,0,0,0],dice2:[192,192,0,0,0,0,3,3],dice3:[192,192,0,24,24,0,3,3],dice4:[195,195,0,0,0,0,195,195],dice5:[195,195,0,24,24,0,195,195],dice6:[195,195,0,195,195,0,195,195],outlinedplus1:[60,36,231,129,129,231,36,60],outlinedplus2:[255,231,231,129,129,231,231,255],twoboxes1:[240,144,144,240,15,9,9,15],twoboxes2:[240,144,144,254,18,18,30,0],twoboxes3:[240,144,188,244,36,60,0,0],twoboxes4:[240,248,216,248,120,0,0,0],twoboxes5:[15,9,9,15,240,144,144,240],fourboxes:[255,153,153,255,255,153,153,255],chain1:[240,248,216,248,120,0,0,0],chain2:[240,144,188,244,47,61,9,15]},SPECIAL_CHARS:{0:[60,102,102,102,102,102,102,60],1:[24,56,120,24,24,24,24,24],2:[60,102,6,12,24,48,96,126],3:[60,102,6,28,6,6,102,60],4:[14,30,54,102,102,126,6,6],5:[126,96,96,124,6,6,102,60],6:[60,102,96,124,102,102,102,60],7:[126,126,6,12,24,24,24,24],8:[60,102,102,60,102,102,102,60],9:[60,102,102,62,6,6,102,60],10:[94,82,82,82,82,94,0,255],11:[36,36,36,36,36,36,0,255],12:[94,66,68,72,80,94,0,255],13:[94,66,78,66,66,94,0,255],14:[82,82,94,66,66,66,0,255],15:[94,80,94,66,66,94,0,255],16:[94,80,94,82,82,94,0,255],17:[94,66,68,72,72,72,0,255],18:[94,82,94,82,82,94,0,255],19:[94,82,94,66,66,94,0,255]},DIGIT_CHARS:{0:126,1:48,2:109,3:121,4:51,5:91,6:95,7:112,8:127,9:123," ":0,".":128,":":255,"!":176,A:119,a:125,B:127,b:31,C:78,c:13,D:126,d:61,E:79,e:111,F:71,f:71,G:94,g:123,H:55,h:23,I:48,i:16,J:60,j:56,K:55,k:23,L:14,l:6,M:85,m:85,N:21,n:21,O:126,o:29,P:103,p:103,Q:115,q:115,R:119,r:5,S:91,s:91,T:70,t:15,U:62,u:28,V:39,v:35,W:63,w:43,X:37,x:37,Y:59,y:51,Z:109,z:109}}},function(t,e,i){var n=i(22);function r(t){return t.isMatrix=!1,new n(t)}Object.assign(r,n,{CHARS:n.DIGIT_CHARS}),t.exports=r},function(t,e,i){(function(e){var n=i(4),r=i(13),o=i(14),s=i(5),a=i(1).EventEmitter,u=i(2),h=new Map,l=s.uint16,c=s.toFixed,f={DEFAULT:{initialize:{value:function(t,e){this.io.pinMode(this.pin,this.io.MODES.ANALOG),this.io.analogRead(this.pin,e)}},toIntensityLevel:{value:function(t){return c(s.scale(t,0,1023,0,100)/100,2)}}},EVS_EV3:{initialize:{value:function(t,e){var i=h.get(this);t.mode&&(t.mode=t.mode.toUpperCase()),i.mode="REFLECTED"===t.mode?r.Type_EV3_LIGHT_REFLECTED:r.Type_EV3_LIGHT,i.shield=r.shieldPort(t.pin),i.ev3=new r(Object.assign(t,{io:this.io})),i.ev3.setup(i.shield,r.Type_EV3),i.ev3.write(i.shield,129+i.shield.offset,i.mode),i.ev3.read(i.shield,r.Light,r.Light_Bytes,function(t){var i=t[0]|t[1]<<8;e(i)})}},toIntensityLevel:{value:function(t){return c(t/100,2)}}},EVS_NXT:{initialize:{value:function(t,e){var i=h.get(this);t.mode&&(t.mode=t.mode.toUpperCase()),i.mode="REFLECTED"===t.mode?r.Type_NXT_LIGHT_REFLECTED:r.Type_NXT_LIGHT,i.shield=r.shieldPort(t.pin),i.ev3=new r(Object.assign(t,{io:this.io})),i.ev3.setup(i.shield,i.mode),i.ev3.read(i.shield,i.shield.analog,r.Analog_Bytes,function(t){var i=t[0]|t[1]<<8;e(i)})}},toIntensityLevel:{value:function(t){return c(s.scale(t,0,1023,100,0)/100,2)}}},TSL2561:{ADDRESSES:{value:[41,57,73]},REGISTER:{value:{CONTROL:0,TIMING:1,READ:44}},initialize:{value:function(t,e){var i=t.address||57,n=function(t){return 128|t};t.address=i,this.io.i2cConfig(t),this.io.i2cWriteReg(i,n(this.REGISTER.CONTROL),3);var r=[13,101,402],o=[15,120,450],s=[29975,4071,65536],a=16,u=0,h=r[u],c=0;Object.defineProperties(this,{gain:{get:function(){return a},set:function(t){if(0!==t&&16!==t)throw new RangeError("Invalid gain. Expected one of: 0, 16");a=t,this.io.i2cWriteReg(i,n(this.REGISTER.TIMING),u|a)}},integration:{get:function(){return h},set:function(t){if(-1===(u=r.indexOf(t)))throw new RangeError("Invalid integration. Expected one of: 13, 101, 402");h=t,this.io.i2cWriteReg(i,n(this.REGISTER.TIMING),u|a)}},lux:{get:function(){return c}}}),this.gain=a,this.integration=h;var f=function(){setTimeout(function(){this.io.i2cReadOnce(i,n(this.REGISTER.READ),4,function(t){var i=l(t[1],t[0]),n=l(t[3],t[2]),r=0,o=0,h=s[u];a||(h<<=4),n=n*h>>10;var p=0;(i=i*h>>10)&&(p=(n<<10)/i);var d=(p=Math.round(p))+1>>1;d>=0&&d<=64?(r=498,o=446):d<=128?(r=532,o=721):d<=192?(r=575,o=891):d<=256?(r=624,o=1022):d<=312?(r=367,o=508):d<=410?(r=210,o=251):d<=666?(r=24,o=18):d>666&&(r=0,o=0);var v=i*r-n*o;v<0&&(v=0),e(c=(v+=8192)>>>14),f()})}.bind(this),o[u])}.bind(this);f()}},toLux:{value:function(t){return t}},toIntensityLevel:{value:function(t){return c(s.scale(t,0,17e3,0,100)/100,2)}}},BH1750:{ADDRESSES:{value:[35,92]},initialize:{value:function(t,e){var i=t.address||35,n=t.mode||16;t.address=i,this.io.i2cConfig(t),this.io.i2cWrite(i,n);var r=function(){setTimeout(function(){this.io.i2cReadOnce(i,2,function(t){var i=t[0];i<<=8,i|=t[1],e(i),r()})}.bind(this),120)}.bind(this);r()}},toLux:{value:function(t){return Math.round(t/1.2)}},toIntensityLevel:{value:function(t){return c(s.scale(t/1.2,0,65535,0,100)/100,2)}}}};function p(t){if(!(this instanceof p))return new p(t);var e=null,i=0,r=0,o=t.freq||25;n.Component.call(this,t=n.Options(t)),e="string"==typeof t.controller?f[t.controller]:t.controller||f.DEFAULT,n.Controller.call(this,e,t),this.toIntensityLevel||(this.toIntensityLevel=t.toIntensityLevel||function(t){return t}),this.toLux||(this.toLux=t.toLux||function(t){return t}),Object.defineProperties(this,{value:{get:function(){return i}},level:{get:function(){return this.toIntensityLevel(i)}}}),h.set(this,{}),"function"==typeof this.initialize&&this.initialize(t,function(t){i=t}),void 0===this.lux&&Object.defineProperty(this,"lux",{get:function(){return this.toLux(i)}});var s={level:0,lux:0};setInterval(function(){s.level=this.level,s.lux=this.lux,this.emit("data",s),i!==r&&(r=i,this.emit("change",s))}.bind(this),o)}f.ALSPT19=f["ALS-PT19"]=f.DEFAULT,u.inherits(p,a),Object.assign(p.prototype,o),e.env.IS_TEST_MODE&&(p.Controllers=f,p.purge=function(){h.clear()}),t.exports=p}).call(this,i(0))},function(t,e,i){(function(e){var n=i(4),r=i(1).EventEmitter,o=i(2),s=i(5),a=new Map,u=["x","y"];function h(t){this.pins=t.pins,this.io=t.io,this.io.pinMode(this.pins[0],this.io.MODES.OUTPUT),this.io.pinMode(this.pins[1],this.io.MODES.OUTPUT),this.io.pinMode(this.pins[2],this.io.MODES.OUTPUT),this.io.pinMode(this.pins[3],this.io.MODES.OUTPUT)}h.prototype.select=function(t){this.io.digitalWrite(this.pins[0],1&t?this.io.HIGH:this.io.LOW),this.io.digitalWrite(this.pins[1],2&t?this.io.HIGH:this.io.LOW),this.io.digitalWrite(this.pins[2],4&t?this.io.HIGH:this.io.LOW),this.io.digitalWrite(this.pins[3],8&t?this.io.HIGH:this.io.LOW)};var l={ANALOG:{initialize:{value:function(t,e){var i={x:null,y:null};t.pins.forEach(function(t,n){this.io.pinMode(t,this.io.MODES.ANALOG),this.io.analogRead(t,function(t){i[u[n]]=t,null!==i.x&&null!==i.y&&(e({x:i.x,y:i.y}),i.x=null,i.y=null)}.bind(this))},this)}},toAxis:{value:function(t,e){var i=a.get(this);return s.constrain(s.fscale(t-i[e].zeroV,-511,511,-1,1),-1,1)}}},ESPLORA:{initialize:{value:function(t,e){var i=new h({pins:[18,19,20,21],io:this.io}),n=[11,12],r=1,o={x:null,y:null};this.io.pinMode(4,this.io.MODES.ANALOG);var s=function(t){o[u[r]]=t,null!==o.x&&null!==o.y&&(e({x:o.x,y:o.y}),o.x=null,o.y=null),this.io.removeListener("analog-read-4",s),setTimeout(a,10)}.bind(this),a=function(){i.select(n[r^=1]),this.io.analogRead(4,s)}.bind(this);a()}},toAxis:{value:function(t,e){var i=a.get(this);return s.constrain(s.fscale(t-i[e].zeroV,-511,511,-1,1),-1,1)}}}};function c(t){if(!(this instanceof c))return new c(t);var e=null,i={x:{invert:!1,value:0,previous:0,zeroV:0,calibrated:!1},y:{invert:!1,value:0,previous:0,zeroV:0,calibrated:!1}};n.Component.call(this,t=n.Options(t)),null==(e=t.controller&&"string"==typeof t.controller?l[t.controller.toUpperCase()]:t.controller)&&(e=l.ANALOG),n.Controller.call(this,e,t),this.toAxis||(this.toAxis=t.toAxis||function(t){return t}),i.x.zeroV=void 0===t.zeroV?0:t.zeroV.x||0,i.y.zeroV=void 0===t.zeroV?0:t.zeroV.y||0,i.x.invert=t.invertX||t.invert||!1,i.y.invert=t.invertY||t.invert||!1,a.set(this,i),"function"==typeof this.initialize&&this.initialize(t,function(t){var e=!1,n={x:null,y:null};Object.keys(t).forEach(function(r){var o=t[r],s=i[r];s.value=o,i[r].calibrated||(i[r].calibrated=!0,i[r].zeroV=o,e=!0),n[r]=this[r];var a=Math.abs(n[r]),u=Math.abs(s.previous);(a<u||a>u)&&(e=!0),s.previous=n[r]},this),this.emit("data",{x:n.x,y:n.y}),e&&this.emit("change",{x:n.x,y:n.y})}.bind(this)),Object.defineProperties(this,{x:{get:function(){return this.toAxis(i.x.value,"x")*(i.x.invert?-1:1)}},y:{get:function(){return this.toAxis(i.y.value,"y")*(i.y.invert?-1:1)}}})}o.inherits(c,r),e.env.IS_TEST_MODE&&(c.Controllers=l,c.purge=function(){a.clear()}),t.exports=c}).call(this,i(0))},function(t,e,i){(function(e){var n=i(6),r=i(4),o=i(1),s=i(2),a=new Map;function u(t,e){var i=a.get(this);this.io.pinMode(t.pin,this.io.MODES.ANALOG),setTimeout(function(){i.isCalibrated=!0,this.emit("calibrated")}.bind(this),10),this.io.analogRead(t.pin,e)}var h={PIR:{initialize:{value:function(t,e){var i=a.get(this),n=void 0!==t.calibrationDelay?t.calibrationDelay:2e3;this.io.pinMode(t.pin,this.io.MODES.INPUT),setTimeout(function(){i.isCalibrated=!0,this.emit("calibrated")}.bind(this),n),this.io.digitalRead(t.pin,e)}},toBoolean:{value:function(t){return!!t}}},GP2Y0D805Z0F:{initialize:{value:function(t,e){var i=t.address||38,n=a.get(this);t.address=i,setTimeout(function(){n.isCalibrated=!0,this.emit("calibrated")}.bind(this),10),this.io.i2cConfig(t),this.io.i2cWriteReg(i,3,254),this.io.i2cWrite(i,[0]),this.io.i2cRead(i,1,function(t){e(2&t[0])})}},toBoolean:{value:function(t){return 0===t}}},GP2Y0D810Z0F:{initialize:{value:u},toBoolean:{value:function(t){return t>>9==0}}},GP2Y0A60SZLF:{initialize:{value:u},toBoolean:{value:function(t){return t>>9==1}}}};function l(t){if(!(this instanceof l))return new l(t);var e,i,n=t.freq||25,o=!1;r.Component.call(this,t=r.Options(t)),e="string"==typeof t.controller?h[t.controller]:t.controller||h.PIR,r.Controller.call(this,e,t),i={value:!1,isCalibrated:!1},a.set(this,i),Object.defineProperties(this,{detectedMotion:{get:function(){return this.toBoolean(i.value)}},isCalibrated:{get:function(){return i.isCalibrated}}}),"function"==typeof this.initialize&&this.initialize(t,function(t){i.value=t}),setInterval(function(){var t=!1,e={timestamp:Date.now(),detectedMotion:this.detectedMotion,isCalibrated:i.isCalibrated};i.isCalibrated&&this.detectedMotion&&!o&&this.emit("motionstart",e),i.isCalibrated&&!this.detectedMotion&&o&&this.emit("motionend",e),o!==this.detectedMotion&&(t=!0),this.emit("data",e),t&&this.emit("change",e),o=this.detectedMotion}.bind(this),n)}h.GP2Y0D815Z0F=h.GP2Y0D810Z0F,h["HC-SR501"]=h.PIR,h.HCSR501=h.PIR,h["0D805"]=h.GP2Y0D805Z0F,h[805]=h.GP2Y0D805Z0F,h["0D810"]=h.GP2Y0D810Z0F,h[810]=h.GP2Y0D810Z0F,h["0D815"]=h.GP2Y0D815Z0F,h[815]=h.GP2Y0D815Z0F,h["0A60SZLF"]=h.GP2Y0A60SZLF,h["60SZLF"]=h.GP2Y0A60SZLF,s.inherits(l,o.EventEmitter),l.Collection=function(t){if(!(this instanceof l.Collection))return new l.Collection(t);Object.defineProperty(this,"type",{value:l}),n.Emitter.call(this,t)},s.inherits(l.Collection,n.Emitter),n.installMethodForwarding(l.Collection.prototype,l.prototype),e.env.IS_TEST_MODE&&(l.Controllers=h,l.purge=function(){a.clear()}),t.exports=l}).call(this,i(0))},function(t,e,i){(function(e){var n=i(4),r=i(9),o=i(13),s=i(5),a=i(1),u=i(2),h=i(6),l=i(23),c=i(48),f=new Map,p=new Map;function d(t){return["clock","data","latch"].reduce(function(e,i){return e+"."+t[i]},"")}function v(t,e,i){return i?t|=1<<e:t&=~(1<<e)}var g={ShiftRegister:{initialize:{value:function(t){var e=d(t.register);if(!t.bits||void 0===t.bits.a||void 0===t.bits.b)throw new Error("ShiftRegister Motors MUST contain HBRIDGE bits {a, b}");f.get(this).bits=t.bits,p.has(this.board)||p.set(this.board,{}),p.get(this.board)[e]||(p.get(this.board)[e]=new c({board:this.board,pins:t.register})),this.io.pinMode(this.pins.pwm,this.io.MODES.PWM)}},dir:{value:function(t){return this.stop(),function(t,e){var i=d(t.opts.register),n=p.get(t.board)[i],r=n.value,o=f.get(t).bits,s="reverse"!==e;r=v(r,o.a,s),r=v(r,o.b,!s),n.value!==r&&n.send(r)}(this,t.name),this.direction=t,e.nextTick(this.emit.bind(this,t.name)),this}}},PCA9685:{setPWM:{writable:!0,value:function(t,e){f.get(this).expander.analogWrite(t,e)}},setPin:{writable:!0,value:function(t,e){f.get(this).expander.digitalWrite(t,e)}},initialize:{value:function(t){var e=f.get(this);this.address=t.address||64,this.pwmRange=t.pwmRange||[0,4080],this.frequency=t.frequency||50,e.expander=r.get({address:this.address,controller:this.controller,bus:this.bus,pwmRange:this.pwmRange,frequency:this.frequency}),Object.keys(this.pins).forEach(function(t){this.pins[t]=e.expander.normalize(this.pins[t])},this)}}},EVS_EV3:{initialize:{value:function(t){var e=f.get(this);e.shield=o.shieldPort(t.pin),e.ev3=new o(Object.assign(t,{io:this.io})),this.opts.pins={pwm:t.pin,dir:t.pin}}},setPWM:{value:function(t,e){var i=f.get(this),n=i.shield.motor===o.M1?o.SPEED_M1:o.SPEED_M2,r=0|s.scale(e,0,255,0,100);if(0===e)i.ev3.write(i.shield,o.COMMAND,o.Motor_Reset);else{this.direction.value||(r=-r);var a=[r,0,0,o.CONTROL_SPEED|o.CONTROL_GO];i.ev3.write(i.shield,n,a)}}},setPin:{value:function(t,e){this.setPWM(this.pin,e)}},validatePins:{value:function(){if(void 0===this.opts.pin)throw new Error("Pin must be defined")}}},GROVE_I2C_MOTOR_DRIVER:{REGISTER:{value:{ADDRESS:15}},COMMANDS:{value:{SET_SPEED:130,SET_PWM_FREQUENCY:132,SET_DIRECTION:170,NOOP:1}},initialize:{value:function(t){var e=f.get(this),i=f.get("GROVE_I2C_MOTOR_DRIVER");i||(i={direction:{A:1,B:1},speed:{A:0,B:0}},f.set("GROVE_I2C_MOTOR_DRIVER",i)),e.shared=i,e.pin=t.pin.toUpperCase(),this.opts.pins={pwm:t.pin,dir:t.pin},this.address=t.address||this.REGISTER.ADDRESS,t.address=this.address,this.io.i2cConfig(t)}},setPWM:{value:function(t,e){var i=f.get(this),r=0|n.constrain(e,0,255);i.shared.speed[i.pin]=r,this.io.i2cWrite(this.address,[this.COMMANDS.SET_SPEED,i.shared.speed.A,i.shared.speed.B])}},setPin:{value:function(t,e){var i=f.get(this);i.shared.direction[i.pin]=e?1:2;var n=3&i.shared.direction.A,r=(3&i.shared.direction.B)<<2|n;this.io.i2cWrite(this.address,[this.COMMANDS.SET_DIRECTION,r,this.COMMANDS.NOOP])}},validatePins:{value:function(){if(void 0===this.opts.pin)throw new Error("Pin must be defined")}}}};g.EVS_NXT=g.EVS_EV3;var E={NONDIRECTIONAL:{pins:{get:function(){return this.opts.pin?{pwm:this.opts.pin}:this.opts.pins||{}}},dir:{writable:!0,configurable:!0,value:function(t){return t=t||this.speed(),this}},resume:{value:function(){var t=this.speed();return this.speed({speed:t}),this}}},DIRECTIONAL:{pins:{get:function(){return Array.isArray(this.opts.pins)?{pwm:this.opts.pins[0],dir:this.opts.pins[1]}:this.opts.pins}},dir:{writable:!0,configurable:!0,value:function(t){return this.stop(),this.setPin(this.pins.dir,t.value),this.direction=t,e.nextTick(this.emit.bind(this,t.name)),this}}},CDIR:{pins:{get:function(){return Array.isArray(this.opts.pins)?{pwm:this.opts.pins[0],dir:this.opts.pins[1],cdir:this.opts.pins[2]}:this.opts.pins}},dir:{value:function(t){return this.stop(),this.direction=t,this.setPin(this.pins.cdir,1^t.value),this.setPin(this.pins.dir,t.value),e.nextTick(this.emit.bind(this,t.name)),this}},brake:{value:function(t){if(this.speed({speed:0,saveSpeed:!1}),this.setPin(this.pins.dir,1,127),this.setPin(this.pins.cdir,1,128,127),this.speed({speed:255,saveSpeed:!1,braking:!0}),e.nextTick(this.emit.bind(this,"brake")),t){var i=this;this.board.wait(t,function(){i.stop()})}return this}}}};function m(t){var e,i,r;if(!(this instanceof m))return new m(t);n.Component.call(this,this.opts=n.Options(t)),i=t.controller||null,void 0===this.opts.device&&(this.opts.device="DIRECTIONAL",void 0===this.opts.pins&&"object"!=typeof this.opts.register&&(this.opts.device="NONDIRECTIONAL"),this.opts.pins&&(Array.isArray(this.opts.pins)?this.opts.device=["NONDIRECTIONAL","DIRECTIONAL","CDIR"][this.opts.pins.length-1]:(void 0===this.opts.pins.dir?this.opts.device="NONDIRECTIONAL":this.opts.device="DIRECTIONAL",void 0!==this.opts.pins.cdir&&(this.opts.device="CDIR")))),"string"==typeof i&&(i.startsWith("EVS")||i.startsWith("GROVE_I2C"))&&(this.opts.device="DIRECTIONAL"),e="string"==typeof this.opts.device?E[this.opts.device]:this.opts.device,this.threshold=void 0!==this.opts.threshold?this.opts.threshold:30,this.invertPWM=void 0!==this.opts.invertPWM&&this.opts.invertPWM,Object.defineProperties(this,e),this.opts.register&&(this.opts.controller="ShiftRegister"),this.opts.controller&&(i="string"==typeof this.opts.controller?g[this.opts.controller]:this.opts.controller,n.Controller.call(this,i,t)),this.opts.current&&(this.opts.current.board=this.board,this.current=new l(this.opts.current)),r={isOn:!1,currentSpeed:void 0!==this.opts.speed?this.opts.speed:128,braking:!1,enabled:!1},f.set(this,r),Object.defineProperties(this,{isOn:{get:function(){return r.isOn}},currentSpeed:{get:function(){return r.currentSpeed}},braking:{get:function(){return r.braking}},enabled:{get:function(){return r.enabled}}}),this.direction={value:1},this.initialize&&this.initialize(t),this.validatePins(),this.enable(),this.dir(this.direction)}function y(t){if(!(this instanceof y))return new y(t);Object.defineProperty(this,"type",{value:m}),h.call(this,t)}u.inherits(m,a.EventEmitter),m.prototype.initialize=function(){this.io.pinMode(this.pins.pwm,this.io.MODES.PWM),["dir","cdir","brake","enable"].forEach(function(t){void 0!==this.pins[t]&&this.io.pinMode(this.pins[t],this.io.MODES.OUTPUT)},this)},m.prototype.setPin=function(t,e){this.io.digitalWrite(t,e)},m.prototype.setPWM=function(t,e){this.io.analogWrite(t,e)},m.prototype.speed=function(t){var e=f.get(this);return void 0===t?e.currentSpeed:("number"==typeof t&&(t={speed:t}),t.speed=n.constrain(t.speed,0,255),t.saveSpeed=void 0===t.saveSpeed||t.saveSpeed,t.speed<this.threshold&&(t.speed=0),e.isOn=0!==t.speed,t.saveSpeed&&(e.currentSpeed=t.speed),t.braking&&(e.braking=!0),this.invertPWM&&1===this.direction.value&&(t.speed^=255),this.setPWM(this.pins.pwm,t.speed),this)},m.prototype.start=function(t){return this.pins.brake&&this.braking&&this.setPin(this.pins.brake,0),t=void 0!==t?t:this.speed(),this.speed({speed:t,braking:!1}),t>0&&e.nextTick(this.emit.bind(this,"start")),this},m.prototype.stop=function(){return this.speed({speed:0,saveSpeed:!1}),e.nextTick(this.emit.bind(this,"stop")),this},m.prototype.brake=function(t){if(void 0===this.pins.brake)"Mock"!==this.board.io.name&&console.log("Non-braking motor type"),this.stop();else if(this.setPin(this.pins.brake,1),this.setPin(this.pins.dir,1),this.speed({speed:255,saveSpeed:!1,braking:!0}),e.nextTick(this.emit.bind(this,"brake")),t){var i=this;this.board.wait(t,function(){i.resume()})}return this},m.prototype.release=function(){return this.resume(),e.nextTick(this.emit.bind(this,"release")),this},m.prototype.resume=function(){var t=this.speed();return this.dir(this.direction),this.start(t),this},m.prototype.enable=function(){var t=f.get(this);void 0===this.pins.enable||t.enabled||(this.setPin(this.pins.enable,1),t.enabled=!0)},m.prototype.disable=function(){var t=f.get(this);void 0!==this.pins.enable&&t.enabled&&(this.setPin(this.pins.enable,0),t.enabled=!1)},m.prototype.validatePins=function(){if(void 0===this.pins.pwm)throw new Error("PWM pin must be defined");if(void 0===this.pins.dir&&"NONDIRECTIONAL"!==this.opts.device)throw new Error("DIR pin must be defined");if("CDIR"===this.opts.device&&void 0===this.pins.cdir)throw new Error("CDIR pin must be defined for three wire motors")},[{name:"forward",abbr:"fwd",value:1},{name:"reverse",abbr:"rev",value:0}].forEach(function(t){m.prototype[t.name]=m.prototype[t.abbr]=function(e){return this.dir(t),this.start(e),this}}),m.SHIELD_CONFIGS={ADAFRUIT_V1:{M1:{pins:{pwm:11},register:{data:8,clock:4,latch:12},bits:{a:2,b:3}},M2:{pins:{pwm:3},register:{data:8,clock:4,latch:12},bits:{a:1,b:4}},M3:{pins:{pwm:6},register:{data:8,clock:4,latch:12},bits:{a:5,b:7}},M4:{pins:{pwm:5},register:{data:8,clock:4,latch:12},bits:{a:0,b:6}}},ADAFRUIT_V2:{M1:{pins:{pwm:8,dir:9,cdir:10},address:96,controller:"PCA9685"},M2:{pins:{pwm:13,dir:12,cdir:11},address:96,controller:"PCA9685"},M3:{pins:{pwm:2,dir:3,cdir:4},address:96,controller:"PCA9685"},M4:{pins:{pwm:7,dir:6,cdir:5},address:96,controller:"PCA9685"}},SEEED_STUDIO:{A:{pins:{pwm:9,dir:8,cdir:11}},B:{pins:{pwm:10,dir:12,cdir:13}}},FREETRONICS_HBRIDGE:{A:{pins:{pwm:6,dir:4,cdir:7}},B:{pins:{pwm:5,dir:3,cdir:2}}},ARDUINO_MOTOR_SHIELD_R3_1:{A:{pins:{pwm:3,dir:12}},B:{pins:{pwm:11,dir:13}}},ARDUINO_MOTOR_SHIELD_R3_2:{A:{pins:{pwm:3,dir:12,brake:9}},B:{pins:{pwm:11,dir:13,brake:8}}},ARDUINO_MOTOR_SHIELD_R3_3:{A:{pins:{pwm:3,dir:12,brake:9,current:"A0"}},B:{pins:{pwm:11,dir:13,brake:8,current:"A1"}}},DF_ROBOT:{A:{pins:{pwm:6,dir:7}},B:{pins:{pwm:5,dir:4}}},NKC_ELECTRONICS_KIT:{A:{pins:{pwm:9,dir:12}},B:{pins:{pwm:10,dir:13}}},RUGGED_CIRCUITS:{A:{pins:{pwm:3,dir:12}},B:{pins:{pwm:11,dir:13}}},SPARKFUN_ARDUMOTO:{A:{pins:{pwm:3,dir:12}},B:{pins:{pwm:11,dir:13}}},POLOLU_DRV8835_SHIELD:{M1:{pins:{pwm:9,dir:7}},M2:{pins:{pwm:10,dir:8}}},POLOLU_VNH5019_SHIELD:{M1:{pins:{pwm:9,dir:2,cdir:4,enable:6}},M2:{pins:{pwm:10,dir:7,cdir:8,enable:12}}},MICRO_MAGICIAN_V2:{A:{pins:{pwm:6,dir:8},invertPWM:!0},B:{pins:{pwm:5,dir:7},invertPWM:!0}},SPARKFUN_LUDUS:{A:{pins:{pwm:3,dir:4,cdir:5}},B:{pins:{pwm:6,dir:7,cdir:8}}},SPARKFUN_DUAL_HBRIDGE_EDISON_BLOCK:{A:{pins:{pwm:20,dir:33,cdir:46,enable:47}},B:{pins:{pwm:14,dir:48,cdir:36,enable:47}}}},u.inherits(y,h),h.installMethodForwarding(y.prototype,m.prototype),m.Array=y,m.Collection=y,e.env.IS_TEST_MODE&&(m.Controllers=g,m.purge=function(){f.clear(),p.clear()}),t.exports=m}).call(this,i(0))},function(t,e,i){var n=i(4),r=i(99),o=new Map,s=4;function a(){this.timer&&(this.timer.clearInterval(),delete this.timer)}var u={DEFAULT:{initialize:{writable:!0,value:function(){this.io.pinMode(this.pin,this.io.MODES.OUTPUT)}},tone:{writable:!0,value:function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Piezo.tone: invalid tone or duration");a.call(this);var i=this.timer=new r,n=1;return i.setInterval(function(){n=1===n?0:1,this.io.digitalWrite(this.pin,n),i.difTime/1e6>e&&a.call(this)}.bind(this),null,t+"u",function(){}),this}},noTone:{writable:!0,value:function(){return this.io.digitalWrite(this.pin,0),a.call(this),this}}},I2C_BACKPACK:{ADDRESSES:{value:[10]},REGISTER:{value:{NO_TONE:0,TONE:1}},initialize:{value:function(t){var e=o.get(this),i=t.address||this.ADDRESSES[0];e.address=t.address=i,this.io.i2cConfig(t)}},tone:{value:function(t,e){var i=o.get(this);if(isNaN(t)||isNaN(e))throw new Error("Piezo.tone: invalid tone or duration");var n=[this.REGISTER.TONE,this.pin,t>>8&255,255&t,e>>24&255,e>>16&255,e>>8&255,255&e];return this.io.i2cWrite(i.address,n),this}},noTone:{value:function(){var t=o.get(this),e=[this.REGISTER.NO_TONE,this.pin];return this.io.i2cWrite(t.address,e),this}}}};function h(t){if(!(this instanceof h))return new h(t);n.Component.call(this,t=n.Options(t));var e=null;null==(e=t.controller&&"string"==typeof t.controller?u[t.controller.toUpperCase()]:t.controller)&&(e=u.DEFAULT),Object.defineProperties(this,e),n.Controller.call(this,e,t);var i={isPlaying:!1,timeout:null,address:null};o.set(this,i),Object.defineProperties(this,{isPlaying:{get:function(){return i.isPlaying}}}),"function"==typeof this.initialize&&this.initialize(t)}h.Notes={c0:16,"c#0":17,d0:18,"d#0":19,e0:21,f0:22,"f#0":23,g0:25,"g#0":26,a0:28,"a#0":29,b0:31,c1:33,"c#1":35,d1:37,"d#1":39,e1:41,f1:44,"f#1":47,g1:49,"g#1":52,a1:55,"a#1":58,b1:62,c2:65,"c#2":69,d2:73,"d#2":78,e2:82,f2:87,"f#2":93,g2:98,"g#2":104,a2:110,"a#2":117,b2:124,c3:131,"c#3":139,d3:147,"d#3":156,e3:165,f3:175,"f#3":185,g3:196,"g#3":208,a3:220,"a#3":233,b3:247,c4:262,"c#4":277,d4:294,"d#4":311,e4:330,f4:349,"f#4":370,g4:392,"g#4":415,a4:440,"a#4":466,b4:494,c5:523,"c#5":554,d5:587,"d#5":622,e5:659,f5:698,"f#5":740,g5:784,"g#5":831,a5:880,"a#5":932,b5:988,c6:1047,"c#6":1109,d6:1175,"d#6":1245,e6:1319,f6:1397,"f#6":1480,g6:1568,"g#6":1661,a6:1760,"a#6":1865,b6:1976,c7:2093,"c#7":2217,d7:2349,"d#7":2489,e7:2637,f7:2794,"f#7":2960,g7:3136,"g#7":3322,a7:3520,"a#7":3729,b7:3951,c8:4186,"c#8":4435,d8:4699,"d#8":4978,e8:5274,f8:5588,"f#8":5920,g8:6272,"g#8":6645,a8:7040,"a#8":7459,b8:7902},h.Frequencies=Object.keys(h.Notes).reduce(function(t,e){return t[h.Notes[e]]=e,t},{}),h.Parsers={},h.Parsers.hzFromInput=function(t){var e=t;return Array.isArray(t)&&(e=t[0]),"number"==typeof e&&h.Frequencies[e]?e:("string"==typeof e&&(((e=e.toLowerCase().trim()).endsWith("#")||1===e.length)&&(e+=s),e=h.Notes[e]||null),isNaN(e)&&(e=null),e)},h.Parsers.beatFromNote=function(t){var e=1;return Array.isArray(t)&&void 0!==t[1]&&(e=t[1]),e},h.isValidOctave=function(t){return"number"==typeof t&&t>=0&&t<=8},h.defaultOctave=function(t){return h.isValidOctave(t)&&(s=t),s},h.ToFrequency=function(t){var e=2*(t/1e6);return Math.round(1/e)},h.ToTone=function(t){var e=1/t/2;return Math.round(1e6*e)},h.ToSong=function(t,e){e=e||1;for(var i,n,r=t.split(" "),o=[];r.length;)i=r.shift(),/^[0-9]+$/.test(i)&&(i=parseInt(i,10)),(n=o[o.length-1])&&n[0]===i?n[1]+=e:o.push([i,e]);return o},h.prototype.note=function(t,e){return this.frequency(h.Parsers.hzFromInput(t),e)},h.prototype.tone=function(t,e){return this.frequency(h.ToFrequency(t),e)},h.prototype.frequency=function(t,e){return this.tone(h.ToTone(t),e)},h.prototype.play=function(t,e){"object"!=typeof t&&(t={song:t}),"string"==typeof t.song&&(t.song=h.ToSong(t.song,t.beats)),t.song&&!Array.isArray(t.song)&&(t.song=[t.song]);var i,n=o.get(this),r=t.tempo||250,s=Math.round(6e4/r),a=t.song||[],u=0,l=function(){if(u===a.length)return n.isPlaying=!1,void("function"==typeof e&&e(t));var r=a[u],o=h.Parsers.hzFromInput(r),c=h.Parsers.beatFromNote(r);i=c*s,u++,null===o?this.noTone():this.frequency(o,i),n.timeout=setTimeout(l,i)}.bind(this);return n.isPlaying=!0,l(),this},h.prototype.off=function(){return this.noTone()},h.prototype.stop=function(){var t=o.get(this);return t.timeout&&(clearTimeout(t.timeout),t.timeout=null),this},t.exports=h},function(t,e,i){(function(e,i,n){function r(t){var i=e.version,n=i.split(".")[0];n=n.split("v")[1];var r=i.split(".")[1];0==n&&r<10&&(console.log("Error: Please update to the latest version of node! This library requires 0.10.x or later"),e.exit(0)),this.intervalT1=null,this.timeOutT1=null,this.intervalCount=1,this.deferredInterval=!1,this.deferredTimeout=!1,this.deferredTimeoutRef=null,this.deferredIntervalRef=null,this.timeoutCallbackRef=null,this.intervalCallbackRef=null,this.timeoutImmediateRef=null,this.intervalImmediateRef=null,this.intervalErrorChecked=!1,this.intervalType="",t&&(this.logging=!0)}r.prototype.time=function(t,i,n,r){if(!r){s=e.hrtime();i?t.apply(null,i):t();var o=e.hrtime(s);return"s"==n?o[0]+o[1]/1e9:"m"==n?o[0]/1e3+o[1]/1e6:"u"==n?o[0]/1e6+o[1]/1e3:"n"==n?o[0]/1e9+o[1]:e.hrtime(s)}var s=e.hrtime();i?(i.push(function(){var t=e.hrtime(s);r("s"==n?t[0]+t[1]/1e9:"m"==n?t[0]/1e3+t[1]/1e6:"u"==n?t[0]/1e6+t[1]/1e3:"n"==n?t[0]/1e9+t[1]:t)}),t.apply(null,i)):t(function(){var t=e.hrtime(s);r("s"==n?t[0]+t[1]/1e9:"m"==n?t[0]/1e3+t[1]/1e6:"u"==n?t[0]/1e6+t[1]/1e3:"n"==n?t[0]/1e9+t[1]:t)})},r.prototype.setInterval=function(t,n,r,o){this.intervalErrorChecked||(t?"function"!=typeof t&&(console.log("Task argument to setInterval must be a function reference"),e.exit(1)):(console.log("A task function must be specified to setInterval"),e.exit(1)),r?"string"!=typeof r&&(console.log("Interval argument to setInterval must be a string specified as an integer followed by 's' for seconds, 'm' for milli, 'u' for micro, and 'n' for nanoseconds. Ex. 2u"),e.exit(1)):(console.log("An interval argument must be specified"),e.exit(1)),o&&("function"!=typeof o?(console.log("Callback argument to setInterval must be a function reference"),e.exit(1)):this.intervalCallbackRef=o),this.intervalType=r[r.length-1],"s"==this.intervalType?this.intervalTime=1e9*r.slice(0,r.length-1):"m"==this.intervalType?this.intervalTime=1e6*r.slice(0,r.length-1):"u"==this.intervalType?this.intervalTime=1e3*r.slice(0,r.length-1):"n"==this.intervalType?this.intervalTime=r.slice(0,r.length-1):(console.log("Error with argument: "+r+': Incorrect interval format. Format is an integer followed by "s" for seconds, "m" for milli, "u" for micro, and "n" for nanoseconds. Ex. 2u'),e.exit(1)),this.intervalErrorChecked=!0);var s=this;this.intervalTime>0?(null==this.intervalT1&&(this.intervalT1=e.hrtime()),this.intervalTime*this.intervalCount>8e15&&(this.intervalT1=e.hrtime(),this.intervalCount=1),this.difArray=e.hrtime(this.intervalT1),this.difTime=1e9*this.difArray[0]+this.difArray[1],this.difTime<this.intervalTime*this.intervalCount?this.intervalTime>25e6?0==this.deferredInterval?(this.deferredInterval=!0,msDelay=(this.intervalTime-25e6)/1e6,this.deferredIntervalRef=setTimeout(function(){s.setInterval(t,n,r,o)},msDelay)):(this.deferredIntervalRef=null,this.intervalImmediateRef=i(function(){s.setInterval(t,n,r,o)})):this.intervalImmediateRef=i(function(){s.setInterval(t,n,r,o)}):(this.intervalImmediateRef=null,this.logging&&console.log("nanotimer log: cycle time at - "+this.difTime),n?t.apply(null,n):t(),this.intervalT1&&(this.intervalCount++,this.deferredInterval=!1,this.intervalImmediateRef=i(function(){s.setInterval(t,n,r,o)})))):(null==this.intervalT1&&(this.intervalT1=e.hrtime(),this.intervalContinue=!0),1==this.intervalContinue?(n?t.apply(null,n):t(),i(function(){s.setInterval(t,n,r,o)})):(this.intervalT1=null,this.intervalCount=1,o()))},r.prototype.setTimeout=function(t,n,r,o){t?"function"!=typeof t&&(console.log("Task argument to setTimeout must be a function reference"),e.exit(1)):(console.log("A task function must be specified to setTimeout"),e.exit(1)),r?"string"!=typeof r&&(console.log("Delay argument to setTimeout must be a string specified as an integer followed by 's' for seconds, 'm' for milli, 'u' for micro, and 'n' for nanoseconds. Ex. 2u"),e.exit(1)):(console.log("A delay argument must be specified"),e.exit(1)),o&&("function"!=typeof o?(console.log("Callback argument to setTimeout must be a function reference"),e.exit(1)):this.timeoutCallbackRef=o);var s=this,a=r[r.length-1];if("s"==a)var u=1e9*r.slice(0,r.length-1);else if("m"==a)u=1e6*r.slice(0,r.length-1);else if("u"==a)u=1e3*r.slice(0,r.length-1);else if("n"==a)u=r.slice(0,r.length-1);else console.log("Error with argument: "+r+': Incorrect delay format. Format is an integer followed by "s" for seconds, "m" for milli, "u" for micro, and "n" for nanoseconds. Ex. 2u'),e.exit(1);null==this.timeOutT1&&(this.timeOutT1=e.hrtime());var h=e.hrtime(this.timeOutT1),l=1e9*h[0]+h[1];l<u?u>25e6?0==this.deferredTimeout?(this.deferredTimeout=!0,msDelay=(u-25e6)/1e6,this.deferredTimeoutRef=setTimeout(function(){s.setTimeout(t,n,r,o)},msDelay)):(this.deferredTimeoutRef=null,this.timeoutImmediateRef=i(function(){s.setTimeout(t,n,r,o)})):this.timeoutImmediateRef=i(function(){s.setTimeout(t,n,r,o)}):(this.timeoutImmediateRef=null,this.timeOutT1=null,this.deferredTimeout=!1,1==this.logging&&console.log("nanotimer log: actual wait - "+l),n?t.apply(null,n):t(),o&&o({waitTime:l}))},r.prototype.clearInterval=function(){this.deferredIntervalRef&&(clearTimeout(this.deferredIntervalRef),this.deferredInterval=!1),this.intervalImmediateRef&&n(this.intervalImmediateRef),this.intervalT1=null,this.intervalCount=1,this.intervalErrorChecked=!1,this.intervalCallbackRef&&this.intervalCallbackRef()},r.prototype.clearTimeout=function(){if(this.deferredTimeoutRef){clearTimeout(this.deferredTimeoutRef);var t=e.hrtime(this.timeOutT1),i=1e9*t[0]+t[1];this.deferredTimeout=!1}if(this.timeoutImmediateRef&&n(this.timeoutImmediateRef),this.timeOutT1=null,this.timeoutCallbackRef){var r={waitTime:i};this.timeoutCallbackRef(r)}},t.exports=r}).call(this,i(0),i(24).setImmediate,i(24).clearImmediate)},function(t,e,i){(function(t,e){!function(t,i){"use strict";if(!t.setImmediate){var n,r,o,s,a,u=1,h={},l=!1,c=t.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(t);f=f&&f.setTimeout?f:t,"[object process]"==={}.toString.call(t.process)?n=function(t){e.nextTick(function(){d(t)})}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,i=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=i,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){d(t.data)},n=function(t){o.port2.postMessage(t)}):c&&"onreadystatechange"in c.createElement("script")?(r=c.documentElement,n=function(t){var e=c.createElement("script");e.onreadystatechange=function(){d(t),e.onreadystatechange=null,r.removeChild(e),e=null},r.appendChild(e)}):n=function(t){setTimeout(d,0,t)}:(s="setImmediate$"+Math.random()+"$",a=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(s)&&d(+e.data.slice(s.length))},t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),n=function(e){t.postMessage(s+e,"*")}),f.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),i=0;i<e.length;i++)e[i]=arguments[i+1];var r={callback:t,args:e};return h[u]=r,n(u),u++},f.clearImmediate=p}function p(t){delete h[t]}function d(t){if(l)setTimeout(d,0,t);else{var e=h[t];if(e){l=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(i,n)}}(e)}finally{p(t),l=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,i(7),i(0))},function(t,e,i){var n=i(1).EventEmitter,r=i(2),o=i(4),s=i(5),a=i(14),u=s.toFixed,h=new Map;function l(t){if(!(this instanceof l))return new l(t);var e=null;o.Component.call(this,t=o.Options(t)),this.pin=t&&t.pin||7,this.freq=t.freq||20;var i={value:null},n={pin:this.pin,value:this.io.HIGH,pulseOut:5};this.io.setMaxListeners(100),setInterval(function(){this.io.pingRead(n,function(t){i.value=t})}.bind(this),225),setInterval(function(){null!==i.value&&(this.emit("data",i.value),i.value!==e&&this.emit("change",i.value),e=i.value)}.bind(this),this.freq),Object.defineProperties(this,{value:{get:function(){return i.value}},inches:{get:function(){return u(i.value/74/2,2)}},in:{get:function(){return this.inches}},cm:{get:function(){return u(i.value/29/2,3)}}}),h.set(this,i)}r.inherits(l,n),Object.assign(l.prototype,a),t.exports=l},function(t,e,i){(function(e){var n=i(4),r=i(6),o=i(13),s=i(5),a=i(14),u=i(1).EventEmitter,h=i(2),l=n.Pins,c=s.toFixed,f=new Map;function p(t,e){this.io.pinMode(this.pin,this.io.MODES.ANALOG),this.io.analogRead(this.pin,function(t){e.call(this,t)}.bind(this))}var d={GP2Y0A21YK:{initialize:{value:p},toCm:{value:function(t){return c(12343.85*Math.pow(t,-1.15),2)}}},GP2D120XJ00F:{initialize:{value:p},toCm:{value:function(t){return c(2914/(t+5)-1,2)}}},GP2Y0A02YK0F:{initialize:{value:p},toCm:{value:function(t){return c(10650.08*Math.pow(t,-.935)-10,2)}}},GP2Y0A41SK0F:{initialize:{value:p},toCm:{value:function(t){return c(2076/(t-11),2)}}},GP2Y0A710K0F:{initialize:{value:p},toCm:{value:function(t){return c(38631e4*Math.pow(t,-2.463343),0)}}},SRF10:{initialize:{value:function(t,e){var i=t.address||112,n=65;function r(){this.io.i2cWrite(i,[0,81]),setTimeout(function(){this.io.i2cWrite(i,[2]),this.io.i2cReadOnce(i,2,function(t){e(t[0]<<8|t[1])}.bind(this)),r.call(this)}.bind(this),n)}t.address=i,this.io.i2cConfig(t),this.io.i2cWrite(i,[1,16]),this.io.i2cWrite(i,[2,255]),r.call(this)}},toCm:{value:function(t){return t}}},MB1000:{initialize:{value:p},toCm:{value:function(t){return c(t/2*2.54,2)}}},MB1003:{initialize:{value:p},toCm:{value:function(t){return c(t/2,1)}}},MB1230:{initialize:{value:p},toCm:{value:function(t){return t>>0}}},HCSR04:{initialize:{value:function(t,e){var i=t.pinValue;l.isFirmata(this)&&("string"==typeof i&&"A"===i[0]&&(i=this.io.analogPins[+i.slice(1)]),i=+i,this.io.analogPins.includes(i)&&(t.pin=i),this.pin=t.pin);var n={pin:t.pin,value:this.io.HIGH,pulseOut:5},r=function(){this.io.pingRead(n,function(t){e(t),setTimeout(r,65)})}.bind(this);r()}},toCm:{value:function(t){return c(t/29.1/2,1)}}},HCSR04I2CBACKPACK:{initialize:{value:function(t,e){var i=t.address||39;t.address=i,this.io.i2cConfig(t),void 0===t.pin&&(this.pin=8);var n=function(){this.io.i2cReadOnce(i,2,function(t){e((t[0]<<8)+t[1]),setTimeout(n,90)})}.bind(this);n()}},toCm:{value:function(t){return c(t/29.1/2,1)}}},LIDARLITE:{REGISTER:{value:{ENABLE:0,READ:143}},initialize:{value:function(t,e){t.address=98,this.io.i2cConfig(t);var i=function(){this.io.i2cWrite(98,this.REGISTER.ENABLE,4),setTimeout(function(){this.io.i2cReadOnce(98,this.REGISTER.READ,2,function(t){e((t[0]<<8)+t[1]),i()})}.bind(this),20)}.bind(this);i()}},toCm:{value:function(t){return t>>0}}},EVS_EV3_IR:{initialize:{value:function(t,e){var i=f.get(this);i.shield=o.shieldPort(t.pin),i.ev3=new o(Object.assign(t,{io:this.io})),i.ev3.setup(i.shield,o.Type_EV3),i.ev3.read(i.shield,o.Proximity,o.Proximity_Bytes,function(t){var i=t[0]|t[1]<<8;e(i)})}},toCm:{value:function(t){return t}}},EVS_EV3_US:{initialize:{value:function(t,e){var i=f.get(this);i.shield=o.shieldPort(t.pin),i.ev3=new o(Object.assign(t,{io:this.io})),i.ev3.setup(i.shield,o.Type_EV3),i.ev3.read(i.shield,o.Proximity,o.Proximity_Bytes,function(t){var i=t[0]|t[1]<<8;e(i)})}},toCm:{value:function(t){return t/10}}}};function v(t){if(!(this instanceof v))return new v(t);var e=null,i=0,r=t.freq||25,o=0,s="object"==typeof t?t.pin:t;n.Component.call(this,t=n.Options(t)),e="string"==typeof t.controller?d[t.controller]:t.controller||d.GP2Y0A21YK,n.Controller.call(this,e,t),this.toCm||(this.toCm=t.toCm||function(t){return t}),f.set(this,{}),Object.defineProperties(this,{centimeters:{get:function(){return this.toCm(i)}},cm:{get:function(){return this.centimeters}},inches:{get:function(){return c(.39*this.centimeters,2)}},in:{get:function(){return this.inches}}}),"function"==typeof this.initialize&&(t.pinValue=s,this.initialize(t,function(t){i=t})),setInterval(function(){if(void 0!==i){var t={cm:this.cm,centimeters:this.centimeters,in:this.in,inches:this.inches};this.emit("data",t),i!==o&&(o=i,this.emit("change",t))}}.bind(this),r)}d["2Y0A21"]=d.GP2Y0A21YK,d["2D120X"]=d.GP2D120XJ00F,d["2Y0A02"]=d.GP2Y0A02YK0F,d["0A41"]=d.GP2Y0A41SK0F,d["0A21"]=d.GP2Y0A21YK,d["0A02"]=d.GP2Y0A02YK0F,d["41SK0F"]=d.GP2Y0A41SK0F,d["21YK"]=d.GP2Y0A21YK,d["2YK0F"]=d.GP2Y0A02YK0F,d.MB1010=d.MB1000,d["LV-MaxSonar-EZ"]=d.MB1000,d["LV-MaxSonar-EZ0"]=d.MB1000,d["LV-MaxSonar-EZ1"]=d.MB1010,d["HRLV-MaxSonar-EZ0"]=d.MB1003,d["XL-MaxSonar-EZ3"]=d.MB1230,["HC-SR04","SR04","SRF05","SRF06","PARALLAXPING","SEEEDPING","GROVEPING","PING_PULSE_IN","ULTRASONIC_PING"].forEach(function(t){d[t]=d.HCSR04}),["HCSR04-I2C-BACKPACK","HC-SR04-I2C-BACKPACK","SR04-I2C-BACKPACK","SR04I2CBACKPACK","PINGI2CBACKPACK","PING-I2C-BACKPACK","HCSR04_I2C_BACKPACK","HC_SR04_I2C_BACKPACK","SR04_I2C_BACKPACK","SR04I2CBACKPACK","PINGI2CBACKPACK","PING_I2C_BACKPACK"].forEach(function(t){d[t]=d.HCSR04I2CBACKPACK}),d["LIDAR-Lite"]=d.LIDARLITE,v.Controllers=["2Y0A21","GP2Y0A21YK","2D120X","GP2D120XJ00F","2Y0A02","GP2Y0A02YK0F","OA41SK","GP2Y0A41SK0F","0A21","GP2Y0A21YK","0A02","GP2Y0A02YK0F"],h.inherits(v,u),Object.assign(v.prototype,a),v.Collection=function(t){if(!(this instanceof v.Collection))return new v.Collection(t);Object.defineProperty(this,"type",{value:v}),r.Emitter.call(this,t)},h.inherits(v.Collection,r.Emitter),r.installMethodForwarding(v.Collection.prototype,v.prototype),e.env.IS_TEST_MODE&&(v.Controllers=d,v.purge=function(){f.clear()}),t.exports=v}).call(this,i(0))},function(t,e,i){(function(e){var n=i(4),r=i(6),o=n.Pins,s=i(2),a=new Map;function u(t){if(!(this instanceof u))return new u(t);var e="object"==typeof t?t.pin:t;n.Component.call(this,t=n.Options(t)),t.type=t.type||"NO";var i={isInverted:"NC"===t.type,isOn:!1,value:null};a.set(this,i),Object.defineProperties(this,{value:{get:function(){return Number(this.isOn)}},type:{get:function(){return i.isInverted?"NC":"NO"}},isOn:{get:function(){return i.isOn}}}),o.isFirmata(this)&&"string"==typeof e&&"A"===e[0]&&(this.pin=this.io.analogPins[+e.slice(1)],this.io.pinMode(this.pin,this.io.MODES.OUTPUT))}function h(t){if(!(this instanceof h))return new h(t);Object.defineProperty(this,"type",{value:u}),r.call(this,t)}u.prototype.on=function(){var t=a.get(this);return this.io.digitalWrite(this.pin,t.isInverted?this.io.LOW:this.io.HIGH),t.isOn=!0,this},u.prototype.close=u.prototype.on,u.prototype.off=function(){var t=a.get(this);return this.io.digitalWrite(this.pin,t.isInverted?this.io.HIGH:this.io.LOW),t.isOn=!1,this},u.prototype.open=u.prototype.off,u.prototype.toggle=function(){return a.get(this).isOn?this.off():this.on(),this},s.inherits(h,r),r.installMethodForwarding(h.prototype,u.prototype),u.Array=h,u.Collection=h,e.env.IS_TEST_MODE&&(u.purge=function(){a.clear()}),t.exports=u}).call(this,i(0))},function(t,e,i){var n,r=i(4),o=i(1),s=i(2),a=i(14),u=new Map;function h(t){if(!(this instanceof h))return new h(t);var e,i;r.Component.call(this,t=r.Options(t)),this.freq=t.freq||100,this.value=null,i={last:0,median:0,samples:[]},u.set(this,i),void 0===(e="string"==typeof t.device?n[t.device]:t.device)&&(e=n.DEFAULT),e.initialize.call(this,t),e.descriptor.inches||(e.descriptor.inches={get:function(){return+(.39*this.cm).toFixed(2)}}),e.descriptor.in=e.descriptor.inches,Object.defineProperties(this,e.descriptor),setInterval(function(){0!==i.samples.length&&(i.median=i.samples.sort()[Math.floor(i.samples.length/2)],this.value=i.median,this.emit("data",i.median),i.last&&i.median&&i.median.toFixed(1)!==i.last.toFixed(1)&&this.emit("change",i.median),i.last=i.median,i.samples.length=0)}.bind(this),this.freq)}s.inherits(h,o.EventEmitter),Object.assign(h.prototype,a),(n={SRF10:{initialize:function(t){var e=u.get(this).samples,i=112,n=65;function r(){this.io.i2cWrite(i,[0,82]),setTimeout(function(){this.io.i2cWrite(i,[2]),this.io.i2cReadOnce(i,2,function(t){e.push(t[0]<<8|t[1])}.bind(this)),r.call(this)}.bind(this),n)}this.io.i2cConfig(t),this.io.i2cWrite(i,[1,16]),this.io.i2cWrite(i,[2,255]),this.io.setMaxListeners(100),r.call(this)},descriptor:{cm:{get:function(){return+(u.get(this).median/2*343.2/10/1e3).toFixed(1)}}}},DEFAULT:{initialize:function(){var t=u.get(this).samples;this.mode=this.io.MODES.ANALOG,this.io.pinMode(this.pin,this.mode),this.io.analogRead(this.pin,function(e){t.push(e)}.bind(this))},descriptor:{cm:{get:function(){return+(u.get(this).median/2*2.54).toFixed(1)}}}}}).SRF02=n.SRF08=n.SRF10,t.exports=h},function(t,e,i){var n=i(4),r=i(5),o=new Map,s=new Map,a=r.TAU,u=6;function h(t){this.rpm=180,this.direction=-1,this.speed=0,this.accel=0,this.decel=0,this.stepper=t}function l(t){var e=0;for(t=t.slice();t.length;)this["motor"+ ++e]=t.shift()}function c(t){var e,i,r=[];if(!(this instanceof c))return new c(t);if(n.Component.call(this,t=n.Options(t)),!(i=this.io).pins.some(function(t){return t.supportedModes.includes(i.MODES.STEPPER)}))throw new Error("Stepper is not supported");if(!t.pins)throw new Error("Stepper requires a `pins` object or array");if(!t.stepsPerRev)throw new Error("Stepper requires a `stepsPerRev` number value");if(s.set(this.board,s.get(this.board)||[]),this.id=s.get(this.board).length,this.id>=u)throw new Error("Stepper cannot exceed max steppers ("+u+")");if(Array.isArray(this.pins)){if(2===this.pins.length&&!t.type)throw new Error("Stepper requires a `type` number value (DRIVER, TWO_WIRE)");t.type===c.TYPE.DRIVER?this.pins={step:this.pins[0],dir:this.pins[1]}:this.pins=new l(this.pins)}if(t.type||(this.pins.dir?t.type=c.TYPE.DRIVER:this.pins.motor3?t.type=c.TYPE.FOUR_WIRE:t.type=c.TYPE.TWO_WIRE),r.push(this.id,t.type,t.stepsPerRev),t.type===c.TYPE.DRIVER){if(void 0===this.pins.dir||void 0===this.pins.step)throw new Error("Stepper.TYPE.DRIVER expects: `pins.dir`, `pins.step`");r.push(this.pins.dir,this.pins.step)}if(t.type===c.TYPE.TWO_WIRE){if(void 0===this.pins.motor1||void 0===this.pins.motor2)throw new Error("Stepper.TYPE.TWO_WIRE expects: `pins.motor1`, `pins.motor2`");r.push(this.pins.motor1,this.pins.motor2)}if(t.type===c.TYPE.FOUR_WIRE){if(void 0===this.pins.motor1||void 0===this.pins.motor2||void 0===this.pins.motor3||void 0===this.pins.motor4)throw new Error("Stepper.TYPE.FOUR_WIRE expects: `pins.motor1`, `pins.motor2`, `pins.motor3`, `pins.motor4`");r.push(this.pins.motor1,this.pins.motor2,this.pins.motor3,this.pins.motor4)}r.slice(3).forEach(function(t){this.io.pinMode(t,this.io.MODES.STEPPER)},this),this.io.stepperConfig.apply(this.io,r),s.get(this.board).push(this),e=h.PROPERTIES.reduce(function(e,i,n){return e[i]=void 0!==t[i]?t[i]:h.DEFAULTS[n],e},{isRunning:!1,type:t.type,pins:this.pins}),o.set(this,e),Object.defineProperties(this,{type:{get:function(){return e.type}},pins:{get:function(){return e.pins}}})}h.PROPERTIES=["rpm","direction","speed","accel","decel"],h.DEFAULTS=[180,-1,0,0,0],Object.defineProperties(c,{TYPE:{value:Object.freeze({DRIVER:1,TWO_WIRE:2,FOUR_WIRE:4})},RUNSTATE:{value:Object.freeze({STOP:0,ACCEL:1,DECEL:2,RUN:3})},DIRECTION:{value:Object.freeze({CCW:0,CW:1})}}),c.prototype.rpm=function(t){var e=o.get(this);return void 0===t?e.rpm:(e.rpm=t,e.speed=Math.round(t*a*100/60),this)},c.prototype.speed=function(t){var e=o.get(this);return void 0===t?e.speed:(e.speed=t,e.rpm=Math.round(t/a/100*60),this)},["direction","accel","decel"].forEach(function(t){c.prototype[t]=function(e){var i=o.get(this);return void 0===e?i[t]:(i[t]=e,this)}}),c.prototype.ccw=function(){return this.direction(0)},c.prototype.cw=function(){return this.direction(1)},c.prototype.step=function(t,e){var i,n,r,s,a;function u(t){a=!1,e&&e(t)}return i="object"==typeof t?t.steps||0:Math.floor(t),n=new h(this),r=o.get(this),a=!0,(s=[]).push(i),"object"==typeof t&&h.PROPERTIES.forEach(function(e){void 0!==t[e]&&this[e](t[e])},this),r.speed||(this.rpm(r.rpm),n.speed=this.speed()),h.PROPERTIES.slice(1).forEach(function(t){s.push(n[t]=this[t]())},this),0===i&&u(new Error("Must set a number of steps when calling `step()`")),n.direction<0&&u(new Error("Must set a direction before calling `step()`")),a&&(r.isRunning=!0,s.push(function(t){r.isRunning=!1,e(null,t)}),n.move.apply(n,s)),this},h.prototype.move=function(t,e,i,n,r,o){this.stepper.io.stepperStep.apply(this.stepper.io,[this.stepper.id,e,t,i,n,r,o])},t.exports=c},function(t,e,i){var n=i(4),r=i(6),o=i(1).EventEmitter,s=i(5),a=i(2),u={close:["close","closed","on"],open:["open","off"]};function h(t){if(!(this instanceof h))return new h(t);var e=s.debounce(function(t){u[t].forEach(function(t){this.emit(t,null)},this)},5);n.Component.call(this,t=n.Options(t)),t.type=t.type||"NO";var i="NO"===t.type,r=null,o=void 0!==t.invert?t.invert:i||!1,a=1,l=0;o&&(a^=1,l^=1),this.io.pinMode(this.pin,this.io.MODES.INPUT),i&&this.io.digitalWrite(this.pin,this.io.HIGH),this.io.digitalRead(this.pin,function(t){r=t,e.call(this,this.isOpen?"open":"close")}.bind(this)),Object.defineProperties(this,{value:{get:function(){return Number(this.isOpen)}},invert:{get:function(){return o},set:function(t){a=(o=t)?0:1,l=o?1:0}},closeValue:{get:function(){return a},set:function(t){a=t,l=1^t}},openValue:{get:function(){return l},set:function(t){l=t,a=1^t}},isOpen:{get:function(){return r===l}},isClosed:{get:function(){return r===a}}})}function l(t){if(!(this instanceof l))return new l(t);Object.defineProperty(this,"type",{value:h}),r.Emitter.call(this,t)}a.inherits(h,o),a.inherits(l,r.Emitter),r.installMethodForwarding(l.prototype,h.prototype),h.Collection=l,t.exports=h},function(t,e,i){var n,r,o,s=i(4),a=i(1),u=i(2),h={down:["down","press","tap","impact","hit"],up:["up","release"],hold:["hold"]},l=new Map,c=new Map,f=new Map;function p(t){if(!(this instanceof p))return new p(t);s.Component.call(this,t);var e=n[t.device],i=e.address,r=e.bytes,o=e.delay,a=e.data.bind(this),u=e.setup,h=e.preread;this.freq=t.freq||100,this.holdtime=t.holdtime||500,this.threshold=t.threshold||10,e.initialize.call(this),f.set(this,[0,0,0,0,0,0,0]),this.io.i2cConfig(t),u.forEach(function(t){this.io.i2cWrite(i,t)},this),setInterval(function(){h.forEach(function(t){this.io.i2cWrite(i,t)},this),this.io.i2cReadOnce(i,r,a),void 0!==e.read&&e.read.call(this)}.bind(this),o||this.freq),setInterval(function(){var t=new s.Event({target:this});this.emit("data",t)}.bind(this),this.freq)}function d(t){return 23+(23^t)}p.Components={},p.Components.Button=function(t,e){if(!(this instanceof p.Components.Button))return new p.Components.Button(t,e);this.which=t,this.controller=e;var i={isDown:!1};l.set(this,i),Object.defineProperties(this,{isUp:{get:function(){return!i.isDown}},isDown:{get:function(){return i.isDown}}})},p.Components.Joystick=function(t){if(!(this instanceof p.Components.Joystick))return new p.Components.Joystick(t);var e,i;this.controller=t,e={},i={},["x","y","dx","dy"].forEach(function(t){e[t]=0,i[t]={get:function(){return e[t]}}},this),l.set(this,e),Object.defineProperties(this,i)},p.Components.Accelerometer=function(t){if(!(this instanceof p.Components.Accelerometer))return new p.Components.Accelerometer(t);var e,i;this.controller=t,e={},i={},["x","y","z","dx","dy","dz"].forEach(function(t){e[t]=0,i[t]={get:function(){return e[t]}}},this),l.set(this,e),Object.defineProperties(this,i)},u.inherits(p,a.EventEmitter),u.inherits(p.Components.Button,a.EventEmitter),u.inherits(p.Components.Joystick,a.EventEmitter),u.inherits(p.Components.Accelerometer,a.EventEmitter),r={button:function(t){h[t].forEach(function(t){var e=new s.Event({target:this,type:t});this.emit(t,e),this.controller.emit(t,e)},this)},component:function(t){["axischange","change"].forEach(function(e){var i;this._events&&this._events[e]&&(i=new s.Event({target:this,type:e,axis:t,direction:this["d"+t]<0?-1:1}),this.emit(e,i),this.controller.emit(e,i))},this)}},o={button:function(t){var e,i;i=!1,t!==(e=l.get(this)).isDown&&(i=!0),e.isDown=t,i&&(c.set(this,setTimeout(function(){e.isDown&&r.button.call(this,"hold")}.bind(this),this.controller.holdtime)),r.button.call(this,t?"down":"up"))},component:function(t,e){var i=l.get(this);i["d"+t]=e-i[t],i[t]=e}},n={"RVL-004":{address:82,bytes:6,delay:100,setup:[[64,0]],preread:[[0]],read:function(){var t=["x","y","z"];[this.joystick,this.accelerometer].forEach(function(e){t.forEach(function(t){var i="d"+t;void 0!==e[i]&&Math.abs(e[i])>this.threshold&&r.component.call(e,t)},this)},this)},initialize:function(){this.joystick=new p.Components.Joystick(this),this.accelerometer=new p.Components.Accelerometer(this),this.c=new p.Components.Button("c",this),this.z=new p.Components.Button("z",this)},data:function(t){254!==t[0]&&254!==t[1]&&254!==t[2]&&(o.component.call(this.joystick,"x",d(t[0])<<2),o.component.call(this.joystick,"y",d(t[1])<<2),o.component.call(this.accelerometer,"x",d(t[2])<<2),o.component.call(this.accelerometer,"y",d(t[3])<<2),o.component.call(this.accelerometer,"z",d(t[4])<<2),o.button.call(this.z,0==(1&d(t[5]))),o.button.call(this.c,0==(2&d(t[5]))),f.set(this,t))}},"RVL-005":{address:82,bytes:6,delay:100,setup:[[64,0]],preread:[[0]],initialize:function(){this.joystick={left:new p.Components.Joystick(this),right:new p.Components.Joystick(this)},["y","x","up","down","left","right","a","b","l","r","zl","zr","start","home","select"].forEach(function(t){this[t]=new p.Components.Button(t,this)},this)},data:function(t){254!==t[0]&&254!==t[1]&&254!==t[2]&&(o.button.call(this.l,0==(32&d(t[4]))),o.button.call(this.r,0==(2&d(t[4]))),o.button.call(this.up,0==(1&d(t[5]))),o.button.call(this.left,0==(2&d(t[5]))),o.button.call(this.down,0==(64&d(t[4]))),o.button.call(this.right,0==(128&d(t[4]))),o.button.call(this.zr,0==(4&d(t[5]))),o.button.call(this.zl,0==(128&d(t[5]))),o.button.call(this.x,0==(8&d(t[5]))),o.button.call(this.y,0==(32&d(t[5]))),o.button.call(this.a,0==(16&d(t[5]))),o.button.call(this.b,0==(64&d(t[5]))),o.button.call(this.select,0==(16&d(t[4]))),o.button.call(this.start,0==(4&d(t[4]))),o.button.call(this.home,0==(8&d(t[4]))),o.component.call(this.joystick.left,"x",63&d(t[0])),o.component.call(this.joystick.left,"y",63&d(t[0])),o.component.call(this.joystick.right,"x",((192&t[0])>>3)+((192&t[1])>>5)+((128&t[2])>>7)),o.component.call(this.joystick.right,"y",31&t[2]),f.set(this,t))}}},p.Nunchuk=function(t){return(t=t||{}).device="RVL-004",new p(t)},p.Classic=function(t){return(t=t||{}).device="RVL-005",new p(t)},t.exports=p},function(t,e,i){var n=i(4),r=i(1),o=i(2),s=i(5),a=i(45),u=i(23),h=0,l=1e3,c=200,f=50,p=new Map;function d(){var t=this,e=p.get(this);if(void 0===this.opts.emitter)throw new Error("Emitter pin is required");if(!this.pins||0===this.pins.length)throw new Error("Pins must be defined");e.emitter=new a({board:this.board,pin:this.opts.emitter}),e.sensorStates=this.pins.map(function(e){var i={sensor:new u({board:this.board,freq:this.freq,pin:e}),rawValue:0,dataReceived:!1};return i.sensor.on("data",function(){(function(t,e){var i=p.get(this);t.dataReceived=!0,t.rawValue=e,i.sensorStates.every(function(t){return t.dataReceived})&&(this.emit("data",this.raw),i.autoCalibrate&&v(i.calibration,this.raw),this.isCalibrated&&(this.emit("calibratedData",this.values),this.emit("line",this.line)),i.sensorStates.forEach(function(t){t.dataReceived=!1}))}).call(t,i,this.value)}),i},this)}function v(t,e){e.forEach(function(e,i){(void 0===t.min[i]||e<t.min[i])&&(t.min[i]=e),(void 0===t.max[i]||e>t.max[i])&&(t.max[i]=e)})}function g(t,e){return t&&t.max&&t.max.length===e.length&&t.min&&t.min.length===e.length}function E(){return(this.sensors.length-1)*l}function m(t){if(!(this instanceof m))return new m(t);this.opts=n.Options(t),n.Component.call(this,this.opts,{requestPin:!1}),this.freq=t.freq||25;var e={lastLine:0,isOn:!1,calibration:{min:[],max:[]},autoCalibrate:t.autoCalibrate||!1};p.set(this,e),d.call(this),Object.defineProperties(this,{isOn:{get:function(){return e.emitter.isOn}},isCalibrated:{get:function(){return g(this.calibration,this.sensors)}},isOnLine:{get:function(){var t=this.line;return t>h&&t<E.call(this)}},sensors:{get:function(){return e.sensorStates.map(function(t){return t.sensor})}},calibration:{get:function(){return e.calibration}},raw:{get:function(){return e.sensorStates.map(function(t){return t.rawValue})}},values:{get:function(){return this.isCalibrated?function(){return this.raw.map(function(t,e){var i=this.calibration.max[e],n=this.calibration.min[e],r=s.scale(t,n,i,h,l);return s.constrain(r,h,l)},this)}.call(this):this.raw}},line:{get:function(){return this.isCalibrated?function(t){var e=!1,i=0,n=0,r=p.get(this);if(t=!!t,this.values.forEach(function(r,o){(r=t?l-r:r)>c&&(e=!0),r>f&&(i+=r*o*l,n+=r)}),!e){var o=E.call(this)+1,s=o/2;return r.lastLine<s?0:o}return r.lastLine=Math.floor(i/n)}.call(this):0}}})}o.inherits(m,r.EventEmitter),m.prototype.enable=function(){return p.get(this).emitter.on(),this},m.prototype.disable=function(){return p.get(this).emitter.off(),this},m.prototype.calibrate=function(){var t=p.get(this);return this.once("data",function(e){v(t.calibration,e),this.emit("calibrated")}),this},m.prototype.calibrateUntil=function(t){var e=function(){this.calibrate(),this.once("calibrated",function(){t()||e()})}.bind(this);return e(),this},m.prototype.loadCalibration=function(t){var e=p.get(this);if(!g(t,this.sensors))throw new Error("Calibration data not properly set: {min: [], max: []}");return e.calibration=t,this},t.exports=m},function(t,e,i){"use strict";(function(e){var n=i(2),r=i(110),o=[{vendorId:9025,productId:32822},{vendorId:9025,productId:32823},{vendorId:9114,productId:32785}];function s(t){var i=this;function n(t){i.device=t;var n=function(){i.device.transferIn(5,64).then(function(t){i.emit("data",new e(t.data.buffer)),n()},function(t){i.emit("emit",t)})};i.device.open().then(function(){return i.device.configuration}).then(function(t){if(1==t.configurationValue)return{};throw new Error("Need to setConfiguration(1).")}).catch(function(t){return i.device.setConfiguration(1)}).then(function(){return i.device.claimInterface(2)}).then(function(){return i.device.controlTransferOut({requestType:"class",recipient:"interface",request:34,value:1,index:2})}).then(function(){i.emit("open"),n()})}t=t||{},i.filters=t.filters||o,t.device?n(t.device):navigator.usb.requestDevice({filters:i.filters}).then(n).catch(function(t){i.emit("error",t)})}n.inherits(s,r.Stream),s.prototype.open=function(t){this.emit("open"),t&&t()},s.prototype.write=function(t,e){this.device.transferOut(4,t).then(function(){e&&e(null)}).catch(function(t){e&&e(t)})},s.prototype.close=function(t){var e=this;e.device.controlTransferOut({requestType:"class",recipient:"interface",request:34,value:0,index:2}).then(function(){e.device.close(),t&&t()})},s.prototype.flush=function(t){t&&t()},s.prototype.drain=function(t){t&&t()},s.DEFAULT_FILTERS=o,t.exports=s}).call(this,i(8).Buffer)},function(t,e,i){t.exports=r;var n=i(1).EventEmitter;function r(){n.call(this)}i(10)(r,n),r.Readable=i(25),r.Writable=i(116),r.Duplex=i(117),r.Transform=i(118),r.PassThrough=i(119),r.Stream=r,r.prototype.pipe=function(t,e){var i=this;function r(e){t.writable&&!1===t.write(e)&&i.pause&&i.pause()}function o(){i.readable&&i.resume&&i.resume()}i.on("data",r),t.on("drain",o),t._isStdio||e&&!1===e.end||(i.on("end",a),i.on("close",u));var s=!1;function a(){s||(s=!0,t.end())}function u(){s||(s=!0,"function"==typeof t.destroy&&t.destroy())}function h(t){if(l(),0===n.listenerCount(this,"error"))throw t}function l(){i.removeListener("data",r),t.removeListener("drain",o),i.removeListener("end",a),i.removeListener("close",u),i.removeListener("error",h),t.removeListener("error",h),i.removeListener("end",l),i.removeListener("close",l),t.removeListener("close",l)}return i.on("error",h),t.on("error",h),i.on("end",l),i.on("close",l),t.on("close",l),t.emit("pipe",i),t}},function(t,e){},function(t,e,i){"use strict";var n=i(18).Buffer,r=i(113);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,i=""+e.data;e=e.next;)i+=t+e.data;return i},t.prototype.concat=function(t){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var e,i,r,o=n.allocUnsafe(t>>>0),s=this.head,a=0;s;)e=s.data,i=o,r=a,e.copy(i,r),a+=s.data.length,s=s.next;return o},t}(),r&&r.inspect&&r.inspect.custom&&(t.exports.prototype[r.inspect.custom]=function(){var t=r.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,e){},function(t,e,i){(function(e){function i(t){try{if(!e.localStorage)return!1}catch(t){return!1}var i=e.localStorage[t];return null!=i&&"true"===String(i).toLowerCase()}t.exports=function(t,e){if(i("noDeprecation"))return t;var n=!1;return function(){if(!n){if(i("throwDeprecation"))throw new Error(e);i("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}}}).call(this,i(7))},function(t,e,i){"use strict";t.exports=o;var n=i(53),r=i(15);function o(t){if(!(this instanceof o))return new o(t);n.call(this,t)}r.inherits=i(10),r.inherits(o,n),o.prototype._transform=function(t,e,i){i(null,t)}},function(t,e,i){t.exports=i(26)},function(t,e,i){t.exports=i(11)},function(t,e,i){t.exports=i(25).Transform},function(t,e,i){t.exports=i(25).PassThrough},function(t,e,i){"use strict";(function(e,n){const r=i(1),o=i(54),s=i(121),a=i(122),u=new Map,h=224,l=144,c=247,f=118,p=24,d=249,v=240,g=128,E={};E[d]=function(t){t.version.major=t.buffer[1],t.version.minor=t.buffer[2],t.emit("reportversion")},E[h]=function(t){const e=15&t.buffer[0],i=t.buffer[1]|t.buffer[2]<<7;t.pins[t.analogPins[e]]&&(t.pins[t.analogPins[e]].value=i),t.emit(`analog-read-${e}`,i),t.emit("analog-read",{pin:e,value:i})},E[l]=function(t){const e=15&t.buffer[0],i=t.buffer[1]|t.buffer[2]<<7;for(let n=0;n<8;n++){const r=8*e+n,o=t.pins[r],s=1<<n;if(o&&(o.mode===t.MODES.INPUT||o.mode===t.MODES.PULLUP)){o.value=i>>(7&n)&1,o.value?t.ports[e]|=s:t.ports[e]&=~s;let{value:a}=o;t.emit(`digital-read-${r}`,a),t.emit("digital-read",{pin:r,value:a})}}};const m={};function y(t,e,i){if("function"!=typeof e&&void 0!==e||(i=e,e={}),!(this instanceof y))return new y(t,e,i);r.call(this);var n=this;e.serialport&&e.serialport.bufferSize&&(e.serialport.highWaterMark=e.serialport.bufferSize);var o=Object.assign({},{reportVersionTimeout:5e3,samplingInterval:19,serialport:{baudRate:57600,highWaterMark:256}},e);function s(){n.isReady=!0,n.emit("ready"),"function"==typeof i&&i()}this.isReady=!1,this.MODES={INPUT:0,OUTPUT:1,ANALOG:2,PWM:3,SERVO:4,SHIFT:5,I2C:6,ONEWIRE:7,STEPPER:8,SERIAL:10,PULLUP:11,IGNORE:127,PING_READ:117,UNKOWN:16},this.I2C_MODES={WRITE:0,READ:1,CONTINUOUS_READ:2,STOP_READING:3},this.STEPPER={TYPE:{DRIVER:1,TWO_WIRE:2,THREE_WIRE:3,FOUR_WIRE:4},STEP_SIZE:{WHOLE:0,HALF:1},RUN_STATE:{STOP:0,ACCEL:1,DECEL:2,RUN:3},DIRECTION:{CCW:0,CW:1}},this.SERIAL_MODES={CONTINUOUS_READ:0,STOP_READING:1},this.SERIAL_PORT_IDs={HW_SERIAL0:0,HW_SERIAL1:1,HW_SERIAL2:2,HW_SERIAL3:3,SW_SERIAL0:8,SW_SERIAL1:9,SW_SERIAL2:16,SW_SERIAL3:17,DEFAULT:8},this.SERIAL_PIN_TYPES={RES_RX0:0,RES_TX0:1,RES_RX1:2,RES_TX1:3,RES_RX2:4,RES_TX2:5,RES_RX3:6,RES_TX3:7},this.RESOLUTION={ADC:null,DAC:null,PWM:null},this.HIGH=1,this.LOW=0,this.pins=[],this.ports=Array(16).fill(0),this.analogPins=[],this.version={},this.firmware={},this.buffer=[],this.versionReceived=!1,this.name="Firmata",this.settings=o,this.pending=0,this.digitalPortQueue=0,this.transport="object"==typeof t?t:new a.SerialPort(t,o.serialport),this.sp=this.transport,this.transport.on("close",t=>{t&&t.disconnect&&t.disconnected?this.emit("disconnect"):this.emit("close")}),this.transport.on("open",t=>{this.emit("open",t),this.emit("connect",t)}),this.transport.on("error",t=>{this.isReady||"function"!=typeof i?this.emit("error",t):i(t)}),this.transport.on("data",t=>{for(var e,i,n,r,o,s,a=0;a<t.length;a++)e=t[a],0===this.buffer.length&&0===e||(this.buffer.push(e),r=this.buffer[0],o=this.buffer[this.buffer.length-1],r===v&&o===c?((s=m[this.buffer[1]])&&this.versionReceived&&s(this),this.buffer.length=0):r===v&&this.buffer.length>0?(i=t[a])>127&&(this.buffer.length=0,this.buffer.push(i)):r!==v&&(n=r<v?r&v:r)!==d&&n!==h&&n!==l&&(this.buffer.length=0),3===this.buffer.length&&r!==v&&(E[n=r<v?r&v:r]?((this.versionReceived||r===d)&&(this.versionReceived=!0,E[n](this)),this.buffer.length=0):this.buffer.length=0))}),this.reportVersionTimeoutId=setTimeout(()=>{!1===this.versionReceived&&(this.reportVersion(function(){}),this.queryFirmware(function(){}))},o.reportVersionTimeout),this.once("reportversion",()=>{clearTimeout(this.reportVersionTimeoutId),this.versionReceived=!0,this.once("queryfirmware",()=>{if(void 0!==e.samplingInterval&&this.setSamplingInterval(e.samplingInterval),o.skipCapabilities){if(this.analogPins=o.analogPins||this.analogPins,this.pins=o.pins||this.pins,!this.pins.length)for(var t=0;t<(o.pinCount||g);t++){var i=this.analogPins.indexOf(t);i<0&&(i=127),this.pins.push({supportedModes:[],analogChannel:i})}this.RESOLUTION.ADC=1023,this.RESOLUTION.PWM=255,s()}else this.queryCapabilities(()=>{this.queryAnalogMapping(s)})})})}function b(t,i){t.pending++,t.transport.write(e.from(i),()=>t.pending--)}function R(t,e){const i=u.get(t);if(!i)throw new Error("I2C is not enabled for this board. To enable, call the i2cConfig() method.");if(e[1]===f){const t=e[2];i[t]||(i[t]={stopTX:!0}),e[3]&p&&(e[3]|=Number(!i[t].stopTX)<<6)}b(t,e)}function S(t){var e=[],i=t<0;return t=Math.abs(t),e.push(127&t,t>>7&127,t>>14&127,t>>21&127,t>>28&7),i&&(e[e.length-1]|=8),e}function T(t){let e=127&t[0]|(127&t[1])<<7|(127&t[2])<<14|(127&t[3])<<21|(7&t[4])<<28;return t[4]>>3&&(e*=-1),e}m[121]=function(t){const i=t.buffer.length-2,n=e.alloc(Math.round((i-4)/2));let r=0,o=0;for(let e=4;e<i;e+=2)r=255&(127&t.buffer[e]|(127&t.buffer[e+1])<<7),n.writeUInt8(r,o++);t.firmware={name:n.toString(),version:{major:t.buffer[2],minor:t.buffer[3]}},t.emit("queryfirmware")},m[108]=function(t){const e=Object.keys(t.MODES).map(e=>t.MODES[e]);let i,n,r=0;function o(t){return e.reduce((e,i)=>(t&1<<i&&e.push(i),e),[])}if(!t.pins.length)for(let e=2,s=0;e<t.buffer.length-1;e++)127!==t.buffer[e]?(0===s&&(i=t.buffer[e],n=(1<<t.buffer[e+1])-1,r|=1<<i,i===t.MODES.ANALOG&&null===t.RESOLUTION.ADC&&(t.RESOLUTION.ADC=n),i===t.MODES.PWM&&null===t.RESOLUTION.PWM&&(t.RESOLUTION.PWM=n)),s^=1):(t.pins.push({supportedModes:o(r),mode:void 0,value:0,report:1}),r=0,s=0);t.emit("capability-query")},m[110]=function(t){let e=t.buffer[2];t.pins[e].mode=t.buffer[3],t.pins[e].state=t.buffer[4],t.buffer.length>6&&(t.pins[e].state|=t.buffer[5]<<7),t.buffer.length>7&&(t.pins[e].state|=t.buffer[6]<<14),t.emit(`pin-state-${e}`)},m[106]=function(t){let e,i=0;for(let n=2;n<t.buffer.length-1;n++)e=t.buffer[n],t.pins[i].analogChannel=e,127!==e&&t.analogPins.push(i),i++;t.emit("analog-mapping-query")},m[119]=function(t){const e=[],i=127&t.buffer[2]|(127&t.buffer[3])<<7,n=127&t.buffer[4]|(127&t.buffer[5])<<7;for(let i=6,n=t.buffer.length-1;i<n;i+=2)e.push(t.buffer[i]|t.buffer[i+1]<<7);t.emit(`I2C-reply-${i}-${n}`,e)},m[115]=function(t){const e=t.buffer[2];m[e]&&m[e](t)},m[66]=function(t){const e=t.buffer[3],i=t.buffer.slice(4,t.buffer.length-1);t.emit(`1-wire-search-reply-${e}`,s.readDevices(i))},m[69]=function(t){const e=t.buffer[3],i=t.buffer.slice(4,t.buffer.length-1);t.emit(`1-wire-search-alarms-reply-${e}`,s.readDevices(i))},m[67]=function(t){const e=t.buffer.slice(4,t.buffer.length-1),i=o.from7BitArray(e),n=i[1]<<8|i[0];t.emit(`1-wire-read-reply-${n}`,i.slice(2))},m[113]=function(t){t.emit("string",e.from(t.buffer.slice(2,-1)).toString().replace(/\0/g,""))},m[117]=function(t){const e=127&t.buffer[2]|(127&t.buffer[3])<<7,i=[127&t.buffer[4]|(127&t.buffer[5])<<7,127&t.buffer[6]|(127&t.buffer[7])<<7,127&t.buffer[8]|(127&t.buffer[9])<<7,127&t.buffer[10]|(127&t.buffer[11])<<7],n=(i[0]<<24)+(i[1]<<16)+(i[2]<<8)+i[3];t.emit(`ping-read-${e}`,n)},m[114]=function(t){const e=t.buffer[2];t.emit(`stepper-done-${e}`,!0)},m[98]=function(t){const e=t.buffer[2],i=t.buffer[3],n=6===e||10===e?T(t.buffer.slice(4,9)):null;6===e&&t.emit(`stepper-position-${i}`,n),10===e&&t.emit(`stepper-done-${i}`,n),36===e&&t.emit(`multi-stepper-done-${i}`)},m[96]=function(t){const e=240&t.buffer[2],i=15&t.buffer[2],n=[];if(64===e){for(let e=3,i=t.buffer.length;e<i-1;e+=2)n.push(t.buffer[e+1]<<7|t.buffer[e]);t.emit(`serial-data-${i}`,n)}},y.prototype=Object.create(r.prototype,{constructor:{value:y}}),y.prototype.reportVersion=function(t){this.once("reportversion",t),b(this,[d])},y.prototype.queryFirmware=function(t){this.once("queryfirmware",t),b(this,[v,121,c])},y.prototype.analogRead=function(t,e){this.reportAnalogPin(t,1),this.addListener(`analog-read-${t}`,e)},y.prototype.pwmWrite=function(t,e){const i=[];this.pins[t].value=e,t>15?(i[0]=v,i[1]=111,i[2]=t,i[3]=127&e,i[4]=e>>7&127,e>16384&&(i[i.length]=e>>14&127),e>2097152&&(i[i.length]=e>>21&127),e>268435456&&(i[i.length]=e>>28&127),i[i.length]=c):i.push(h|t,127&e,e>>7&127),b(this,i)},y.prototype.analogWrite=y.prototype.pwmWrite,y.prototype.servoConfig=function(t,e,i){if("object"==typeof t&&null!==t){let n=t;t=n.pin,e=n.min,i=n.max}if(void 0===t)throw new Error("servoConfig: pin must be specified");if(void 0===e)throw new Error("servoConfig: min must be specified");if(void 0===i)throw new Error("servoConfig: max must be specified");this.pins[t].mode=this.MODES.SERVO,b(this,[v,112,t,127&e,e>>7&127,127&i,i>>7&127,c])},y.prototype.servoWrite=function(...t){this.analogWrite(...t)},y.prototype.pinMode=function(t,e){this.pins[t].mode=e,b(this,[244,t,e])},y.prototype.digitalWrite=function(t,e,i){let n=this.updateDigitalPort(t,e);i?this.digitalPortQueue|=1<<n:this.writeDigitalPort(n)},y.prototype.updateDigitalPort=function(t,e){const i=t>>3,n=1<<(7&t);return this.pins[t].value=e,e?this.ports[i]|=n:this.ports[i]&=~n,i},y.prototype.flushDigitalPorts=function(){for(let t=0;t<this.ports.length;t++)this.digitalPortQueue>>t&&this.writeDigitalPort(t);this.digitalPortQueue=0},y.prototype.writeDigitalPort=function(t){b(this,[l|t,127&this.ports[t],this.ports[t]>>7&127])},y.prototype.digitalRead=function(t,e){this.reportDigitalPin(t,1),this.addListener(`digital-read-${t}`,e)},y.prototype.queryCapabilities=function(t){this.once("capability-query",t),b(this,[v,107,c])},y.prototype.queryAnalogMapping=function(t){this.once("analog-mapping-query",t),b(this,[v,105,c])},y.prototype.queryPinState=function(t,e){this.once(`pin-state-${t}`,e),b(this,[v,109,t,c])},y.prototype.sendString=function(t){const i=e.from(`${t}\0`,"utf8"),n=[];n.push(v,113);for(let t=0,e=i.length;t<e;t++)n.push(127&i[t],i[t]>>7&127);n.push(c),b(this,n)},y.prototype.sendI2CConfig=function(t){return this.i2cConfig(t)},y.prototype.i2cConfig=function(t){let e,i=u.get(this);return i||(i={},u.set(this,i)),"number"==typeof t?e=t:"object"==typeof t&&null!==t&&(e=Number(t.delay),void 0!==t.address&&(i[t.address]||(i[t.address]={stopTX:!0})),void 0!==t.settings&&Object.assign(i[t.address],t.settings)),i.delay=e=e||0,R(this,[v,120,255&e,e>>8&255,c]),this},y.prototype.sendI2CWriteRequest=function(t,e){const i=[];e=e||[],i.push(v,f,t,this.I2C_MODES.WRITE<<3);for(let t=0,n=e.length;t<n;t++)i.push(127&e[t],e[t]>>7&127);i.push(c),R(this,i)},y.prototype.i2cWrite=function(t,i,n){const r=[v,f,t,this.I2C_MODES.WRITE<<3];if(3===arguments.length&&!Array.isArray(i)&&!Array.isArray(n))return this.i2cWriteReg(t,i,n);2===arguments.length&&(Array.isArray(i)?(n=i.slice(),i=n.shift()):n=[]);const o=e.from([i].concat(n));for(var s=0,a=o.length;s<a;s++)r.push(127&o[s],o[s]>>7&127);return r.push(c),R(this,r),this},y.prototype.i2cWriteReg=function(t,e,i){return R(this,[v,f,t,this.I2C_MODES.WRITE<<3,127&e,e>>7&127,127&i,i>>7&127,c]),this},y.prototype.sendI2CReadRequest=function(t,e,i){R(this,[v,f,t,this.I2C_MODES.READ<<3,127&e,e>>7&127,c]),this.once(`I2C-reply-${t}-0`,i)},y.prototype.i2cRead=function(t,e,i,n){3===arguments.length&&"number"==typeof e&&"function"==typeof i&&(n=i,i=e,e=null);const r=[v,f,t,this.I2C_MODES.CONTINUOUS_READ<<3];let o=`I2C-reply-${t}-`;return null!==e?r.push(127&e,e>>7&127):e=0,o+=e,r.push(127&i,i>>7&127,c),this.on(o,n),R(this,r),this},y.prototype.i2cStop=function(t){null!=t&&("number"==typeof t&&(t={address:t}),b(this,[v,f,t.address,this.I2C_MODES.STOP_READING<<3,c]),Object.keys(this._events).forEach(e=>{e.startsWith(`I2C-reply-${t.address}`)&&this.removeAllListeners(e)}))},y.prototype.i2cReadOnce=function(t,e,i,n){3===arguments.length&&"number"==typeof e&&"function"==typeof i&&(n=i,i=e,e=null);const r=[v,f,t,this.I2C_MODES.READ<<3];let o=`I2C-reply-${t}-`;return null!==e?r.push(127&e,e>>7&127):e=0,o+=e,r.push(127&i,i>>7&127,c),this.once(o,n),R(this,r),this},y.prototype.sendOneWireConfig=function(t,e){b(this,[v,115,65,t,e?1:0,c])},y.prototype.sendOneWireSearch=function(t,e){this._sendOneWireSearch(64,`1-wire-search-reply-${t}`,t,e)},y.prototype.sendOneWireAlarmsSearch=function(t,e){this._sendOneWireSearch(68,`1-wire-search-alarms-reply-${t}`,t,e)},y.prototype._sendOneWireSearch=function(t,e,i,n){b(this,[v,115,t,i,c]);const r=setTimeout(()=>{n(new Error("1-Wire device search timeout - are you running ConfigurableFirmata?"))},5e3);this.once(e,t=>{clearTimeout(r),n(null,t)})},y.prototype.sendOneWireRead=function(t,e,i,n){const r=Math.floor(255*Math.random()),o=setTimeout(()=>{n(new Error("1-Wire device read timeout - are you running ConfigurableFirmata?"))},5e3);this._sendOneWireRequest(t,8,e,i,r,null,null,`1-wire-read-reply-${r}`,t=>{clearTimeout(o),n(null,t)})},y.prototype.sendOneWireReset=function(t){this._sendOneWireRequest(t,1)},y.prototype.sendOneWireWrite=function(t,e,i){this._sendOneWireRequest(t,32,e,null,null,null,Array.isArray(i)?i:[i])},y.prototype.sendOneWireDelay=function(t,e){this._sendOneWireRequest(t,16,null,null,null,e)},y.prototype.sendOneWireWriteAndRead=function(t,e,i,n,r){const o=Math.floor(255*Math.random()),s=setTimeout(()=>{r(new Error("1-Wire device read timeout - are you running ConfigurableFirmata?"))},5e3);this._sendOneWireRequest(t,40,e,n,o,null,Array.isArray(i)?i:[i],`1-wire-read-reply-${o}`,t=>{clearTimeout(s),r(null,t)})},y.prototype._sendOneWireRequest=function(t,e,i,n,r,s,a,u,h){const l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];(i||n||r||s||a)&&(e|=60),i&&l.splice(...[0,8].concat(i)),n&&(l[8]=255&n,l[9]=n>>8&255),r&&(l[10]=255&r,l[11]=r>>8&255),s&&(l[12]=255&s,l[13]=s>>8&255,l[14]=s>>16&255,l[15]=s>>24&255),a&&l.push(...a),b(this,[v,115,e,t,...o.to7BitArray(l),c]),u&&h&&this.once(u,h)},y.prototype.setSamplingInterval=function(t){const e=t<10?10:t>65535?65535:t;this.settings.samplingInterval=e,b(this,[v,122,127&e,e>>7&127,c])},y.prototype.getSamplingInterval=function(){return this.settings.samplingInterval},y.prototype.reportAnalogPin=function(t,e){0!==e&&1!==e||(this.pins[this.analogPins[t]].report=e,b(this,[192|t,e]))},y.prototype.reportDigitalPin=function(t,e){const i=t>>3;0!==e&&1!==e||(this.pins[t].report=e,b(this,[208|i,e]))},y.prototype.pingRead=function(t,e){if(!this.pins[t.pin].supportedModes.includes(117))throw new Error("Please upload PingFirmata to the board");const{pin:i,value:n,pulseOut:r=0,timeout:o=1e6}=t,s=[r>>24&255,r>>16&255,r>>8&255,255&r],a=[o>>24&255,o>>16&255,o>>8&255,255&o];b(this,[v,117,i,n,...y.encode(s),...y.encode(a),c]),this.once(`ping-read-${i}`,e)},y.prototype.accelStepperConfig=function(t){let{deviceNum:e,invertPins:i,motorPin1:n,motorPin2:r,motorPin3:o,motorPin4:s,enablePin:a,stepSize:u=this.STEPPER.STEP_SIZE.WHOLE,type:h=this.STEPPER.TYPE.FOUR_WIRE}=t;const l=[v,98,0,e];let f=(7&h)<<4|(7&u)<<1,p=0;void 0!==a&&(f|=1),l.push(f),["stepPin","motorPin1","directionPin","motorPin2","motorPin3","motorPin4","enablePin"].forEach(e=>{void 0!==t[e]&&l.push(t[e])}),Array.isArray(i)&&(i.includes(n)&&(p|=1),i.includes(r)&&(p|=2),i.includes(o)&&(p|=4),i.includes(s)&&(p|=8),i.includes(a)&&(p|=16)),l.push(p,c),b(this,l)},y.prototype.accelStepperZero=function(t){b(this,[v,98,1,t,c])},y.prototype.accelStepperStep=function(t,e,i){b(this,[v,98,2,t,...S(e),c]),i&&this.once(`stepper-done-${t}`,i)},y.prototype.accelStepperTo=function(t,e,i){b(this,[v,98,3,t,...S(e),c]),i&&this.once(`stepper-done-${t}`,i)},y.prototype.accelStepperEnable=function(t,e=!0){b(this,[v,98,4,t,1&e,c])},y.prototype.accelStepperStop=function(t){b(this,[v,98,5,t,c])},y.prototype.accelStepperReportPosition=function(t,e){b(this,[v,98,6,t,c]),e&&this.once(`stepper-position-${t}`,e)},y.prototype.accelStepperAcceleration=function(t,e){b(this,[v,98,8,t,...A(e),c])},y.prototype.accelStepperSpeed=function(t,e){b(this,[v,98,9,t,...A(e),c])},y.prototype.multiStepperConfig=function(t){b(this,[v,98,32,t.groupNum,...t.devices,c])},y.prototype.multiStepperTo=function(t,e,i){if(t<0||t>5)throw new RangeError(`Invalid "groupNum": ${t}. Expected "groupNum" between 0-5`);b(this,[v,98,33,t,...e.reduce((t,e)=>t.concat(...S(e)),[]),c]),i&&this.once(`multi-stepper-done-${t}`,i)},y.prototype.multiStepperStop=function(t){if(t<0||t>5)throw new RangeError(`Invalid "groupNum": ${t}. Expected "groupNum" between 0-5`);b(this,[v,98,35,t,c])},y.prototype.stepperConfig=function(t,e,i,n,r,o,s){b(this,[v,114,0,t,e,127&i,i>>7&127,n,r,...e===this.STEPPER.TYPE.FOUR_WIRE?[o,s]:[],c])},y.prototype.stepperStep=function(t,e,i,n,r,o,s){"function"==typeof r&&(s=r,r=0,o=0),b(this,[v,114,1,t,e,127&i,i>>7&127,i>>14&127,127&n,n>>7&127,...r>0||o>0?[127&r,r>>7&127,127&o,o>>7&127]:[],c]),s&&this.once(`stepper-done-${t}`,s)},y.prototype.serialConfig=function(t){let e,i,n,r;if("object"==typeof t&&null!==t&&(e=t.portId,i=t.baud,n=t.rxPin,r=t.txPin),void 0===e)throw new Error("portId must be specified, see SERIAL_PORT_IDs for options.");const o=[v,96,16|e,127&(i=i||57600),i>>7&127,i>>14&127];if(e>7&&void 0!==n&&void 0!==r)o.push(n,r);else if(e>7)throw new Error("Both RX and TX pins must be defined when using Software Serial.");o.push(c),b(this,o)},y.prototype.serialWrite=function(t,e){const i=[v,96,32|t];for(let t=0,n=e.length;t<n;t++)i.push(127&e[t],e[t]>>7&127);i.push(c),e.length>0&&b(this,i)},y.prototype.serialRead=function(t,e,i){const n=[v,96,48|t,this.SERIAL_MODES.CONTINUOUS_READ];2===arguments.length&&"function"==typeof e?i=e:n.push(127&e,e>>7&127),n.push(c),b(this,n),this.on(`serial-data-${t}`,i)},y.prototype.serialStop=function(t){b(this,[v,96,48|t,this.SERIAL_MODES.STOP_READING,c]),this.removeAllListeners(`serial-data-${t}`)},y.prototype.serialClose=function(t){b(this,[v,96,80|t,c])},y.prototype.serialFlush=function(t){b(this,[v,96,96|t,c])},y.prototype.serialListen=function(t){t<8||b(this,[v,96,112|t,c])},y.prototype.sysexResponse=function(t,e){if(y.SYSEX_RESPONSE[t])throw new Error(`${t} is not an available SYSEX_RESPONSE byte`);return y.SYSEX_RESPONSE[t]=function(t){e.call(t,t.buffer.slice(2,-1))},this},y.prototype.clearSysexResponse=function(t){y.SYSEX_RESPONSE[t]&&delete y.SYSEX_RESPONSE[t]},y.prototype.sysexCommand=function(t){if(!t||!t.length)throw new Error("Sysex Command cannot be empty");return b(this,[v,...t.slice(),c]),this},y.prototype.reset=function(){b(this,[255])},y.isAcceptablePort=function(t){return!!/usb|acm|^com/i.test(t.comName)},y.requestPort=function(t){a.list(function(e,i){const n=i.find(t=>y.isAcceptablePort(t)&&t);n?t(null,n):t(new Error("No Acceptable Port Found"),null)})},y.Board=y,y.SYSEX_RESPONSE=m,y.MIDI_RESPONSE=E,y.encode=function(t){const e=[],i=t.length;for(let n=0;n<i;n++)e.push(127&t[n],t[n]>>7&127);return e},y.decode=function(t){const e=[];if(t.length%2!=0)throw new Error("Board.decode(data) called with odd number of data bytes");for(;t.length;){const i=t.shift(),n=t.shift();e.push(i|n<<7)}return e};const O=Math.pow(2,23);function A(t){let e=[],i=0,n=t<0?1:0;t=Math.abs(t);let r=Math.floor(Math.log10(t));for(i+=r,t/=Math.pow(10,r);!Number.isInteger(t)&&t<O;)i-=1,t*=10;for(;t>O;)i+=1,t/=10;return e=[127&(t=Math.trunc(t)),t>>7&127,t>>14&127,t>>21&3|(15&(i+=11))<<2|(1&n)<<6]}n.env.IS_TEST_MODE&&(y.test={i2cPeripheralSettings:t=>u.get(t),get i2cActive(){return u},encode32BitSignedInteger:S,decode32BitSignedInteger:T,encodeCustomFloat:A,decodeCustomFloat:function(t){let e=t[0]|t[1]<<7|t[2]<<14|(3&t[3])<<21,i=(t[3]>>2&15)-11;return t[3]>>6&1&&(e*=-1),e*Math.pow(10,i)},writeToTransport:b}),t.exports=y}).call(this,i(8).Buffer,i(0))},function(t,e,i){"use strict";const n=i(54),r={crc8(t){let e=0;for(let i of t)for(let t=8;t;t--){const t=1&(e^i);e>>=1,t&&(e^=140),i>>=1}return e},readDevices(t){const e=n.from7BitArray(t),i=[];for(let t=0;t<e.length;t+=8){const n=e.slice(t,t+8);8===n.length&&(r.crc8(n.slice(0,7))!==n[7]&&console.error("ROM invalid!"),i.push(n))}return i}};t.exports=r},function(t,e,i){"use strict";(function(e,n){const r=i(1);let o,s,a={SerialPort:class extends r{constructor(t){super(),this.isOpen=!0,this.baudRate=0,this.path=t}write(t){e.isBuffer(t)&&(t=Array.from(t)),this.lastWrite=t,this.emit("write",t)}},list:()=>Promise.resolve([])};try{o=n.browser||parseFloat(n.versions.nw)>=.13?i(19):n.env.IS_TEST_MODE?a:{SerialPort:s=i(16),list:s.list}}catch(t){}if(null==o){if(!n.env.IS_TEST_MODE)throw console.log("It looks like serialport didn't compile properly. This is a common problem and its fix is well documented here https://github.com/voodootikigod/node-serialport#to-install"),console.log("The result of requiring the package is: ",s),"Missing serialport dependency";o=a}t.exports=o}).call(this,i(8).Buffer,i(0))},function(t,e,i){var n=i(2),r=i(124),o=i(125),s=i(126);function a(t,e){t.io?this.io=t.io:this.io=t,e=e||{},this.options=e,this.address=e.address||112,this.io.i2cConfig(0),this.io.i2cWrite(this.address,[33]),this.io.i2cWrite(this.address,[129]),this.setBrightness(e.brightness||15)}function u(t,e){a.apply(this,arguments)}function h(t,e){a.apply(this,arguments)}function l(t,e){a.apply(this,arguments)}function c(t,e){a.apply(this,arguments)}function f(t,e){a.apply(this,arguments)}function p(t,e){a.apply(this,arguments)}function d(t){for(var e=[],i=0,n=0;n<8;n++)e.unshift(t>>n&1);return e.forEach(function(t,e){i+=t<<e}),i}a.prototype.setBrightness=function(t){this.io.i2cWrite(this.address,[224|t])},a.prototype.clearDisplay=function(){this.io.i2cWrite(this.address,0,[0,0,0,0,0,0,0,0])},n.inherits(u,a),u.prototype.clearDisplay=function(){this.io.i2cWrite(this.address,0,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])},u.prototype.drawBitmap=function(t){var e=[];t.forEach(function(t){e.push(255&t),e.push(t>>8)}),this.io.i2cWrite(this.address,0,this.rotateBuffer(e))},u.prototype.rotateBuffer=function(t){var e=[];return t.forEach(function(t){var i=new Uint8Array([t>>1|t<<7]);e.push(i[0])}),e},n.inherits(h,a),h.prototype.drawBitmap=function(t){},n.inherits(l,a),l.prototype.drawBitmap=function(t){},n.inherits(c,a),c.prototype.writeText=function(t){var e=s(t,4," ").substring(0,4).split("").map(function(t){return r[t.charCodeAt(0)]||0}),i=[];e.forEach(function(t){i.push(255&t),i.push(t>>8)}),this.io.i2cWrite(this.address,0,i)},n.inherits(f,a),f.prototype.clearDisplay=function(){this.io.i2cWrite(this.address,0,[0,0,0,0,0,0,0,0,0,0])},f.prototype.writeText=function(t){var e=[];t=(t=String(t)).toLowerCase();for(var i=s(t,4," ").split(""),n={},r=!1,a=0;a<i.length;a++)":"==i[a]?r=!0:"."==i[a]?e[e.length-1]&&(e[e.length-1].hasPeriod=!0):(n.character=i[a],e.push(n),n={});var u=[0,0,0,0,0,0,0,0,0,0];e[0]&&(u[0]=(o[e[0].character]||0)+(e[0].hasPeriod?128:0)),e[1]&&(u[2]=(o[e[1].character]||0)+(e[1].hasPeriod?128:0)),r&&(u[4]=255),e[2]&&(u[6]=(o[e[2].character]||0)+(e[2].hasPeriod?128:0)),e[3]&&(u[8]=(o[e[3].character]||0)+(e[3].hasPeriod?128:0)),this.io.i2cWrite(this.address,0,u)},n.inherits(p,a),p.prototype.drawBitmap=function(t,e){Array.isArray(t)&&(e=t[1],t=t[0]);var i=new Array(6);(i=i.map(d))[0]=(t>>20<<4)+(t>>8&15),i[1]=(e>>20<<4)+(e>>8&15),i[2]=((t>>12&15)<<4)+(t>>4&15),i[3]=((e>>12&15)<<4)+(e>>4&15),i[4]=((t>>4&15)<<4)+(15&t),i[5]=((e>>4&15)<<4)+(15&e),this.io.i2cWrite(this.address,0,i)},p.prototype.drawGraph=function(t){},t.exports={Backpack:a,Matrix8x8:u,Matrix8x16:h,AlphaNum4:c,SevenSegment:f,Bargraph24:p}},function(t,e){t.exports=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768,0,0,0,0,0,0,0,0,4809,5568,4857,227,1328,4808,14848,5888,0,6,544,4814,4845,3108,9053,1024,9216,2304,16320,4800,2048,192,0,3072,3135,6,219,143,230,8297,253,7,255,239,4608,2560,9216,200,2304,4227,699,247,4751,57,4623,249,113,189,246,4608,30,9328,56,1334,8502,63,243,8255,8435,237,4609,62,3120,10294,11520,5376,3081,57,8448,15,3075,8,256,4184,8312,216,2190,2136,113,1166,4208,4096,14,13824,48,4308,4176,220,368,1158,80,8328,120,28,8196,10260,10432,8204,2120,2377,4608,9353,1312,16383]},function(t,e){t.exports={0:63,1:6,2:91,3:79,4:102,5:109,6:125,7:7,8:127,9:111,a:119,b:124,c:57,d:94,e:121,f:113}},function(t,e,i){(function(e){var i,n=1/0,r=9007199254740991,o=1.7976931348623157e308,s=NaN,a="[object Symbol]",u=/^\s+|\s+$/g,h=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,f="[\\ud800-\\udfff]",p="[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]",d="\\ud83c[\\udffb-\\udfff]",v="[^\\ud800-\\udfff]",g="(?:\\ud83c[\\udde6-\\uddff]){2}",E="[\\ud800-\\udbff][\\udc00-\\udfff]",m="(?:"+p+"|"+d+")"+"?",y="[\\ufe0e\\ufe0f]?"+m+("(?:\\u200d(?:"+[v,g,E].join("|")+")[\\ufe0e\\ufe0f]?"+m+")*"),b="(?:"+[v+p+"?",p,g,E,f].join("|")+")",R=RegExp(d+"(?="+d+")|"+b+y,"g"),S=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0\\ufe0e\\ufe0f]"),T=parseInt,O="object"==typeof e&&e&&e.Object===Object&&e,A="object"==typeof self&&self&&self.Object===Object&&self,_=O||A||Function("return this")(),I=(i="length",function(t){return null==t?void 0:t[i]});function w(t){return S.test(t)}function M(t){return w(t)?function(t){var e=R.lastIndex=0;for(;R.test(t);)e++;return e}(t):I(t)}function C(t){return w(t)?function(t){return t.match(R)||[]}(t):function(t){return t.split("")}(t)}var D=Object.prototype.toString,P=_.Symbol,L=Math.ceil,x=Math.floor,N=P?P.prototype:void 0,G=N?N.toString:void 0;function W(t,e){var i="";if(!t||e<1||e>r)return i;do{e%2&&(i+=t),(e=x(e/2))&&(t+=t)}while(e);return i}function B(t){if("string"==typeof t)return t;if(H(t))return G?G.call(t):"";var e=t+"";return"0"==e&&1/t==-n?"-0":e}function U(t,e,i){var n=t.length;return i=void 0===i?n:i,!e&&i>=n?t:function(t,e,i){var n=-1,r=t.length;e<0&&(e=-e>r?0:r+e),(i=i>r?r:i)<0&&(i+=r),r=e>i?0:i-e>>>0,e>>>=0;for(var o=Array(r);++n<r;)o[n]=t[n+e];return o}(t,e,i)}function k(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function H(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&D.call(t)==a}function F(t){return t?(t=function(t){if("number"==typeof t)return t;if(H(t))return s;if(k(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=k(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(u,"");var i=l.test(t);return i||c.test(t)?T(t.slice(2),i?2:8):h.test(t)?s:+t}(t))===n||t===-n?(t<0?-1:1)*o:t==t?t:0:0===t?t:0}t.exports=function(t,e,i){var n;t=null==(n=t)?"":B(n);var r=(e=function(t){var e=F(t),i=e%1;return e==e?i?e-i:e:0}(e))?M(t):0;return e&&r<e?t+function(t,e){var i=(e=void 0===e?" ":B(e)).length;if(i<2)return i?W(e,t):e;var n=W(e,L(t/M(e)));return w(e)?U(C(n),0,t).join(""):n.slice(0,t)}(e-r,i):t}}).call(this,i(7))},function(t,e,i){"use strict";(function(e,n,r){var o=i(128),s=i(1),a=i(2);o.colorValue=function(t,e){return t[0]=e[t[0]],t[1]=e[t[1]],t[2]=e[t[2]],(t[0]<<16)+(t[1]<<8)+t[2]};const u=1;var h={FIRMATA:{initialize:{value:function(t){var i=t.length||6,n=t.data||6,r=t.color_order||g.GRB,o=t.strips||new Array,s=!!t.skip_firmware_check,a=t.firmata||void 0;if(null==a)try{a=t.board.io}catch(t){t instanceof TypeError&&(a=void 0)}if(null==a){let t=new Error("A firmata or board object is required");throw t.name="NoFirmataError",t}if("node_pixel_firmata.ino"!==a.firmware.name&&!s){let t=new Error("Please upload NodePixel Firmata to the board");throw t.name="IncorrectFirmataVersionError",t}var h=a.sp||a;if(void 0===h.write){let t=new Error("Node Pixel FIRMATA controller requires IO that can write out");throw t.name="NoWritablePortError",t}var f=t.gamma||u,p=l(256,f,this.dep_warning.gamma);if(void 0===o[0]&&o.push({pin:n,color_order:r,length:i}),o.length>8){var d=new RangeError("Maximum number of strips 8 exceeded");this.emit("error",d)}var E=0;if(o.forEach(function(t){E+=t.length}),E>216){d=new RangeError("Maximum number of pixels 216 exceeded");this.emit("error",d)}for(var m=[],y=0;y<E;y++)m.push(new v({addr:y,firmata:a,port:h,controller:"FIRMATA",strip:this}));c.set(this,{pixels:m,data:n,firmata:a,port:h,gtable:p,gamma:f});var b=[];b[0]=240,b[1]=81,b[2]=1,o.forEach(function(t){b.push(t.color_order<<5|t.pin),b.push(127&t.length),b.push(t.length>>7&127)}),b.push(247),h.write(new e(b),function(t,e){var i=null;t&&(i=t,this.emit("error",i)),setTimeout(()=>{this.emit("ready",i)},1)}.bind(this))}},show:{value:function(){var t=c.get(this),i=[];i[0]=240,i[1]=81,i[2]=2,i[3]=247,t.port.write(new e(i))}},strip_color:{value:function(t){var i=c.get(this),n=[];n[0]=240,n[1]=81,n[2]=4,n[3]=127&t,n[4]=t>>7&127,n[5]=t>>14&127,n[6]=t>>21&127,n[7]=247,i.port.write(new e(n))}},_shift:{value:function(t,i,n){let r=n?64:0,o=c.get(this),s=[];s[0]=240,s[1]=81,s[2]=5,s[3]=127&(t|i|r),s[4]=247,o.port.write(new e(s))}}},I2CBACKPACK:{initialize:{value:function(t){var e=t.length||6,i=t.strips||new Array,r=t.color_order||g.GRB,o=t.gamma||u,s=l(256,o,this.dep_warning.gamma),a=t.firmata||t.board.io;if(t.address||(t.address=66),null==a){let t=new Error("An IO object is required to I2C controller");throw t.name="NoIOError",t}if(void 0===i[0])i.push({color_order:r,length:e});else if(NaN!=parseInt(i[0]))for(var h=0;h<i.length;h++){var f=i[h];i[h]={color_order:r,length:f}}if(i.length>8){var p=new RangeError("Maximum number of strips 8 exceeded");this.emit("error",p)}var d=0;if(i.forEach(function(t){d+=t.length}),d>500){p=new RangeError("Maximum number of pixels 500 exceeded");this.emit("error",p)}var E=[];for(h=0;h<d;h++)E.push(new v({addr:h,io:a,controller:"I2CBACKPACK",i2c_address:t.address,strip:this}));c.set(this,{pixels:E,io:a,i2c_address:t.address,gtable:s,gamma:o});var m=[];m.push(1),i.forEach(function(t){m.push(t.color_order<<5|t.pin),m.push(127&t.length),m.push(t.length>>7&127)}),a.i2cConfig(t),n.nextTick(function(){try{a.i2cWrite(t.address,m)}catch(t){t instanceof Error&&"EIO"==t.name&&this.emit("np_i2c_write_error",m)}n.nextTick(function(){this.emit("ready",null)}.bind(this))}.bind(this))}},show:{value:function(){var t=c.get(this);try{t.io.i2cWrite(t.i2c_address,[2])}catch(t){t instanceof Error&&"EIO"==t.name&&this.emit("np_i2c_write_error","PIXEL_SHOW")}}},strip_color:{value:function(t){var e=c.get(this),i=[];i[0]=4,i[1]=127&t,i[2]=t>>7&127,i[3]=t>>14&127,i[4]=t>>21&127;try{e.io.i2cWrite(e.i2c_address,i)}catch(t){t instanceof Error&&"EIO"==t.name&&this.emit("np_i2c_write_error",i)}}},_shift:{value:function(t,e,i){let n=i?64:0,r=c.get(this),o=[];o[0]=5,o[1]=127&(t|e|n);try{r.io.i2cWrite(r.i2c_address,o)}catch(t){t instanceof Error&&"EIO"==t.name&&this.emit("np_i2c_write_error",o)}}}}};function l(t,e,i){i||e!=u||r.IS_TEST_MODE||(console.info("INFO: Default gamma behaviour is changing"),console.info("0.9 - gamma=1.0 - consistent with pre-gamma values"),console.info("0.10 - gamma=2.8 - default fix for WS2812 LEDs"),i=!0);var n=new Array(t);for(let i=0;i<t;i++)n[i]=Math.floor(255*Math.pow(i/255,e)+.5);return n}var c=new WeakMap;function f(t){if(!(this instanceof f))return new f(t);var e;e="string"==typeof t.controller?h[t.controller]:t.controller||h.FIRMATA,this.dep_warning={stripLength:!1,gammaValue:"undefined"===(t.gamma,!1)},Object.defineProperties(this,e),Object.defineProperty(this,"length",{get:function(){return c.get(this).pixels.length}}),Object.defineProperty(this,"gamma",{get:function(){return c.get(this).gamma}}),Object.defineProperty(this,"gtable",{get:function(){return c.get(this).gtable}}),"function"==typeof this.initialize&&this.initialize(t)}a.inherits(f,s.EventEmitter),f.prototype.pixel=function(t){return c.get(this).pixels[t]},f.prototype.colour=f.prototype.color=function(t,e){var i=c.get(this),n=null;if(t)if("object"==typeof t)n=t;else try{n=o.get(t).value}catch(e){e instanceof TypeError&&null===o.get(t)&&(n=null)}if(null!=n){for(var r=0;r<i.pixels.length;r++)i.pixels[r].color(t,{sendmsg:!1});this.strip_color(o.colorValue(n,i.gtable))}else console.log("Supplied colour couldn't be parsed: "+t)},f.prototype.off=f.prototype.clear=function(){this.color([0,0,0]),this.show()},f.prototype.shift=function(t,e,i){if(t>0){let n=c.get(this),r=0;32==e&&(r=this.length-t);let o=n.pixels.splice(r,t);for(;o.length>0;){let t=o.pop();i||t.color("#000"),32==e?n.pixels.unshift(t):n.pixels.push(t)}n.pixels.forEach((t,e)=>{t.address=e}),this._shift(t,e,i)}},f.prototype.stripLength=function(){c.get(this);throw this.dep_warning.stripLength||(console.info("ERROR: strip.stripLength() is deprecated in favour of strip.length"),console.info("0.8 - notice"),console.info("0.9 - error"),console.info("0.10 - removal"),this.dep_warning.stripLength=!0),new Error({name:"NotImplemented",message:"stripLength is no longer supported, use strip.length",toString:function(){return"NotImplemented: stripLength is no longer supported"}})};var p=new WeakMap,d={FIRMATA:{initialize:{value:function(t){return{address:t.addr,id:t.addr,color:{r:0,g:0,b:0,hexcode:"#000000",color:"black",rgb:[0,0,0]},firmata:t.firmata,port:t.port,parent:t.strip}}},pixel_color:{value:function(t){var i=p.get(this),n=[];n.push(240),n.push(81),n.push(3),n.push(127&i.address),n.push(i.address>>7&127),n.push(127&t),n.push(t>>7&127),n.push(t>>14&127),n.push(t>>21&127),n.push(247),i.port.write(new e(n))}}},I2CBACKPACK:{initialize:{value:function(t){return{address:t.addr,id:t.addr,color:{r:0,g:0,b:0,hexcode:"#000000",color:"black",rgb:[0,0,0]},io:t.io,i2c_address:t.i2c_address,parent:t.strip}}},pixel_color:{value:function(t){var e=p.get(this),i=[];i.push(3),i.push(127&e.address),i.push(e.address>>7&127),i.push(127&t),i.push(t>>7&127),i.push(t>>14&127),i.push(t>>21&127),e.io.i2cWrite(e.i2c_address,i)}}}};function v(t){if(!(this instanceof v))return new v(t);var e=d[t.controller];Object.defineProperties(this,e),Object.defineProperty(this,"address",{get:function(){return p.get(this).address},set:function(t){p.get(this).address=t}}),p.set(this,this.initialize(t))}v.prototype.off=v.prototype.clear=function(){this.color([0,0,0])},v.prototype.colour=v.prototype.color=function(t,e){var i=p.get(this),n=e||{},r=!0;null!=n.sendmsg&&(r=n.sendmsg);var s=null;if(!t)return i.color;null!=(s="object"==typeof t?{model:"rgb",value:t}:o.get(t))?(i.color.r=s.value[0],i.color.g=s.value[1],i.color.b=s.value[2],i.color.hexcode=o.to.hex(s.value),i.color.color=o.to.keyword(s.value),4==s.value.length&&s.value.pop(),i.color.rgb=s.value,t=o.colorValue(s.value,i.parent.gtable),r&&this.pixel_color(t)):console.log("Color supplied couldn't be parsed: "+t)};var g={GRB:0,RGB:1,BRG:2};t.exports={Strip:f,COLOR_ORDER:g,FORWARD:32,BACKWARD:0}}).call(this,i(8).Buffer,i(0),i(7))},function(t,e,i){var n=i(31),r=i(129),o={};for(var s in n)n.hasOwnProperty(s)&&(o[n[s]]=s);var a=t.exports={to:{},get:{}};function u(t,e,i){return Math.min(Math.max(e,t),i)}function h(t){var e=t.toString(16).toUpperCase();return e.length<2?"0"+e:e}a.get=function(t){var e,i;switch(t.substring(0,3).toLowerCase()){case"hsl":e=a.get.hsl(t),i="hsl";break;case"hwb":e=a.get.hwb(t),i="hwb";break;default:e=a.get.rgb(t),i="rgb"}return e?{model:i,value:e}:null},a.get.rgb=function(t){if(!t)return null;var e,i,r,o=[0,0,0,1];if(e=t.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(r=e[2],e=e[1],i=0;i<3;i++){var s=2*i;o[i]=parseInt(e.slice(s,s+2),16)}r&&(o[3]=Math.round(parseInt(r,16)/255*100)/100)}else if(e=t.match(/^#([a-f0-9]{3,4})$/i)){for(r=(e=e[1])[3],i=0;i<3;i++)o[i]=parseInt(e[i]+e[i],16);r&&(o[3]=Math.round(parseInt(r+r,16)/255*100)/100)}else if(e=t.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(i=0;i<3;i++)o[i]=parseInt(e[i+1],0);e[4]&&(o[3]=parseFloat(e[4]))}else{if(!(e=t.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)))return(e=t.match(/(\D+)/))?"transparent"===e[1]?[0,0,0,0]:(o=n[e[1]])?(o[3]=1,o):null:null;for(i=0;i<3;i++)o[i]=Math.round(2.55*parseFloat(e[i+1]));e[4]&&(o[3]=parseFloat(e[4]))}for(i=0;i<3;i++)o[i]=u(o[i],0,255);return o[3]=u(o[3],0,1),o},a.get.hsl=function(t){if(!t)return null;var e=t.match(/^hsla?\(\s*([+-]?(?:\d*\.)?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(e){var i=parseFloat(e[4]);return[(parseFloat(e[1])+360)%360,u(parseFloat(e[2]),0,100),u(parseFloat(e[3]),0,100),u(isNaN(i)?1:i,0,1)]}return null},a.get.hwb=function(t){if(!t)return null;var e=t.match(/^hwb\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(e){var i=parseFloat(e[4]);return[(parseFloat(e[1])%360+360)%360,u(parseFloat(e[2]),0,100),u(parseFloat(e[3]),0,100),u(isNaN(i)?1:i,0,1)]}return null},a.to.hex=function(){var t=r(arguments);return"#"+h(t[0])+h(t[1])+h(t[2])+(t[3]<1?h(Math.round(255*t[3])):"")},a.to.rgb=function(){var t=r(arguments);return t.length<4||1===t[3]?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"},a.to.rgb.percent=function(){var t=r(arguments),e=Math.round(t[0]/255*100),i=Math.round(t[1]/255*100),n=Math.round(t[2]/255*100);return t.length<4||1===t[3]?"rgb("+e+"%, "+i+"%, "+n+"%)":"rgba("+e+"%, "+i+"%, "+n+"%, "+t[3]+")"},a.to.hsl=function(){var t=r(arguments);return t.length<4||1===t[3]?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"},a.to.hwb=function(){var t=r(arguments),e="";return t.length>=4&&1!==t[3]&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"},a.to.keyword=function(t){return o[t.slice(0,3)]}},function(t,e,i){"use strict";var n=i(130),r=Array.prototype.concat,o=Array.prototype.slice,s=t.exports=function(t){for(var e=[],i=0,s=t.length;i<s;i++){var a=t[i];n(a)?e=r.call(e,o.call(a)):e.push(a)}return e};s.wrap=function(t){return function(){return t(s(arguments))}}},function(t,e){t.exports=function(t){return!(!t||"string"==typeof t)&&(t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&"String"!==t.constructor.name))}},function(t,e,i){(function(e){var i=function(t,i,n){this.HEIGHT=n.height||32,this.WIDTH=n.width||128,this.ADDRESS=n.address||60,this.PROTOCOL=n.address?"I2C":"SPI",this.MICROVIEW=n.microview||!1,this.SLAVEPIN=n.slavePin||12,this.RESETPIN=n.resetPin||4,this.DATA=n.data||64,this.COMMAND=n.command||0,this.DISPLAY_OFF=174,this.DISPLAY_ON=175,this.SET_DISPLAY_CLOCK_DIV=213,this.SET_MULTIPLEX=168,this.SET_DISPLAY_OFFSET=211,this.SET_START_LINE=0,this.CHARGE_PUMP=141,this.EXTERNAL_VCC=!1,this.MEMORY_MODE=32,this.SEG_REMAP=161,this.COM_SCAN_DEC=200,this.COM_SCAN_INC=192,this.SET_COM_PINS=218,this.SET_CONTRAST=129,this.SET_PRECHARGE=217,this.SET_VCOM_DETECT=219,this.DISPLAY_ALL_ON_RESUME=164,this.NORMAL_DISPLAY=166,this.COLUMN_ADDR=33,this.PAGE_ADDR=34,this.INVERT_DISPLAY=167,this.ACTIVATE_SCROLL=47,this.DEACTIVATE_SCROLL=46,this.SET_VERTICAL_SCROLL_AREA=163,this.RIGHT_HORIZONTAL_SCROLL=38,this.LEFT_HORIZONTAL_SCROLL=39,this.VERTICAL_AND_RIGHT_HORIZONTAL_SCROLL=41,this.VERTICAL_AND_LEFT_HORIZONTAL_SCROLL=42,this.cursor_x=0,this.cursor_y=0,this.buffer=new e(this.WIDTH*this.HEIGHT/8),this.buffer.fill(0),this.dirtyBytes=[],this.board=t,this.five=i;var r={"128x32":{multiplex:31,compins:2,coloffset:0},"128x64":{multiplex:63,compins:18,coloffset:0},"96x16":{multiplex:15,compins:2,coloffset:0},"64x48":{multiplex:47,compins:18,coloffset:this.MICROVIEW?32:0}};this.MICROVIEW?this.SPIconfig={dcPin:8,ssPin:10,rstPin:7,clkPin:13,mosiPin:11}:"SPI"===this.PROTOCOL&&(this.SPIconfig={dcPin:11,ssPin:this.SLAVEPIN,rstPin:13,clkPin:10,mosiPin:9});var o=this.WIDTH+"x"+this.HEIGHT;this.screenConfig=r[o],"I2C"===this.PROTOCOL?this._setUpI2C(n):this._setUpSPI(),this._initialise()};i.prototype._initialise=function(){var t,e=[this.DISPLAY_OFF,this.SET_DISPLAY_CLOCK_DIV,128,this.SET_MULTIPLEX,this.screenConfig.multiplex,this.SET_DISPLAY_OFFSET,0,this.SET_START_LINE,this.CHARGE_PUMP,20,this.MEMORY_MODE,0,this.SEG_REMAP,this.COM_SCAN_DEC,this.SET_COM_PINS,this.screenConfig.compins,this.SET_CONTRAST,143,this.SET_PRECHARGE,241,this.SET_VCOM_DETECT,64,this.DISPLAY_ALL_ON_RESUME,this.NORMAL_DISPLAY,this.DISPLAY_ON],i=e.length;for(t=0;t<i;t++)this._transfer("cmd",e[t])},i.prototype._setUpSPI=function(){this.dcPin=new this.five.Pin(this.SPIconfig.dcPin),this.ssPin=new this.five.Pin(this.SPIconfig.ssPin),this.clkPin=new this.five.Pin(this.SPIconfig.clkPin),this.mosiPin=new this.five.Pin(this.SPIconfig.mosiPin),this.rstPin=new this.five.Pin(this.SPIconfig.rstPin),this.rstPin.low(),this.rstPin.high(),this.ssPin.high()},i.prototype._setUpI2C=function(t){this.board.io.i2cConfig(t),this.rstPin=new this.five.Pin(this.RESETPIN),this.rstPin.low(),this.rstPin.high()},i.prototype._transfer=function(t,e){var i;if("data"===t)i=this.DATA;else{if("cmd"!==t)return;i=this.COMMAND}"I2C"===this.PROTOCOL?this.board.io.i2cWrite(this.ADDRESS,[i,e]):this._writeSPI(e,t)},i.prototype._writeSPI=function(t,e){var i;for("cmd"===e?this.dcPin.low():this.dcPin.high(),this.ssPin.low(),i=7;i>=0;i--)this.clkPin.low(),t&1<<i?this.mosiPin.high():this.mosiPin.low(),this.clkPin.high();this.ssPin.high()},i.prototype._readI2C=function(t){this.board.io.i2cReadOnce(this.ADDRESS,1,function(e){t(e)})},i.prototype._waitUntilReady=function(t){var e=this;function i(t){e._readI2C(function(e){busy=e>>7&1,busy?(console.log("I'm busy!"),setTimeout(i,0)):t()})}"I2C"===this.PROTOCOL?setTimeout(function(){i(t)},0):t()},i.prototype.setCursor=function(t,e){this.cursor_x=t,this.cursor_y=e},i.prototype.writeString=function(t,e,i,n,r,o,s){for(var a=void 0===s||s,u=i.split(" "),h=u.length,l=this.cursor_x,c=0,f=o||2,p=0;p<h;p+=1){u[p]+=" ";var d=u[p].split(""),v=d.length,g=t.width*e*v+e*(h-1);r&&h>1&&l>=this.WIDTH-g&&(l=1,this.cursor_y+=t.height*e+e+f,this.setCursor(l,this.cursor_y));for(var E=0;E<v;E+=1){var m=this._findCharBuf(t,d[E]),y=this._readCharBytes(m);this._drawChar(t,y,e,!1),c=" "===d[E]?0:e+1,l+=t.width*e+c,r&&l>=this.WIDTH-t.width-1&&(l=1,this.cursor_y+=t.height*e+e+f),this.setCursor(l,this.cursor_y)}}a&&this._updateDirtyBytes(this.dirtyBytes)},i.prototype._drawChar=function(t,e,i,n){for(var r=this.cursor_x,o=this.cursor_y,s=0,a=0,u=0;u<e.length;u+=1){s=8*Math.floor(u/t.width);for(var h=0;h<8;h+=1){var l,c,f=e[u][h];1===i?(l=r+a,c=o+h+s,this.drawPixel([l,c,f],!1)):(l=r+u*i,c=o+h*i,this.fillRect(l,c,i,i,f,!1))}a=a<t.width-1?a+=1:0}},i.prototype._readCharBytes=function(t){for(var e=[],i=[],n=0;n<t.length;n+=1){for(var r=t[n],o=0;o<8;o+=1){var s=r>>o&1;e.push(s)}i.push(e),e=[]}return i},i.prototype._findCharBuf=function(t,e){var i=Math.ceil(t.width*t.height/8),n=t.lookup.indexOf(e)*i;return t.fontData.slice(n,n+i)},i.prototype.update=function(){this._waitUntilReady(function(){var t,e,i=[this.COLUMN_ADDR,this.screenConfig.coloffset,this.screenConfig.coloffset+this.WIDTH-1,this.PAGE_ADDR,0,this.HEIGHT/8-1],n=i.length,r=this.buffer.length;for(t=0;t<n;t+=1)this._transfer("cmd",i[t]);for(e=0;e<r;e+=1)this._transfer("data",this.buffer[e])}.bind(this)),this.dirtyBytes=[]},i.prototype.dimDisplay=function(t){var e;e=t?0:207,this._transfer("cmd",this.SET_CONTRAST),this._transfer("cmd",e)},i.prototype.turnOffDisplay=function(){this._transfer("cmd",this.DISPLAY_OFF)},i.prototype.turnOnDisplay=function(){this._transfer("cmd",this.DISPLAY_ON)},i.prototype.clearDisplay=function(t){for(var e=void 0===t||t,i=0;i<this.buffer.length;i+=1)0!==this.buffer[i]&&(this.buffer[i]=0,-1===this.dirtyBytes.indexOf(i)&&this.dirtyBytes.push(i));e&&this._updateDirtyBytes(this.dirtyBytes)},i.prototype.invertDisplay=function(t){t?this._transfer("cmd",this.INVERT_DISPLAY):this._transfer("cmd",this.NORMAL_DISPLAY)},i.prototype.drawBitmap=function(t,e){for(var i,n,r=void 0===e||e,o=0;o<t.length;o++)i=Math.floor(o%this.WIDTH),n=Math.floor(o/this.WIDTH),this.drawPixel([i,n,t[o]],!1);r&&this._updateDirtyBytes(this.dirtyBytes)},i.prototype.drawPixel=function(t,e){var i=void 0===e||e;"object"!=typeof t[0]&&(t=[t]),t.forEach(function(t){var e=t[0],i=t[1],n=t[2];if(!(e>this.WIDTH||i>this.HEIGHT)){var r=0,o=Math.floor(i/8),s=1<<i-8*o;r=0==o?e:e+this.WIDTH*o,"BLACK"!==n&&0!==n||(this.buffer[r]&=~s),("WHITE"===n||n>0)&&(this.buffer[r]|=s),-1===this.dirtyBytes.indexOf(r)&&this.dirtyBytes.push(r)}},this),i&&this._updateDirtyBytes(this.dirtyBytes)},i.prototype._updateDirtyBytes=function(t){var e=t.length;this._waitUntilReady(function(){for(var i=1/0,n=0,r=1/0,o=0,s=!1,a=0;a<e;a+=1){var u=t[a];if(u>=0&&u<this.buffer.length){var h=u/this.WIDTH|0;h<i&&(i=h),h>n&&(n=h);var l=u%this.WIDTH;l<r&&(r=l),l>o&&(o=l),s=!0}}if(s){var c,f,p,d=[this.COLUMN_ADDR,r,o,this.PAGE_ADDR,i,n],v=d.length;for(c=0;c<v;c+=1)this._transfer("cmd",d[c]);for(f=i;f<=n;f+=1)for(p=r;p<=o;p+=1)this._transfer("data",this.buffer[this.WIDTH*f+p])}}.bind(this)),this.dirtyBytes=[]},i.prototype.drawLine=function(t,e,i,n,r,o){for(var s=void 0===o||o,a=Math.abs(i-t),u=t<i?1:-1,h=Math.abs(n-e),l=e<n?1:-1,c=(a>h?a:-h)/2;this.drawPixel([t,e,r],!1),t!==i||e!==n;){var f=c;f>-a&&(c-=h,t+=u),f<h&&(c+=a,e+=l)}s&&this._updateDirtyBytes(this.dirtyBytes)},i.prototype.drawRect=function(t,e,i,n,r,o){var s=void 0===o||o;this.drawLine(t,e,t+i,e,r,!1),this.drawLine(t,e+1,t,e+n-1,r,!1),this.drawLine(t+i,e+1,t+i,e+n-1,r,!1),this.drawLine(t,e+n-1,t+i,e+n-1,r,!1),s&&this._updateDirtyBytes(this.dirtyBytes)},i.prototype.fillRect=function(t,e,i,n,r,o){for(var s=void 0===o||o,a=t;a<t+i;a+=1)this.drawLine(a,e,a,e+n-1,r,!1);s&&this._updateDirtyBytes(this.dirtyBytes)},i.prototype.drawCircle=function(t,e,i,n,r){var o=void 0===r||r,s=1-i,a=1,u=-2*i,h=0,l=i;for(this.drawPixel([[t,e+i,n],[t,e-i,n],[t+i,e,n],[t-i,e,n]],!1);h<l;)s>=0&&(l--,s+=u+=2),h++,s+=a+=2,this.drawPixel([[t+h,e+l,n],[t-h,e+l,n],[t+h,e-l,n],[t-h,e-l,n],[t+l,e+h,n],[t-l,e+h,n],[t+l,e-h,n],[t-l,e-h,n]],!1);o&&this._updateDirtyBytes(this.dirtyBytes)},i.prototype.startScroll=function(t,e,i){var n=[];switch(t){case"right":n.push(this.RIGHT_HORIZONTAL_SCROLL);break;case"left":n.push(this.LEFT_HORIZONTAL_SCROLL);break;case"left diagonal":n.push(this.SET_VERTICAL_SCROLL_AREA,0,this.HEIGHT,this.VERTICAL_AND_LEFT_HORIZONTAL_SCROLL,0,e,0,i,1,this.ACTIVATE_SCROLL);break;case"right diagonal":n.push(this.SET_VERTICAL_SCROLL_AREA,0,this.HEIGHT,this.VERTICAL_AND_RIGHT_HORIZONTAL_SCROLL,0,e,0,i,1,this.ACTIVATE_SCROLL)}this._waitUntilReady(function(){"right"!==t&&"left"!==t||n.push(0,e,0,i,0,255,this.ACTIVATE_SCROLL);var r,o=n.length;for(r=0;r<o;r+=1)this._transfer("cmd",n[r])}.bind(this))},i.prototype.stopScroll=function(){this._transfer("cmd",this.DEACTIVATE_SCROLL)},t.exports=i}).call(this,i(8).Buffer)}]);